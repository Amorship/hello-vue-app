(function(){"use strict";var e={5056:function(e,a,l){var t=l(8709);function r(e,a,l,r,o,i){const d=(0,t.g2)("router-view");return(0,t.uX)(),(0,t.Wv)(d)}var o={name:"App"},i=l(1241);const d=(0,i.A)(o,[["render",r]]);var u=d,n=l(973);const s={class:"main-layout","lock-scroll":!1,"modal-append-to-body":!1},c={class:"layout"};function p(e,a,l,r,o,i){const d=(0,t.g2)("AppNavbar"),u=(0,t.g2)("AppSidebar"),n=(0,t.g2)("router-view");return(0,t.uX)(),(0,t.CE)("div",s,[(0,t.bF)(d,{collapsed:o.isSidebarCollapsed},null,8,["collapsed"]),(0,t.Lk)("div",c,[(0,t.bF)(u,{collapsed:o.isSidebarCollapsed,hideMenu:i.isLoginPage,onToggleSidebar:i.toggleSidebar},null,8,["collapsed","hideMenu","onToggleSidebar"]),(0,t.Lk)("div",{class:(0,t.C4)(["content",{"content-collapsed":o.isSidebarCollapsed}])},[(0,t.bF)(n)],2)])])}var m=l.p+"img/wlogo.f0b2d67e.svg";const _={class:"navbar-left"},g={key:0,class:"logo-text"},k={class:"navbar-right"},b={class:"current-time"},f={class:"name-text"},v={key:0,class:"dropdown",ref:"dropdownMenu"};function h(e,a,l,r,o,i){return(0,t.uX)(),(0,t.CE)("div",{class:(0,t.C4)(["navbar",{collapsed:l.collapsed}])},[(0,t.Lk)("div",_,[a[2]||(a[2]=(0,t.Lk)("img",{src:m,alt:"TOPPOINT Logo",class:"logo-img"},null,-1)),l.collapsed?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("span",g,"TOPPOINT"))]),(0,t.Lk)("div",k,[(0,t.Lk)("span",b,"New Jersey Time: "+(0,t.v_)(o.currentTime),1),!i.isLoginPage&&e.isAuthenticated?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"user-menu",onClick:a[1]||(a[1]=(0,t.D$)(((...e)=>i.toggleDropdown&&i.toggleDropdown(...e)),["stop"]))},[(0,t.Lk)("span",f,"Hi, "+(0,t.v_)(e.username),1),o.showDropdown?((0,t.uX)(),(0,t.CE)("div",v,[(0,t.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>i.handleLogout&&i.handleLogout(...e))},"Logout")],512)):(0,t.Q3)("",!0)])):(0,t.Q3)("",!0)])],2)}l(4114);var D=l(782),C=l(1576),V=l.n(C),F=l(6121),y=l.n(F),T=l(9048),A=l.n(T);V().extend(y()),V().extend(A());var S={props:{collapsed:{type:Boolean,default:!1}},data(){return{currentTime:this.getNewJerseyTime(),showDropdown:!1}},computed:{...(0,D.L8)(["username","isAuthenticated"]),isLoginPage(){return"/login"===this.$route.path}},methods:{...(0,D.i0)(["logout"]),getNewJerseyTime(){return V()().tz("America/New_York").format("YYYY/MM/DD hh:mm:ss A")},toggleDropdown(){this.showDropdown=!this.showDropdown},async handleLogout(){await this.logout(),this.$router.push("/login"),setTimeout((()=>{window.location.reload()}),300)},handleClickOutside(e){this.$refs.dropdownMenu&&!this.$refs.dropdownMenu.contains(e.target)&&(this.showDropdown=!1)},updateTime(){setInterval((()=>{this.currentTime=this.getNewJerseyTime()}),1e3)}},mounted(){this.updateTime(),document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const w=(0,i.A)(S,[["render",h],["__scopeId","data-v-65d75a86"]]);var E=w;const P={key:0,class:"menu"};function I(e,a,l,r,o,i){const d=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)("div",{class:(0,t.C4)(["sidebar",{collapsed:l.collapsed}])},[e.isAuthenticated?((0,t.uX)(),(0,t.CE)("ul",P,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.menuItems,(e=>((0,t.uX)(),(0,t.CE)("li",{key:e.name},[(0,t.bF)(d,{to:e.route,class:"menu-link"},{default:(0,t.k6)((()=>[(0,t.Lk)("span",{class:(0,t.C4)({"collapsed-text":l.collapsed})},(0,t.v_)(e.name),3)])),_:2},1032,["to"])])))),128))])):(0,t.Q3)("",!0),(0,t.Lk)("button",{class:"toggle-button",onClick:a[0]||(a[0]=(...e)=>i.toggleSidebar&&i.toggleSidebar(...e))},(0,t.v_)(l.collapsed?"▶":"◀"),1)],2)}var L={props:{collapsed:{type:Boolean,default:!1}},data(){return{menuItems:[{name:"Order",route:"/order"},{name:"Customer",route:"/customer"},{name:"Chassis",route:"/chassis"},{name:"Truck",route:"/truck"},{name:"Driver Fleet",route:"/driver-fleet"},{name:"Port",route:"/port"},{name:"Truck Driver",route:"/truck-driver"},{name:"Map",route:"/map"},{name:"Admin",route:"/admin"},{name:"Rank",route:"/rank"},{name:"Billing",route:"/billing"}]}},computed:{...(0,D.L8)(["isAuthenticated"])},methods:{toggleSidebar(){this.$emit("toggle-sidebar")}}};const U=(0,i.A)(L,[["render",I],["__scopeId","data-v-6885da93"]]);var x=U,R={data(){return{isSidebarCollapsed:!1}},computed:{isLoginPage(){return"/login"===this.$route.path}},methods:{toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed}},components:{AppNavbar:E,AppSidebar:x}};const O=(0,i.A)(R,[["render",p],["__scopeId","data-v-3828f622"]]);var W=O;const N={class:"login-page"},K={class:"login-container"},Y={class:"input-group"},G={class:"input-group"};function M(e,a,l,r,o,i){return(0,t.uX)(),(0,t.CE)("div",N,[(0,t.Lk)("div",K,[a[5]||(a[5]=(0,t.Lk)("h1",null,"Login",-1)),(0,t.Lk)("div",Y,[a[3]||(a[3]=(0,t.Lk)("label",null,"Username:",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>o.username=e)},null,512),[[t.Jo,o.username]])]),(0,t.Lk)("div",G,[a[4]||(a[4]=(0,t.Lk)("label",null,"Password:",-1)),(0,t.bo)((0,t.Lk)("input",{type:"password","onUpdate:modelValue":a[1]||(a[1]=e=>o.password=e)},null,512),[[t.Jo,o.password]])]),(0,t.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>i.handleLogin&&i.handleLogin(...e))},"Login")])])}var X=l(4373);const z="https://api-stage.toppointtrucking.com";var $={data(){return{username:"",password:""}},methods:{...(0,D.i0)(["login"]),async handleLogin(){try{const e={Token:"string",Timestamp:Date.now(),Sign:"string",UserId:this.username,Password:this.password},a=await X.A.post(`${z}/Auth/Login`,e);if(1e3===a.data.Code){const e=a.data.Groups||[];await this.login({token:a.data.Token,username:a.data.UserName,groups:e}),localStorage.setItem("authToken",a.data.Token),localStorage.setItem("username",a.data.UserName),localStorage.setItem("groups",JSON.stringify(e)),alert("Login successful! Redirecting to the homepage..."),this.$router.push("/")}else alert("Login failed: "+a.data.Code)}catch(e){console.error("Login error:",e),alert("Login error: "+(e.response?e.response.data:e.message))}}}};const Q=(0,i.A)($,[["render",M],["__scopeId","data-v-5bc08f7c"]]);var q=Q;l(8111),l(2489);const B={class:"order-page"},H={class:"search-container"},j={class:"button-container"},J={class:"table-container"},Z={key:0,class:"must-do-icon"};function ee(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-button"),n=(0,t.g2)("el-date-picker"),s=(0,t.g2)("el-form-item"),c=(0,t.g2)("el-col"),p=(0,t.g2)("el-row"),m=(0,t.g2)("el-option"),_=(0,t.g2)("el-select"),g=(0,t.g2)("el-form"),k=(0,t.g2)("el-card"),b=(0,t.g2)("el-collapse"),f=(0,t.g2)("el-pagination"),v=(0,t.g2)("el-table-column"),h=(0,t.g2)("el-table"),D=(0,t.g2)("OrderEditDialog");return(0,t.uX)(),(0,t.CE)("div",B,[a[24]||(a[24]=(0,t.Lk)("h1",null,"Order List",-1)),(0,t.Lk)("div",H,[(0,t.bF)(d,{modelValue:o.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchQuery=e),placeholder:"Search Customer Name or Load ID",clearable:"",class:"search-input"},null,8,["modelValue"]),(0,t.bF)(u,{type:"primary",onClick:a[1]||(a[1]=e=>o.showFilter=!o.showFilter),class:"filter-btn"},{default:(0,t.k6)((()=>[(0,t.eW)((0,t.v_)(o.showFilter?"Hide Filter":"Show Filter"),1)])),_:1})]),(0,t.bo)((0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.bF)(k,{class:"filter-panel"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{inline:!1,"label-width":"120px"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{gutter:10},{default:(0,t.k6)((()=>[(0,t.bF)(c,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Schedule Date"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.filter.scheduleDate,"onUpdate:modelValue":a[2]||(a[2]=e=>o.filter.scheduleDate=e),type:"daterange","range-separator":"To","start-placeholder":"Start","end-placeholder":"End"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(p,{gutter:10},{default:(0,t.k6)((()=>[(0,t.bF)(c,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Load ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.filter.loadId,"onUpdate:modelValue":a[3]||(a[3]=e=>o.filter.loadId=e),placeholder:"Enter Load ID"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(c,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Driver User ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.filter.driverUserId,"onUpdate:modelValue":a[4]||(a[4]=e=>o.filter.driverUserId=e),placeholder:"Enter Driver User ID"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(c,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Load Status"},{default:(0,t.k6)((()=>[(0,t.bF)(_,{modelValue:o.filter.loadStatus,"onUpdate:modelValue":a[5]||(a[5]=e=>o.filter.loadStatus=e),placeholder:"Select Status"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{label:"Pending",value:"Pending"}),(0,t.bF)(m,{label:"Complete",value:"Complete"}),(0,t.bF)(m,{label:"In Progress",value:"In Progress"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(p,{gutter:10},{default:(0,t.k6)((()=>[(0,t.bF)(c,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Booking"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.filter.booking,"onUpdate:modelValue":a[6]||(a[6]=e=>o.filter.booking=e),placeholder:"Enter Booking"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(c,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Container #"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.filter.container,"onUpdate:modelValue":a[7]||(a[7]=e=>o.filter.container=e),placeholder:"Enter Container #"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(c,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Customer Location"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.filter.customerLocation,"onUpdate:modelValue":a[8]||(a[8]=e=>o.filter.customerLocation=e),placeholder:"Enter Customer or Location"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(p,{gutter:10},{default:(0,t.k6)((()=>[(0,t.bF)(c,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Address Detail"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.filter.addressDetail,"onUpdate:modelValue":a[9]||(a[9]=e=>o.filter.addressDetail=e),placeholder:"Enter Address"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(c,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Loads Notes"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.filter.loadNotes,"onUpdate:modelValue":a[10]||(a[10]=e=>o.filter.loadNotes=e),placeholder:"Enter Load Notes"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(c,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Load Number / PO"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.filter.loadNumber,"onUpdate:modelValue":a[11]||(a[11]=e=>o.filter.loadNumber=e),placeholder:"Enter PO Number"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(p,{gutter:10},{default:(0,t.k6)((()=>[(0,t.bF)(c,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Pick Terminal"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.filter.pickTerminal,"onUpdate:modelValue":a[12]||(a[12]=e=>o.filter.pickTerminal=e),placeholder:"Enter Pick Terminal"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(c,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Drop Terminal"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.filter.dropTerminal,"onUpdate:modelValue":a[13]||(a[13]=e=>o.filter.dropTerminal=e),placeholder:"Enter Drop Terminal"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(c,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Vessel"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.filter.vessel,"onUpdate:modelValue":a[14]||(a[14]=e=>o.filter.vessel=e),placeholder:"Enter Vessel"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(p,{justify:"end"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{span:6,class:"filter-buttons"},{default:(0,t.k6)((()=>[(0,t.bF)(s,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{type:"primary",onClick:e.searchOrders},{default:(0,t.k6)((()=>a[18]||(a[18]=[(0,t.eW)("Search")]))),_:1},8,["onClick"]),(0,t.bF)(u,{type:"warning",onClick:e.clearFilters},{default:(0,t.k6)((()=>a[19]||(a[19]=[(0,t.eW)("Clear")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),[[t.aG,o.showFilter]]),(0,t.bF)(f,{background:"",layout:"prev, pager, next",total:i.filteredOrders.length,"page-size":o.pageSize,"current-page":o.currentPage,"onUpdate:currentPage":a[15]||(a[15]=e=>o.currentPage=e),class:"pagination-container top-pagination"},null,8,["total","page-size","current-page"]),(0,t.Lk)("div",j,[(0,t.bF)(u,{type:"primary",size:"small",onClick:e.addOrder},{default:(0,t.k6)((()=>a[20]||(a[20]=[(0,t.eW)("Add")]))),_:1},8,["onClick"]),(0,t.bF)(u,{type:"danger",size:"small",onClick:e.cancelOrder},{default:(0,t.k6)((()=>a[21]||(a[21]=[(0,t.eW)("Cancel Order")]))),_:1},8,["onClick"])]),(0,t.Lk)("div",J,[(0,t.bF)(h,{data:i.paginatedOrders.length?i.paginatedOrders:[],stripe:"",border:""},{default:(0,t.k6)((()=>[(0,t.bF)(v,{label:"Actions",width:"150"},{default:(0,t.k6)((({row:l})=>[(0,t.bF)(u,{type:"primary",size:"small",onClick:a=>e.handleEdit(l)},{default:(0,t.k6)((()=>a[22]||(a[22]=[(0,t.eW)("Edit")]))),_:2},1032,["onClick"]),(0,t.bF)(u,{type:"danger",size:"small",onClick:a=>e.handleCancel(l)},{default:(0,t.k6)((()=>a[23]||(a[23]=[(0,t.eW)("Cancel")]))),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(v,{label:"Load Type",width:"150",formatter:r.formatOrderType},null,8,["formatter"]),(0,t.bF)(v,{prop:"order.str_schedule_date",label:"SCHEDULE DATE",width:"180"}),(0,t.bF)(v,{label:"Load ID",width:"150"},{default:(0,t.k6)((({row:e})=>[e.order.must_do?((0,t.uX)(),(0,t.CE)("span",Z,"❗")):(0,t.Q3)("",!0),(0,t.eW)(" "+(0,t.v_)(e.order.order_id),1)])),_:1}),(0,t.bF)(v,{prop:"detail.driver_user_id",label:"Driver User ID",width:"180"}),(0,t.bF)(v,{prop:"detail.str_order_status",label:"Load Status",width:"200"}),(0,t.bF)(v,{prop:"order.str_erd",label:"ERD",width:"150"}),(0,t.bF)(v,{prop:"order.str_cut_off",label:"CUT OFF",width:"150"}),(0,t.bF)(v,{prop:"order.booking_id",label:"Booking",width:"180"}),(0,t.bF)(v,{prop:"order.str_doc_date",label:"DOC CUT",width:"200"}),(0,t.bF)(v,{prop:"detail.container",label:"CONTAINER #",width:"180"}),(0,t.bF)(v,{prop:"order.str_customer",label:"CUSTOMER / LOCATION",width:"250"}),(0,t.bF)(v,{prop:"order.customer_address",label:"ADDRESS DETAIL",width:"300"}),(0,t.bF)(v,{prop:"order.str_ssl",label:"SSL",width:"150"}),(0,t.bF)(v,{prop:"order.load_notes",label:"Loads Notes",width:"250"}),(0,t.bF)(v,{prop:"order.scale_hazmat",label:"SCALE / HAZ",width:"150"}),(0,t.bF)(v,{prop:"order.po_no",label:"Load Number / PO",width:"180"}),(0,t.bF)(v,{prop:"order.container_size",label:"Size",width:"120"}),(0,t.bF)(v,{prop:"order.pick_terminal",label:"PICK TERMINAL",width:"150"}),(0,t.bF)(v,{prop:"order.drop_terminal",label:"DROP TERMINAL",width:"150"}),(0,t.bF)(v,{prop:"order.vessel",label:"VESSEL",width:"200"})])),_:1},8,["data"])]),(0,t.bF)(f,{background:"",layout:"prev, pager, next",total:i.filteredOrders.length,"page-size":o.pageSize,"current-page":o.currentPage,"onUpdate:currentPage":a[16]||(a[16]=e=>o.currentPage=e),class:"pagination-container bottom-pagination"},null,8,["total","page-size","current-page"]),(0,t.bF)(D,{visible:o.editDialogVisible,"onUpdate:visible":a[17]||(a[17]=e=>o.editDialogVisible=e),orderData:o.selectedOrder,onUpdateSuccess:i.fetchOrders},null,8,["visible","orderData","onUpdateSuccess"])])}var ae={setup(){const e=e=>{const a={I:"Import",D:"Domestic",E:"Export"};return a[e.order?.order_type]||"Unknown"};return{formatOrderType:e}},data(){return{orderList:[],searchQuery:"",loading:!1,currentPage:1,pageSize:100,editDialogVisible:!1,selectedOrder:null,showFilter:!1,filter:{scheduleDate:null,loadId:"",driverUserId:"",loadStatus:"",booking:"",container:"",customerLocation:"",addressDetail:"",loadNotes:"",loadNumber:"",pickTerminal:"",dropTerminal:"",vessel:""}}},computed:{...(0,D.aH)(["authToken"]),filteredOrders(){if(!this.searchQuery)return this.orderList;const e=this.searchQuery.toLowerCase();return this.orderList.filter((a=>a.order.customer_id_name&&a.order.customer_id_name.toLowerCase().includes(e)||a.order.order_id&&a.order.order_id.toString().includes(e)))},paginatedOrders(){const e=(this.currentPage-1)*this.pageSize,a=e+this.pageSize;return this.filteredOrders.slice(e,a)}},methods:{...(0,D.i0)(["checkTokenExpiration"]),async fetchOrders(){this.loading=!0;try{let e=localStorage.getItem("authToken");if(!e)return alert("Session expired, please log in again."),void this.$router.push("/login");const a=await X.A.post(`${z}/Order/ListByDate`,{Token:e,Timestamp:Date.now(),Sign:"string",start_date:"2024-02-01",end_date:"2024-03-30"});this.orderList=1e3===a.data.Code&&a.data.order_list||[]}catch(e){console.error("❌ API Error:",e),this.orderList=[]}finally{this.loading=!1}}},mounted(){this.fetchOrders()}};const le=(0,i.A)(ae,[["render",ee],["__scopeId","data-v-430721ec"]]);var te=le;const re={class:"container"},oe={class:"search-container"},ie={class:"button-container"};function de(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-button"),s=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-table"),p=(0,t.g2)("CustomerEditDialog"),m=(0,t.g2)("CustomerLocationDialog"),_=(0,t.g2)("CustomerAddDialog");return(0,t.uX)(),(0,t.CE)("div",re,[a[7]||(a[7]=(0,t.Lk)("h2",null,"Customer",-1)),(0,t.Lk)("div",oe,[(0,t.bF)(d,{modelValue:r.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>r.searchQuery=e),placeholder:"Search Customer Name or Customer User ID",clearable:""},null,8,["modelValue"])]),(0,t.bF)(u,{background:"","current-page":r.currentPage,"page-size":50,total:r.filteredCustomers.length,layout:"prev, pager, next",class:"pagination-container top-pagination",onCurrentChange:r.handlePageChange},null,8,["current-page","total","onCurrentChange"]),(0,t.Lk)("div",ie,[(0,t.bF)(n,{type:"primary",size:"small",onClick:r.addCustomer},{default:(0,t.k6)((()=>a[4]||(a[4]=[(0,t.eW)("Add")]))),_:1},8,["onClick"])]),(0,t.bF)(c,{data:r.paginatedCustomers,style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Actions",width:"200"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(n,{type:"primary",size:"small",onClick:a=>r.openEditDialog(e)},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Edit")]))),_:2},1032,["onClick"]),(0,t.bF)(n,{type:"success",size:"small",onClick:a=>r.openLocationDialog(e)},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("Location")]))),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(s,{label:"Customer Name",prop:"customer_name"}),(0,t.bF)(s,{label:"Customer User ID",prop:"customer_user_id"})])),_:1},8,["data"]),(0,t.bF)(u,{background:"","current-page":r.currentPage,"page-size":50,total:r.filteredCustomers.length,layout:"prev, pager, next",class:"pagination-container bottom-pagination",onCurrentChange:r.handlePageChange},null,8,["current-page","total","onCurrentChange"]),r.editDialogVisible?((0,t.uX)(),(0,t.Wv)(p,{key:0,visible:r.editDialogVisible,customerData:r.selectedCustomer,onUpdateSuccess:r.handleUpdateSuccess,onClose:a[1]||(a[1]=e=>r.editDialogVisible=!1)},null,8,["visible","customerData","onUpdateSuccess"])):(0,t.Q3)("",!0),r.locationDialogVisible?((0,t.uX)(),(0,t.Wv)(m,{key:1,visible:r.locationDialogVisible,customerId:r.selectedCustomer?.customer_id,onClose:a[2]||(a[2]=e=>r.locationDialogVisible=!1)},null,8,["visible","customerId"])):(0,t.Q3)("",!0),r.addDialogVisible?((0,t.uX)(),(0,t.Wv)(_,{key:2,visible:r.addDialogVisible,onAddSuccess:r.handleAddSuccess,onClose:a[3]||(a[3]=e=>r.addDialogVisible=!1)},null,8,["visible","onAddSuccess"])):(0,t.Q3)("",!0)])}l(1701);var ue=l(1219);function ne(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-form"),s=(0,t.g2)("el-button"),c=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(c,{title:"Customer Add",modelValue:r.dialogVisible,"onUpdate:modelValue":a[3]||(a[3]=e=>r.dialogVisible=e),width:"600px",onClose:r.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(s,{onClick:r.closeDialog},{default:(0,t.k6)((()=>a[4]||(a[4]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(s,{type:"primary",onClick:r.submitAdd,loading:r.loading},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(n,{ref:"formRef",model:r.formData,"label-width":"180px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Customer Name",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.customer_name,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.customer_name=e),placeholder:"Enter Customer Name"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Customer User ID",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.customer_user_id,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.customer_user_id=e),placeholder:"Enter Customer User ID",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Password",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.customer_user_pwd,"onUpdate:modelValue":a[2]||(a[2]=e=>r.formData.customer_user_pwd=e),type:"password",placeholder:"Enter Password","show-password":"",autocomplete:"new-password"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var se={props:{visible:Boolean},emits:["update:visible","add-success"],setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||d()}}),r=(0,t.KR)(!1),o=(0,t.KR)({customer_name:"",customer_user_id:"",customer_user_pwd:""}),i=async()=>{if(o.value.customer_name&&o.value.customer_user_id&&o.value.customer_user_pwd){r.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",customer:{...o.value}};console.log("🚀 API 傳遞的資料:",l);const t=await X.A.post(`${z}/Customer/Add`,l);1e3===t.data.Code?(ue.nk.success("Customer added successfully!"),a("add-success"),d()):ue.nk.error("Add failed: "+t.data.Code)}catch(e){console.error("API error:",e),ue.nk.error("API request failed.")}finally{r.value=!1}}else ue.nk.error("All fields are required!")},d=()=>{o.value={customer_name:"",customer_user_id:"",customer_user_pwd:""},a("close")};return{dialogVisible:l,formData:o,loading:r,submitAdd:i,closeDialog:d}}};const ce=(0,i.A)(se,[["render",ne],["__scopeId","data-v-09cf67a8"]]);var pe=ce;function me(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-form"),s=(0,t.g2)("el-button"),c=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(c,{title:"Customer Edit",modelValue:r.dialogVisible,"onUpdate:modelValue":a[3]||(a[3]=e=>r.dialogVisible=e),width:"600px",onClose:r.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(s,{onClick:r.closeDialog},{default:(0,t.k6)((()=>a[4]||(a[4]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(s,{type:"primary",onClick:r.submitEdit,loading:r.loading},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(n,{ref:"formRef",model:r.formData,"label-width":"180px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Customer Name",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.customer_name,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.customer_name=e),placeholder:"Enter Customer Name"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Customer User ID",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.customer_user_id,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.customer_user_id=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Password"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.customer_user_pwd,"onUpdate:modelValue":a[2]||(a[2]=e=>r.formData.customer_user_pwd=e),type:"password",placeholder:"Enter New Password (Leave Blank to Keep Old Password)","show-password":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var _e={props:{visible:Boolean,customerData:Object},emits:["update:visible","update-success"],setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||u()}}),r=(0,t.KR)(!1),o=localStorage.getItem("authUser")||"liwang",i=(0,t.KR)({customer_id:"",customer_name:"",customer_user_id:"",customer_user_pwd:""});(0,t.wB)((()=>e.customerData),(e=>{e&&(i.value={customer_id:e.customer_id,customer_name:e.customer_name,customer_user_id:e.customer_user_id,customer_user_pwd:""})}),{immediate:!0});const d=async()=>{if(i.value.customer_name){r.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",customer:{customer_id:i.value.customer_id,customer_name:i.value.customer_name,customer_user_id:i.value.customer_user_id,updated_at:Date.now(),updated_user_id:o}};i.value.customer_user_pwd&&(l.customer.customer_user_pwd=i.value.customer_user_pwd),console.log("🚀 API 更新傳遞的資料:",l);const t=await X.A.post(`${z}/Customer/Update`,l);1e3===t.data.Code?(ue.nk.success("Customer updated successfully!"),a("update-success"),u()):ue.nk.error("Update failed: "+t.data.Code)}catch(e){console.error("API error:",e),ue.nk.error("API request failed.")}finally{r.value=!1}}else ue.nk.error("Customer Name is required!")},u=()=>{a("close")};return{dialogVisible:l,formData:i,loading:r,submitEdit:d,closeDialog:u}}};const ge=(0,i.A)(_e,[["render",me],["__scopeId","data-v-0a0a98e8"]]);var ke=ge;const be={class:"dialog-container"},fe={class:"button-container"};function ve(e,a,l,r,o,i){const d=(0,t.g2)("el-button"),u=(0,t.g2)("el-table-column"),n=(0,t.g2)("el-table"),s=(0,t.g2)("CustomerLocationAddDialog"),c=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(c,{title:"Location",modelValue:r.dialogVisible,"onUpdate:modelValue":a[1]||(a[1]=e=>r.dialogVisible=e),width:"80%",onOpen:r.fetchLocations,onClose:r.closeDialog,"lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(d,{onClick:r.closeDialog},{default:(0,t.k6)((()=>a[3]||(a[3]=[(0,t.eW)("Close")]))),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",be,[(0,t.Lk)("div",fe,[(0,t.bF)(d,{type:"primary",size:"small",onClick:r.openAddLocationDialog},{default:(0,t.k6)((()=>a[2]||(a[2]=[(0,t.eW)(" Add Location ")]))),_:1},8,["onClick"])]),(0,t.bF)(n,{data:r.locationList,border:"",stripe:""},{default:(0,t.k6)((()=>[(0,t.bF)(u,{prop:"customer_location",label:"CUSTOMER / Location",width:"200"}),(0,t.bF)(u,{prop:"customer_address",label:"ADDRESS DETAIL",width:"300"}),(0,t.bF)(u,{prop:"Void_Price",label:"Void Price",width:"120"}),(0,t.bF)(u,{prop:"SPLIT",label:"Split",width:"100"}),(0,t.bF)(u,{prop:"TRIAXLE",label:"Triaxle",width:"100"}),(0,t.bF)(u,{prop:"PP_CTF",label:"PP CTF",width:"100"}),(0,t.bF)(u,{prop:"LAYOVER",label:"Layover",width:"100"}),(0,t.bF)(u,{prop:"SCALE_TICKET",label:"Scale Ticket",width:"120"}),(0,t.bF)(u,{prop:"SCALE_TICKET_HAZMAT",label:"Scale Ticket Hazmat",width:"150"})])),_:1},8,["data"])]),r.addLocationDialogVisible?((0,t.uX)(),(0,t.Wv)(s,{key:0,visible:r.addLocationDialogVisible,customerList:e.customerList,onClose:a[0]||(a[0]=e=>r.addLocationDialogVisible=!1),onAddSuccess:r.fetchLocations},null,8,["visible","customerList","onAddSuccess"])):(0,t.Q3)("",!0)])),_:1},8,["modelValue","onOpen","onClose"])}const he={class:"dialog-container"},De={class:"scrollable-content"};function Ce(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-input-number"),s=(0,t.g2)("el-col"),c=(0,t.g2)("el-row"),p=(0,t.g2)("el-form"),m=(0,t.g2)("el-button"),_=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(_,{title:"Add Location",modelValue:r.dialogVisible,"onUpdate:modelValue":a[2]||(a[2]=e=>r.dialogVisible=e),width:"600px",onClose:r.closeDialog,"lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(m,{onClick:r.closeDialog},{default:(0,t.k6)((()=>a[3]||(a[3]=[(0,t.eW)("Cancel")]))),_:1},8,["onClick"]),(0,t.bF)(m,{type:"primary",onClick:r.submitAdd},{default:(0,t.k6)((()=>a[4]||(a[4]=[(0,t.eW)("Save")]))),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",he,[(0,t.bF)(p,{ref:"formRef",model:r.formData,"label-width":"180px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Customer Location",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.customer_location,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.customer_location=e),placeholder:"Enter Location"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Address",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.customer_address,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.customer_address=e),placeholder:"Enter Address"},null,8,["modelValue"])])),_:1}),(0,t.Lk)("div",De,[(0,t.bF)(c,{gutter:20},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.numberFields,((e,a)=>((0,t.uX)(),(0,t.Wv)(s,{span:12,key:a},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:a},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:r.formData[e],"onUpdate:modelValue":a=>r.formData[e]=a,min:0},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])])),_:2},1024)))),128))])),_:1})])])),_:1},8,["model"])])])),_:1},8,["modelValue","onClose"])}var Ve={props:{visible:Boolean,customerList:{type:Array,default:()=>[]}},emits:["close","add-success"],setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||u()}}),r=(0,t.KR)({customer_id:0,customer_location:"",customer_address:"",customer_rate:0,driver_rate:0,FUEL_SURCHARGE:0,HAZ:0,HAZ_BATTERIES:0,INSPECTION:0,DROP_FEE:0,CHASSIS:0,STORAGE:0,CHASSIS_STORAGE:0,REEFER:0,OVERWEIGHT:0,PREPULL:0,BOLT_SEAL:0,EXAM_SITE_EXTRA:0,Void_Price:0,SPLIT:0,TRIAXLE:0,PP_CTF:0,LAYOVER:0,SCALE_TICKET:0,SCALE_TICKET_HAZMAT:0}),o=(0,t.KR)({"Customer Rate":"customer_rate","Driver Rate":"driver_rate","Fuel Surcharge":"FUEL_SURCHARGE",Hazmat:"HAZ","Haz Batteries":"HAZ_BATTERIES",Inspection:"INSPECTION","Drop Fee":"DROP_FEE",Chassis:"CHASSIS",Storage:"STORAGE","Chassis + Storage":"CHASSIS_STORAGE",Reefer:"REEFER",Overweight:"OVERWEIGHT",Prepull:"PREPULL","Bolt Seal":"BOLT_SEAL","Exam Site Extra":"EXAM_SITE_EXTRA","Void Price":"Void_Price",Split:"SPLIT",Triaxle:"TRIAXLE","PP CTF":"PP_CTF",Layover:"LAYOVER","Scale Ticket":"SCALE_TICKET","Scale Ticket Hazmat":"SCALE_TICKET_HAZMAT"}),i=()=>{if(Array.isArray(e.customerList)&&e.customerList.length>0){const a=Math.max(...e.customerList.map((e=>e.customer_id||0)));r.value.customer_id=a+1}else r.value.customer_id=1;console.log("✅ 設定 customer_id:",r.value.customer_id)};(0,t.wB)((()=>e.visible),(e=>{e&&i()}));const d=async()=>{if(r.value.customer_location&&r.value.customer_address)try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",location:{...r.value}};console.log("🚀 送出 API 資料:",l);const t=await X.A.post(`${z}/Customer/LocationAdd`,l);1e3===t.data.Code?(ue.nk.success("Location added successfully!"),a("add-success"),u()):ue.nk.error("Add failed: "+t.data.Code)}catch(e){console.error("❌ API error:",e),ue.nk.error("API request failed.")}else ue.nk.error("Location Name and Address are required!")},u=()=>{a("close")};return{dialogVisible:l,formData:r,numberFields:o,submitAdd:d,closeDialog:u}}};const Fe=(0,i.A)(Ve,[["render",Ce]]);var ye=Fe,Te={props:{visible:Boolean,customerId:Number},emits:["update:visible"],components:{CustomerLocationAddDialog:ye},setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||n()}}),r=(0,t.KR)([]),o=(0,t.KR)(!1),i=async()=>{if(e.customerId){console.log("📡 Fetching locations for customerId:",e.customerId);try{const a=localStorage.getItem("authToken");if(!a)return void alert("Session expired, please log in again.");const l=await X.A.post(`${z}/Customer/Location`,{Token:a,Timestamp:Date.now(),Sign:"string",customer_id:e.customerId});1e3===l.data.Code?r.value=l.data.location_list||[]:(console.error("⚠️ API Error:",l.data),r.value=[])}catch(a){console.error("❌ API Request Failed:",a)}}else console.warn("❌ customerId 未提供，無法請求 API")};(0,t.nT)((()=>{e.visible&&i()}));const d=()=>{o.value=!0},u=()=>{o.value=!1,i()},n=()=>{a("update:visible",!1)};return{dialogVisible:l,locationList:r,fetchLocations:i,addLocationDialogVisible:o,openAddLocationDialog:d,handleAddSuccess:u,closeDialog:n}}};const Ae=(0,i.A)(Te,[["render",ve],["__scopeId","data-v-48265454"]]);var Se=Ae,we={components:{CustomerAddDialog:pe,CustomerEditDialog:ke,CustomerLocationDialog:Se},setup(){const e=(0,t.KR)([]),a=(0,t.KR)(""),l=(0,t.KR)(1),r=(0,t.KR)(!1),o=(0,t.KR)(!1),i=(0,t.KR)(!1),d=(0,t.KR)(null),u=async()=>{try{const a=localStorage.getItem("authToken"),l=await X.A.post(`${z}/Customer/List`,{Token:a,Timestamp:Date.now(),Sign:"string"});1e3===l.data.Code?e.value=l.data.customer_list.map((e=>({customer_id:e.customer_id,customer_name:e.customer_name,customer_user_id:e.customer_user_id,updated_at:e.updated_at,updated_user_id:e.updated_user_id}))):ue.nk.error("Failed to fetch customer data.")}catch(a){console.error("Error fetching customer list:",a),ue.nk.error("API Request Failed.")}},n=(0,t.EW)((()=>a.value?e.value.filter((e=>{const l=e.customer_name?e.customer_name.toLowerCase():"",t=e.customer_user_id?e.customer_user_id.toLowerCase():"",r=a.value.toLowerCase();return l.includes(r)||t.includes(r)})):e.value)),s=(0,t.EW)((()=>n.value.slice(50*(l.value-1),50*l.value))),c=e=>{d.value={...e},r.value=!0},p=e=>{console.log("Opening Location Dialog",e),d.value=e,i.value=!0},m=()=>{o.value=!0},_=()=>{r.value=!1,u()},g=()=>{o.value=!1,u()};return(0,t.sV)((()=>{u()})),{customerList:e,searchQuery:a,currentPage:l,filteredCustomers:n,paginatedCustomers:s,handlePageChange:e=>l.value=e,editDialogVisible:r,addDialogVisible:o,locationDialogVisible:i,selectedCustomer:d,openEditDialog:c,openLocationDialog:p,addCustomer:m,handleUpdateSuccess:_,handleAddSuccess:g}}};const Ee=(0,i.A)(we,[["render",de],["__scopeId","data-v-1ab280af"]]);var Pe=Ee;const Ie={class:"container"},Le={class:"header-container"},Ue={class:"stats-table"},xe={class:"search-container"},Re={class:"button-container"};function Oe(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-button"),s=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-table"),p=(0,t.g2)("ChassisEditDialog"),m=(0,t.g2)("ChassisAddDialog");return(0,t.uX)(),(0,t.CE)("div",Ie,[(0,t.Lk)("div",Le,[a[8]||(a[8]=(0,t.Lk)("h2",null,"Chassis Management",-1)),(0,t.Lk)("div",Ue,[a[7]||(a[7]=(0,t.Lk)("h3",null,"Chassis Statistics",-1)),(0,t.Lk)("table",null,[a[6]||(a[6]=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"Category"),(0,t.Lk)("th",null,"Count")])],-1)),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.trailerCounts,((e,a)=>((0,t.uX)(),(0,t.CE)("tr",{key:a},[(0,t.Lk)("td",null,(0,t.v_)(e.name),1),(0,t.Lk)("td",null,(0,t.v_)(e.count),1)])))),128))])])])]),(0,t.Lk)("div",xe,[(0,t.bF)(d,{modelValue:r.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>r.searchQuery=e),placeholder:"Search Chassis Plate",clearable:""},null,8,["modelValue"])]),(0,t.bF)(u,{background:"",modelValue:r.currentPage,"onUpdate:modelValue":a[1]||(a[1]=e=>r.currentPage=e),"page-size":50,total:r.filteredChassis.length,layout:"prev, pager, next",class:"pagination-container top-pagination",onCurrentChange:r.handlePageChange},null,8,["modelValue","total","onCurrentChange"]),(0,t.Lk)("div",Re,[(0,t.bF)(n,{type:"primary",size:"small",onClick:r.addChassis},{default:(0,t.k6)((()=>a[9]||(a[9]=[(0,t.eW)("Add")]))),_:1},8,["onClick"])]),(0,t.bF)(c,{data:r.paginatedChassis,style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Actions",width:"150"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(n,{type:"primary",size:"small",onClick:a=>r.openEditDialog(e)},{default:(0,t.k6)((()=>a[10]||(a[10]=[(0,t.eW)("Edit")]))),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(s,{label:"Chassis ID",prop:"trailer_id"}),(0,t.bF)(s,{label:"Chassis NO",prop:"trailer_no"}),(0,t.bF)(s,{label:"Chassis State"},{default:(0,t.k6)((({row:e})=>[(0,t.Lk)("span",null,(0,t.v_)(1===e.trailer_state?"Assigned":"Unassigned"),1)])),_:1}),(0,t.bF)(s,{label:"Chassis Plate",prop:"trailer_plate"}),(0,t.bF)(s,{label:"Chassis Reg Expired At",prop:"str_trailer_reg_expired_at"}),(0,t.bF)(s,{label:"Chassis Plate Expired At",prop:"str_trailer_plate_expired_at"}),(0,t.bF)(s,{label:"Chassis Check Expired At",prop:"str_trailer_check_expired_at"}),(0,t.bF)(s,{label:"Chassis Corp",prop:"trailer_corp"}),(0,t.bF)(s,{label:"Chassis Area",prop:"trailer_area"})])),_:1},8,["data"]),(0,t.bF)(u,{background:"",modelValue:r.currentPage,"onUpdate:modelValue":a[2]||(a[2]=e=>r.currentPage=e),"page-size":50,total:r.filteredChassis.length,layout:"prev, pager, next",class:"pagination-container",onCurrentChange:r.handlePageChange},null,8,["modelValue","total","onCurrentChange"]),r.editDialogVisible?((0,t.uX)(),(0,t.Wv)(p,{key:0,visible:r.editDialogVisible,chassisData:r.selectedChassis,onUpdateSuccess:r.handleUpdateSuccess,onClose:a[3]||(a[3]=e=>r.editDialogVisible=!1)},null,8,["visible","chassisData","onUpdateSuccess"])):(0,t.Q3)("",!0),(0,t.bF)(m,{modelValue:r.addDialogVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>r.addDialogVisible=e),onAddSuccess:r.handleAddSuccess,onClose:a[5]||(a[5]=e=>r.addDialogVisible=!1)},null,8,["modelValue","onAddSuccess"])])}function We(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-date-picker"),s=(0,t.g2)("el-option"),c=(0,t.g2)("el-select"),p=(0,t.g2)("el-form"),m=(0,t.g2)("el-button"),_=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(_,{title:"Add Chassis",modelValue:r.dialogVisible,"onUpdate:modelValue":a[7]||(a[7]=e=>r.dialogVisible=e),width:"600px",onClose:r.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(m,{onClick:r.closeDialog},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(m,{type:"primary",onClick:r.submitAdd,loading:r.loading},{default:(0,t.k6)((()=>a[9]||(a[9]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(p,{ref:"formRef",model:r.formData,"label-width":"180px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Chassis NO"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.trailer_no,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.trailer_no=e),placeholder:"Enter Chassis NO"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Plate"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.trailer_plate,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.trailer_plate=e),placeholder:"Enter Chassis Plate"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Reg Expired At"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:r.formData.trailer_reg_expired_at,"onUpdate:modelValue":a[2]||(a[2]=e=>r.formData.trailer_reg_expired_at=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DD",placeholder:"Select Date"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Plate Expired At"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:r.formData.trailer_plate_expired_at,"onUpdate:modelValue":a[3]||(a[3]=e=>r.formData.trailer_plate_expired_at=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DD",placeholder:"Select Date"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Check Expired At"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:r.formData.trailer_check_expired_at,"onUpdate:modelValue":a[4]||(a[4]=e=>r.formData.trailer_check_expired_at=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DD",placeholder:"Select Date"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Corp"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:r.formData.trailer_corp,"onUpdate:modelValue":a[5]||(a[5]=e=>r.formData.trailer_corp=e),placeholder:"Select Chassis Corp"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.chassisCorps,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Area"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.trailer_area,"onUpdate:modelValue":a[6]||(a[6]=e=>r.formData.trailer_area=e),placeholder:"Enter Chassis Area"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var Ne={props:{visible:Boolean},emits:["update:visible","add-success"],setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||n()}}),r=(0,t.KR)(!1),o=()=>({trailer_no:"",trailer_plate:"",trailer_reg_expired_at:"",trailer_plate_expired_at:"",trailer_check_expired_at:"",trailer_corp:"",trailer_area:""}),i=(0,t.KR)(o()),d=(0,t.KR)(["TREND","TRAC","PORT","TOPPOINT","4JOHN"]);(0,t.wB)(l,(e=>{e||(i.value=o())}));const u=async()=>{if(i.value.trailer_no&&i.value.trailer_plate){r.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",new_trailer:{...i.value}};console.log("🚀 API 傳遞的資料:",l);const t=await X.A.post(`${z}/Trailer/Add`,l);1e3===t.data.Code?(ue.nk.success("Chassis added successfully!"),a("add-success"),n()):ue.nk.error("Add failed: "+t.data.Code)}catch(e){console.error("API error:",e),ue.nk.error("API request failed.")}finally{r.value=!1}}else ue.nk.error("Chassis NO 和 Chassis Plate 為必填！")},n=()=>{a("close")};return{dialogVisible:l,formData:i,loading:r,chassisCorps:d,submitAdd:u,closeDialog:n}}};const Ke=(0,i.A)(Ne,[["render",We],["__scopeId","data-v-08ac8a48"]]);var Ye=Ke;function Ge(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-date-picker"),p=(0,t.g2)("el-form"),m=(0,t.g2)("el-button"),_=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(_,{title:"Edit Chassis",modelValue:r.dialogVisible,"onUpdate:modelValue":a[9]||(a[9]=e=>r.dialogVisible=e),width:"600px",onClose:r.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(m,{onClick:r.closeDialog},{default:(0,t.k6)((()=>a[10]||(a[10]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(m,{type:"primary",onClick:r.submitEdit,loading:r.loading},{default:(0,t.k6)((()=>a[11]||(a[11]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(p,{ref:"formRef",model:r.formData,"label-width":"180px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Chassis ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.trailer_id,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.trailer_id=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis NO"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.trailer_no,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.trailer_no=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis State"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.formData.trailer_state,"onUpdate:modelValue":a[2]||(a[2]=e=>r.formData.trailer_state=e),placeholder:"Select State"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"Assigned",value:1}),(0,t.bF)(n,{label:"Unassigned",value:0})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Plate"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.trailer_plate,"onUpdate:modelValue":a[3]||(a[3]=e=>r.formData.trailer_plate=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Reg Expired At"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:r.formData.trailer_reg_expired_at,"onUpdate:modelValue":a[4]||(a[4]=e=>r.formData.trailer_reg_expired_at=e),type:"date",format:"MM-DD-YYYY",placeholder:"Select Date"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Plate Expired At"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:r.formData.trailer_plate_expired_at,"onUpdate:modelValue":a[5]||(a[5]=e=>r.formData.trailer_plate_expired_at=e),type:"date",format:"MM-DD-YYYY",placeholder:"Select Date"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Check Expired At"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:r.formData.trailer_check_expired_at,"onUpdate:modelValue":a[6]||(a[6]=e=>r.formData.trailer_check_expired_at=e),type:"date",format:"MM-DD-YYYY",placeholder:"Select Date"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Corp"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.formData.trailer_corp,"onUpdate:modelValue":a[7]||(a[7]=e=>r.formData.trailer_corp=e),placeholder:"Select Chassis Corp"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.chassisCorps,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Area"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.trailer_area,"onUpdate:modelValue":a[8]||(a[8]=e=>r.formData.trailer_area=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var Me={props:{visible:Boolean,chassisData:Object},emits:["update:visible","update-success"],setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||n()}}),r=(0,t.KR)(!1),o=()=>({trailer_id:"",trailer_no:"",trailer_state:0,trailer_plate:"",trailer_reg_expired_at:"",trailer_plate_expired_at:"",trailer_check_expired_at:"",trailer_corp:"",trailer_area:""}),i=(0,t.KR)(o()),d=(0,t.KR)(["TREND","TRAC","PORT","TOPPOINT","4JOHN"]);(0,t.wB)((()=>e.chassisData),(e=>{e&&(i.value={...e})}),{immediate:!0});const u=async()=>{if(i.value.trailer_no&&i.value.trailer_plate){r.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",trailer:{trailer_id:i.value.trailer_id,trailer_no:i.value.trailer_no,trailer_state:1===i.value.trailer_state?1:0,trailer_plate:i.value.trailer_plate,trailer_reg_expired_at:i.value.trailer_reg_expired_at?new Date(i.value.trailer_reg_expired_at).toISOString():null,trailer_plate_expired_at:i.value.trailer_plate_expired_at?new Date(i.value.trailer_plate_expired_at).toISOString():null,trailer_check_expired_at:i.value.trailer_check_expired_at?new Date(i.value.trailer_check_expired_at).toISOString():null,trailer_corp:i.value.trailer_corp,trailer_area:i.value.trailer_area}};console.log("🚀 API 傳遞的資料:",l);const t=await X.A.post(`${z}/Trailer/Edit`,l);1e3===t.data.Code?(ue.nk.success("Chassis updated successfully!"),a("update-success"),n()):ue.nk.error("Edit failed: "+t.data.Code)}catch(e){console.error("API error:",e),ue.nk.error("API request failed.")}finally{r.value=!1}}else ue.nk.error("Chassis NO 和 Chassis Plate 為必填！")},n=()=>{a("close")};return{dialogVisible:l,formData:i,loading:r,chassisCorps:d,submitEdit:u,closeDialog:n}}};const Xe=(0,i.A)(Me,[["render",Ge],["__scopeId","data-v-ec3e6262"]]);var ze=Xe,$e={components:{ChassisAddDialog:Ye,ChassisEditDialog:ze},setup(){const e=(0,t.KR)([]),a=(0,t.KR)([]),l=(0,t.KR)(""),r=(0,t.KR)(1),o=(0,t.KR)(!1),i=(0,t.KR)(!1),d=(0,t.KR)(null),u=async()=>{try{e.value=[];const l=localStorage.getItem("authToken"),t=await X.A.post(`${z}/Trailer/GroupList`,{Token:l,Timestamp:Date.now(),Sign:"string",trailer_id:""});1e3===t.data.Code?(e.value=t.data.trailer_list?.map((e=>({trailer_id:e.trailer_id,trailer_no:e.trailer_no,trailer_state:e.trailer_state,trailer_plate:e.trailer_plate||"",str_trailer_reg_expired_at:e.str_trailer_reg_expired_at||"",str_trailer_plate_expired_at:e.str_trailer_plate_expired_at||"",str_trailer_check_expired_at:e.str_trailer_check_expired_at||"",trailer_corp:e.trailer_corp||"",trailer_area:e.trailer_area||""})))||[],a.value=t.data.trailer_Counts||[]):ue.nk.error("Failed to fetch chassis data.")}catch(l){console.error("Error fetching chassis list:",l),ue.nk.error("API Request Failed.")}},n=(0,t.EW)((()=>e.value?l.value?e.value.filter((e=>e.trailer_plate?.toLowerCase().includes(l.value.toLowerCase()))):e.value:[])),s=(0,t.EW)((()=>n.value.slice(50*(r.value-1),50*r.value))),c=()=>{console.log("Opening Add Dialog"),o.value=!0},p=e=>{d.value={...e},i.value=!0},m=()=>{i.value=!1,u()},_=()=>{o.value=!1,u()};return(0,t.sV)((()=>{u()})),{chassisList:e,trailerCounts:a,searchQuery:l,currentPage:r,addDialogVisible:o,editDialogVisible:i,selectedChassis:d,addChassis:c,openEditDialog:p,filteredChassis:n,paginatedChassis:s,handlePageChange:e=>r.value=e,handleUpdateSuccess:m,handleAddSuccess:_}}};const Qe=(0,i.A)($e,[["render",Oe],["__scopeId","data-v-0c6164fe"]]);var qe=Qe;const Be={class:"container"},He={class:"search-container"},je={class:"button-container"};function Je(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-button"),s=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-table"),p=(0,t.g2)("TruckEditDialog"),m=(0,t.g2)("TruckAddDialog");return(0,t.uX)(),(0,t.CE)("div",Be,[a[7]||(a[7]=(0,t.Lk)("h2",null,"Truck",-1)),(0,t.Lk)("div",He,[(0,t.bF)(d,{modelValue:r.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>r.searchQuery=e),placeholder:"Search Truck Area or Truck Corp",clearable:""},null,8,["modelValue"])]),(0,t.bF)(u,{background:"",modelValue:r.currentPage,"onUpdate:modelValue":a[1]||(a[1]=e=>r.currentPage=e),"page-size":50,total:r.filteredTrucks.length,layout:"prev, pager, next",class:"pagination-container top-pagination",onCurrentChange:r.handlePageChange},null,8,["modelValue","total","onCurrentChange"]),(0,t.Lk)("div",je,[(0,t.bF)(n,{type:"primary",size:"small",onClick:r.addTruck},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Add")]))),_:1},8,["onClick"])]),(0,t.bF)(c,{data:r.paginatedTrucks,style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Actions",width:"150"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(n,{type:"primary",size:"small",onClick:a=>r.openEditDialog(e)},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("Edit")]))),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(s,{label:"Truck ID",prop:"truck_id"}),(0,t.bF)(s,{label:"Truck Area",prop:"truck_area"}),(0,t.bF)(s,{label:"Truck Corp",prop:"truck_corp"}),(0,t.bF)(s,{label:"Truck Year",prop:"truck_year"}),(0,t.bF)(s,{label:"Truck Make",prop:"truck_make"}),(0,t.bF)(s,{label:"Truck Plate",prop:"truck_plate"}),(0,t.bF)(s,{label:"Vin Number",prop:"vin_number"}),(0,t.bF)(s,{label:"Truck State",prop:"truck_state"}),(0,t.bF)(s,{label:"Truck Ins Expired Time",prop:"str_truck_ins_expired_at_time"}),(0,t.bF)(s,{label:"Truck Reg Expired Time",prop:"str_truck_reg_expired_at_time"}),(0,t.bF)(s,{label:"Truck Master ID",prop:"truck_master_id"}),(0,t.bF)(s,{label:"Truck Group ID",prop:"truck_group_id"})])),_:1},8,["data"]),(0,t.bF)(u,{background:"",modelValue:r.currentPage,"onUpdate:modelValue":a[2]||(a[2]=e=>r.currentPage=e),"page-size":50,total:r.filteredTrucks.length,layout:"prev, pager, next",class:"pagination-container bottom-pagination",onCurrentChange:r.handlePageChange},null,8,["modelValue","total","onCurrentChange"]),r.editDialogVisible?((0,t.uX)(),(0,t.Wv)(p,{key:0,visible:r.editDialogVisible,truckData:r.selectedTruck,onUpdateSuccess:r.handleUpdateSuccess,onClose:a[3]||(a[3]=e=>r.editDialogVisible=!1)},null,8,["visible","truckData","onUpdateSuccess"])):(0,t.Q3)("",!0),r.addDialogVisible?((0,t.uX)(),(0,t.Wv)(m,{key:1,visible:r.addDialogVisible,truckList:r.truckList,nextTruckGroupId:r.nextTruckGroupId,onAddSuccess:r.handleAddSuccess,onClose:a[4]||(a[4]=e=>r.addDialogVisible=!1)},null,8,["visible","truckList","nextTruckGroupId","onAddSuccess"])):(0,t.Q3)("",!0)])}function Ze(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-date-picker"),p=(0,t.g2)("el-form"),m=(0,t.g2)("el-button"),_=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(_,{title:"Add Truck",modelValue:r.dialogVisible,"onUpdate:modelValue":a[11]||(a[11]=e=>r.dialogVisible=e),width:"600px",onClose:r.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(m,{onClick:r.closeDialog},{default:(0,t.k6)((()=>a[12]||(a[12]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(m,{type:"primary",onClick:r.submitAdd,loading:r.loading},{default:(0,t.k6)((()=>a[13]||(a[13]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(p,{ref:"formRef",model:r.formData,"label-width":"200px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Truck Group ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_group_id,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.truck_group_id=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Master ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_master_id,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.truck_master_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Area"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_area,"onUpdate:modelValue":a[2]||(a[2]=e=>r.formData.truck_area=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Corp"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_corp,"onUpdate:modelValue":a[3]||(a[3]=e=>r.formData.truck_corp=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Year"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_year,"onUpdate:modelValue":a[4]||(a[4]=e=>r.formData.truck_year=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Make"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_make,"onUpdate:modelValue":a[5]||(a[5]=e=>r.formData.truck_make=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Plate"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_plate,"onUpdate:modelValue":a[6]||(a[6]=e=>r.formData.truck_plate=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Vin Number"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.vin_number,"onUpdate:modelValue":a[7]||(a[7]=e=>r.formData.vin_number=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck State"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.formData.truck_state,"onUpdate:modelValue":a[8]||(a[8]=e=>r.formData.truck_state=e),placeholder:"Select State"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"ACTIVE",value:1}),(0,t.bF)(n,{label:"INACTIVE",value:0})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Ins Expired Time"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:r.formData.truck_ins_expired_at_time,"onUpdate:modelValue":a[9]||(a[9]=e=>r.formData.truck_ins_expired_at_time=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Reg Expired Time"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:r.formData.truck_reg_expired_at_time,"onUpdate:modelValue":a[10]||(a[10]=e=>r.formData.truck_reg_expired_at_time=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var ea={props:{visible:Boolean,truckList:Array},setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||u()}}),r=(0,t.KR)(!1),o=(0,t.KR)({truck_group_id:"",truck_master_id:"",truck_area:"",truck_corp:"",truck_year:"",truck_make:"",truck_plate:"",vin_number:"",truck_state:1,truck_ins_expired_at_time:"",truck_reg_expired_at_time:""}),i=()=>{if(e.truckList&&e.truckList.length>0){const a=e.truckList.map((e=>Number(e.truck_group_id))).filter((e=>!isNaN(e)&&e>0)),l=a.length>0?Math.max(...a):0;o.value.truck_group_id=String(l+1)}else o.value.truck_group_id=String(1)};(0,t.wB)((()=>e.truckList),i,{immediate:!0}),(0,t.sV)((()=>{i()}));const d=async()=>{if(o.value.truck_group_id&&o.value.truck_area&&o.value.truck_corp){r.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",truck_data:{...o.value,truck_state:1===o.value.truck_state?1:0}};console.log("🚀 API 傳遞的資料:",l);const t=await X.A.post(`${z}/Truck/TruckAdd`,l);1e3===t.data.Code?(ue.nk.success("Truck added successfully!"),a("add-success"),u()):ue.nk.error("Add failed: "+t.data.Code)}catch(e){console.error("API error:",e),ue.nk.error("API request failed.")}finally{r.value=!1}}else ue.nk.error("Truck Group ID、Truck Area、Truck Corp 為必填！")},u=()=>{a("close")};return{dialogVisible:l,formData:o,loading:r,submitAdd:d,closeDialog:u}}};const aa=(0,i.A)(ea,[["render",Ze],["__scopeId","data-v-2e3ab761"]]);var la=aa;function ta(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-date-picker"),p=(0,t.g2)("el-form"),m=(0,t.g2)("el-button"),_=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(_,{title:"Edit Truck",modelValue:r.dialogVisible,"onUpdate:modelValue":a[12]||(a[12]=e=>r.dialogVisible=e),width:"600px",onClose:r.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(m,{onClick:r.closeDialog},{default:(0,t.k6)((()=>a[13]||(a[13]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(m,{type:"primary",onClick:r.submitEdit,loading:r.loading},{default:(0,t.k6)((()=>a[14]||(a[14]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(p,{ref:"formRef",model:r.formData,"label-width":"200px"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_id,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.truck_id=e),type:"hidden"},null,8,["modelValue"]),(0,t.bF)(u,{label:"Truck Group ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_group_id,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.truck_group_id=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Master ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_master_id,"onUpdate:modelValue":a[2]||(a[2]=e=>r.formData.truck_master_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Area"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_area,"onUpdate:modelValue":a[3]||(a[3]=e=>r.formData.truck_area=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Corp"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_corp,"onUpdate:modelValue":a[4]||(a[4]=e=>r.formData.truck_corp=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Year"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_year,"onUpdate:modelValue":a[5]||(a[5]=e=>r.formData.truck_year=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Make"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_make,"onUpdate:modelValue":a[6]||(a[6]=e=>r.formData.truck_make=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Plate"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_plate,"onUpdate:modelValue":a[7]||(a[7]=e=>r.formData.truck_plate=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Vin Number"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.vin_number,"onUpdate:modelValue":a[8]||(a[8]=e=>r.formData.vin_number=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck State"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.formData.truck_state,"onUpdate:modelValue":a[9]||(a[9]=e=>r.formData.truck_state=e),placeholder:"Select State"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"ACTIVE",value:1}),(0,t.bF)(n,{label:"INACTIVE",value:0})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Ins Expired Time"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:r.formData.truck_ins_expired_at_time,"onUpdate:modelValue":a[10]||(a[10]=e=>r.formData.truck_ins_expired_at_time=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Reg Expired Time"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:r.formData.truck_reg_expired_at_time,"onUpdate:modelValue":a[11]||(a[11]=e=>r.formData.truck_reg_expired_at_time=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var ra={props:{visible:Boolean,truckData:Object},setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||d()}}),r=(0,t.KR)(!1),o=(0,t.KR)({truck_id:"",truck_group_id:"",truck_master_id:"",truck_area:"",truck_corp:"",truck_year:"",truck_make:"",truck_plate:"",vin_number:"",truck_state:1,truck_ins_expired_at_time:"",truck_reg_expired_at_time:""});(0,t.wB)((()=>e.truckData),(e=>{e&&(o.value={truck_id:String(e.truck_id||""),truck_group_id:String(e.truck_group_id||""),truck_master_id:e.truck_master_id||"",truck_area:e.truck_area||"",truck_corp:e.truck_corp||"",truck_year:e.truck_year||"",truck_make:e.truck_make||"",truck_plate:e.truck_plate||"",vin_number:e.vin_number||"",truck_state:1===e.truck_state?1:0,truck_ins_expired_at_time:e.truck_ins_expired_at_time?e.truck_ins_expired_at_time.split("+")[0]:"",truck_reg_expired_at_time:e.truck_reg_expired_at_time?e.truck_reg_expired_at_time.split("+")[0]:""})}),{immediate:!0});const i=async()=>{if(o.value.truck_id){r.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",truck_data:{truck_id:String(o.value.truck_id),truck_group_id:String(o.value.truck_group_id),truck_master_id:o.value.truck_master_id,truck_area:o.value.truck_area,truck_corp:o.value.truck_corp,truck_year:o.value.truck_year,truck_make:o.value.truck_make,truck_plate:o.value.truck_plate,vin_number:o.value.vin_number,truck_state:1===o.value.truck_state?1:0,truck_ins_expired_at_time:o.value.truck_ins_expired_at_time,truck_reg_expired_at_time:o.value.truck_reg_expired_at_time}};console.log("🚀 API 更新傳遞的資料:",l);const t=await X.A.post(`${z}/Truck/TruckUpdate`,l);1e3===t.data.Code?(ue.nk.success("Truck updated successfully!"),a("update-success",o.value),d()):ue.nk.error("Update failed: "+t.data.Code)}catch(e){console.error("API error:",e),ue.nk.error("API request failed.")}finally{r.value=!1}}else ue.nk.error("Truck ID 錯誤！")},d=()=>{a("close"),a("update-success")};return{dialogVisible:l,formData:o,loading:r,submitEdit:i,closeDialog:d}}};const oa=(0,i.A)(ra,[["render",ta],["__scopeId","data-v-4860e4f2"]]);var ia=oa,da={components:{TruckAddDialog:la,TruckEditDialog:ia},setup(){const e=(0,t.KR)([]),a=(0,t.KR)(""),l=(0,t.KR)(1),r=(0,t.KR)(!1),o=(0,t.KR)(!1),i=(0,t.KR)(null),d=async()=>{try{const a=localStorage.getItem("authToken"),l=await X.A.post(`${z}/Truck/TruckList`,{Token:a,Timestamp:Date.now(),Sign:"string",group_id:""});1e3===l.data.Code?e.value=l.data.truck_list.map((e=>({truck_id:e.truck_id,truck_area:e.truck_area,truck_corp:e.truck_corp,truck_year:e.truck_year,truck_make:e.truck_make,truck_plate:e.truck_plate,vin_number:e.vin_number,truck_state:e.truck_state,str_truck_ins_expired_at_time:e.str_truck_ins_expired_at_time,str_truck_reg_expired_at_time:e.str_truck_reg_expired_at_time,truck_master_id:e.truck_master_id||"N/A",truck_group_id:e.truck_group_id||0}))):ue.nk.error("Failed to fetch truck data.")}catch(a){console.error("Error fetching truck list:",a),ue.nk.error("API Request Failed.")}},u=(0,t.EW)((()=>{if(!e.value||0===e.value.length)return 1;const a=e.value.map((e=>Number(e.truck_group_id))).filter((e=>!isNaN(e)&&e>0));return a.length>0?Math.max(...a)+1:1})),n=(0,t.EW)((()=>a.value?e.value.filter((e=>{const l=e.truck_area?e.truck_area.toLowerCase():"",t=e.truck_corp?e.truck_corp.toLowerCase():"",r=a.value.toLowerCase();return l.includes(r)||t.includes(r)})):e.value)),s=(0,t.EW)((()=>n.value.slice(50*(l.value-1),50*l.value))),c=e=>{i.value={...e},r.value=!0},p=()=>{o.value=!0},m=()=>{r.value=!1,d()},_=()=>{o.value=!1,d()};return(0,t.sV)((()=>{d()})),{truckList:e,searchQuery:a,currentPage:l,filteredTrucks:n,paginatedTrucks:s,nextTruckGroupId:u,handlePageChange:e=>l.value=e,editDialogVisible:r,addDialogVisible:o,selectedTruck:i,openEditDialog:c,addTruck:p,handleUpdateSuccess:m,handleAddSuccess:_}}};const ua=(0,i.A)(da,[["render",Je],["__scopeId","data-v-763c0454"]]);var na=ua;const sa={class:"container"},ca={class:"search-container"},pa={class:"button-container"};function ma(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-button"),s=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-table"),p=(0,t.g2)("DriverFleetEditDialog"),m=(0,t.g2)("DriverFleetAddDialog");return(0,t.uX)(),(0,t.CE)("div",sa,[a[7]||(a[7]=(0,t.Lk)("h2",null,"Truck Groups",-1)),(0,t.Lk)("div",ca,[(0,t.bF)(d,{modelValue:r.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>r.searchQuery=e),placeholder:"Search Truck Group Name",clearable:""},null,8,["modelValue"])]),(0,t.bF)(u,{background:"",modelValue:r.currentPage,"onUpdate:modelValue":a[1]||(a[1]=e=>r.currentPage=e),"page-size":50,total:r.filteredGroups.length,layout:"prev, pager, next",class:"pagination-container top-pagination",onCurrentChange:r.handlePageChange},null,8,["modelValue","total","onCurrentChange"]),(0,t.Lk)("div",pa,[(0,t.bF)(n,{type:"primary",size:"small",onClick:r.addTruckGroup},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Add")]))),_:1},8,["onClick"])]),(0,t.bF)(c,{data:r.paginatedGroups,style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Actions",width:"150"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(n,{type:"primary",size:"small",onClick:a=>r.openEditDialog(e)},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("Edit")]))),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(s,{label:"Truck Group Name",prop:"truck_group_name"}),(0,t.bF)(s,{label:"Truck Group Master ID",prop:"truck_group_master_id"}),(0,t.bF)(s,{label:"User Name",prop:"user_name"}),(0,t.bF)(s,{label:"Truck Group State"},{default:(0,t.k6)((({row:e})=>[(0,t.Lk)("span",null,(0,t.v_)(r.getTruckGroupState(e.truck_group_state)),1)])),_:1})])),_:1},8,["data"]),(0,t.bF)(u,{background:"",modelValue:r.currentPage,"onUpdate:modelValue":a[2]||(a[2]=e=>r.currentPage=e),"page-size":50,total:r.filteredGroups.length,layout:"prev, pager, next",class:"pagination-container bottom-pagination",onCurrentChange:r.handlePageChange},null,8,["modelValue","total","onCurrentChange"]),r.editDialogVisible?((0,t.uX)(),(0,t.Wv)(p,{key:0,visible:r.editDialogVisible,truckGroupData:r.selectedTruckGroup,onUpdateSuccess:r.handleUpdateSuccess,onClose:a[3]||(a[3]=e=>r.editDialogVisible=!1)},null,8,["visible","truckGroupData","onUpdateSuccess"])):(0,t.Q3)("",!0),r.addDialogVisible?((0,t.uX)(),(0,t.Wv)(m,{key:1,visible:r.addDialogVisible,onAddSuccess:r.handleAddSuccess,onClose:a[4]||(a[4]=e=>r.addDialogVisible=!1)},null,8,["visible","onAddSuccess"])):(0,t.Q3)("",!0)])}function _a(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-form"),p=(0,t.g2)("el-button"),m=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(m,{title:"Edit Truck Group",modelValue:r.dialogVisible,"onUpdate:modelValue":a[6]||(a[6]=e=>r.dialogVisible=e),width:"600px",onClose:r.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(p,{onClick:r.closeDialog},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(p,{type:"primary",onClick:r.submitEdit,loading:r.loading},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(c,{ref:"formRef",model:r.formData,"label-width":"200px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"* Truck Group Name",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_group_name,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.truck_group_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Group Master ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_group_master_id,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.truck_group_master_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Update User ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.updated_user_id,"onUpdate:modelValue":a[2]||(a[2]=e=>r.formData.updated_user_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"User Name"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.user_name,"onUpdate:modelValue":a[3]||(a[3]=e=>r.formData.user_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Group Master PWD"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_group_master_pwd,"onUpdate:modelValue":a[4]||(a[4]=e=>r.formData.truck_group_master_pwd=e),type:"password",autocomplete:"new-password","show-password":""},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Group State"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.formData.truck_group_state,"onUpdate:modelValue":a[5]||(a[5]=e=>r.formData.truck_group_state=e),placeholder:"Select State"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"DRIVING",value:1}),(0,t.bF)(n,{label:"SOLD / NOT DRIVING FOR TOPPOINT",value:2})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var ga={props:{visible:Boolean,truckGroupData:Object},setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||d()}}),r=(0,t.KR)(!1),o=(0,t.KR)({truck_group_id:null,truck_group_name:"",truck_group_master_id:"",truck_group_state:1,updated_user_id:"",truck_group_master_pwd:"",user_name:""});(0,t.wB)((()=>e.truckGroupData),(e=>{e&&(o.value={...e,truck_group_master_id:"N/A"===e.truck_group_master_id?"":e.truck_group_master_id,user_name:"N/A"===e.user_name?"":e.user_name,updated_user_id:"",truck_group_master_pwd:""})}),{immediate:!0});const i=async()=>{if(o.value.truck_group_name){r.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",group:{...o.value}};console.log("🚀 API 傳遞的資料:",l);const t=await X.A.post(`${z}/Truck/GroupUpdate`,l);1e3===t.data.Code?(ue.nk.success("Truck Group updated successfully!"),a("update-success",{...o.value}),o.value.updated_user_id="",o.value.truck_group_master_pwd="",d()):ue.nk.error("Update failed: "+t.data.Code)}catch(e){console.error("API error:",e),ue.nk.error("API request failed.")}finally{r.value=!1}}else ue.nk.error("Truck Group Name 為必填！")},d=()=>{a("close")};return{dialogVisible:l,formData:o,loading:r,submitEdit:i,closeDialog:d}}};const ka=(0,i.A)(ga,[["render",_a],["__scopeId","data-v-89403bb2"]]);var ba=ka;function fa(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-form"),s=(0,t.g2)("el-button"),c=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(c,{title:"Add Truck Group",modelValue:r.dialogVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>r.dialogVisible=e),width:"600px",onClose:r.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(s,{onClick:r.closeDialog},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(s,{type:"primary",onClick:r.submitAdd,loading:r.loading},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(n,{ref:"formRef",model:r.formData,"label-width":"200px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"* Truck Group Name",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_group_name,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.truck_group_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"* Truck Group Master ID",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_group_master_id,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.truck_group_master_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"* Truck Group Master PWD",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.truck_group_master_pwd,"onUpdate:modelValue":a[2]||(a[2]=e=>r.formData.truck_group_master_pwd=e),type:"password",autocomplete:"new-password","show-password":""},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"* User Name",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.user_name,"onUpdate:modelValue":a[3]||(a[3]=e=>r.formData.user_name=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var va={props:{visible:Boolean},setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||u()}}),r=(0,t.KR)(!1),o=(0,t.KR)({truck_group_name:"",truck_group_master_id:"",truck_group_master_pwd:"",user_name:""}),i=async()=>{if(o.value.truck_group_name&&o.value.truck_group_master_id&&o.value.truck_group_master_pwd&&o.value.user_name){r.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",group_data:{...o.value}};console.log("🚀 API 傳遞的資料:",l);const t=await X.A.post(`${z}/Truck/GroupAdd`,l);1e3===t.data.Code?(ue.nk.success("Truck Group added successfully!"),a("add-success",{...o.value}),d(),u()):ue.nk.error("Add failed: "+t.data.Code)}catch(e){console.error("API error:",e),ue.nk.error("API request failed.")}finally{r.value=!1}}else ue.nk.error("請填寫所有必填欄位！")},d=()=>{o.value={truck_group_name:"",truck_group_master_id:"",truck_group_master_pwd:"",user_name:""}},u=()=>{d(),a("close")};return{dialogVisible:l,formData:o,loading:r,submitAdd:i,closeDialog:u}}};const ha=(0,i.A)(va,[["render",fa],["__scopeId","data-v-15442b39"]]);var Da=ha,Ca={components:{DriverFleetEditDialog:ba,DriverFleetAddDialog:Da},setup(){const e=(0,t.KR)([]),a=(0,t.KR)(""),l=(0,t.KR)(1),r=(0,t.KR)(!1),o=(0,t.KR)(!1),i=(0,t.KR)(null),d=async()=>{try{const a=localStorage.getItem("authToken"),l=await X.A.post(`${z}/Truck/GroupList`,{Token:a,Timestamp:Date.now(),Sign:"string",group_id:""});1e3===l.data.Code?e.value=l.data.group_list.map((e=>({truck_group_id:e.truck_group_id,truck_group_name:e.truck_group_name,truck_group_master_id:e.truck_group_master_id||"N/A",user_name:e.user_name||"N/A",truck_group_state:e.truck_group_state}))):ue.nk.error("Failed to fetch truck group data.")}catch(a){console.error("Error fetching truck group list:",a),ue.nk.error("API Request Failed.")}},u=e=>1===e?"DRIVING":2===e?"SOLD / NOT DRIVING FOR TOPPOINT":"UNKNOWN",n=(0,t.EW)((()=>a.value?e.value.filter((e=>{const l=e.truck_group_name?e.truck_group_name.toLowerCase():"",t=a.value.toLowerCase();return l.includes(t)})):e.value)),s=(0,t.EW)((()=>n.value.slice(50*(l.value-1),50*l.value))),c=e=>{i.value={...e},r.value=!0},p=()=>{o.value=!0},m=a=>{const l=e.value.findIndex((e=>e.truck_group_id===a.truck_group_id));-1!==l&&(e.value[l]=a),r.value=!1},_=()=>{o.value=!1,d()};return(0,t.sV)((()=>{d()})),{truckGroupList:e,searchQuery:a,currentPage:l,filteredGroups:n,paginatedGroups:s,handlePageChange:e=>l.value=e,editDialogVisible:r,addDialogVisible:o,selectedTruckGroup:i,openEditDialog:c,addTruckGroup:p,handleUpdateSuccess:m,handleAddSuccess:_,getTruckGroupState:u}}};const Va=(0,i.A)(Ca,[["render",ma],["__scopeId","data-v-63a23f92"]]);var Fa=Va;const ya={class:"container"},Ta={class:"search-container"},Aa={class:"button-container"};function Sa(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-button"),s=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-table"),p=(0,t.g2)("PortEditDialog"),m=(0,t.g2)("PortAddDialog");return(0,t.uX)(),(0,t.CE)("div",ya,[a[8]||(a[8]=(0,t.Lk)("h2",null,"Port",-1)),(0,t.Lk)("div",Ta,[(0,t.bF)(d,{modelValue:r.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>r.searchQuery=e),placeholder:"Search by Port Name or Address",clearable:""},null,8,["modelValue"])]),(0,t.bF)(u,{background:"",modelValue:r.currentPage,"onUpdate:modelValue":a[1]||(a[1]=e=>r.currentPage=e),"page-size":50,total:r.filteredPorts.length,layout:"prev, pager, next",class:"pagination-container top-pagination",onCurrentChange:r.handlePageChange},null,8,["modelValue","total","onCurrentChange"]),(0,t.Lk)("div",Aa,[(0,t.bF)(n,{type:"primary",size:"small",onClick:r.addPort},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Add")]))),_:1},8,["onClick"])]),(0,t.bF)(c,{data:r.paginatedPorts,style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Actions",width:"150"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(n,{type:"primary",size:"small",onClick:a=>r.openEditDialog(e)},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("Edit")]))),_:2},1032,["onClick"]),(0,t.bF)(n,{type:"danger",size:"small",onClick:a=>r.deletePort(e.pier_id)},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("Delete")]))),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(s,{label:"Port Name",prop:"pier_name"}),(0,t.bF)(s,{label:"Port Address",prop:"pier_address"}),(0,t.bF)(s,{label:"Customer Pickup Fee",prop:"customer_container_pickup_fee"}),(0,t.bF)(s,{label:"Driver Pickup Fee",prop:"driver_container_pickup_fee"}),(0,t.bF)(s,{label:"Customer Dropoff Fee",prop:"customer_container_dropoff_fee"}),(0,t.bF)(s,{label:"Driver Dropoff Fee",prop:"driver_container_dropoff_fee"})])),_:1},8,["data"]),(0,t.bF)(u,{background:"",modelValue:r.currentPage,"onUpdate:modelValue":a[2]||(a[2]=e=>r.currentPage=e),"page-size":50,total:r.filteredPorts.length,layout:"prev, pager, next",class:"pagination-container bottom-pagination",onCurrentChange:r.handlePageChange},null,8,["modelValue","total","onCurrentChange"]),r.editDialogVisible?((0,t.uX)(),(0,t.Wv)(p,{key:0,visible:r.editDialogVisible,portData:r.selectedPort,onUpdateSuccess:r.handleUpdateSuccess,onClose:a[3]||(a[3]=e=>r.editDialogVisible=!1)},null,8,["visible","portData","onUpdateSuccess"])):(0,t.Q3)("",!0),r.addDialogVisible?((0,t.uX)(),(0,t.Wv)(m,{key:1,visible:r.addDialogVisible,onAddSuccess:r.handleAddSuccess,onClose:a[4]||(a[4]=e=>r.addDialogVisible=!1)},null,8,["visible","onAddSuccess"])):(0,t.Q3)("",!0)])}function wa(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-input-number"),s=(0,t.g2)("el-form"),c=(0,t.g2)("el-button"),p=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(p,{title:"Edit Port",modelValue:r.dialogVisible,"onUpdate:modelValue":a[6]||(a[6]=e=>r.dialogVisible=e),width:"600px",onClose:r.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(c,{onClick:r.closeDialog},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(c,{type:"primary",onClick:r.submitEdit,loading:r.loading},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(s,{ref:"formRef",model:r.formData,"label-width":"220px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"* Port Name",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.pier_name,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.pier_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"* Port Address",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.pier_address,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.pier_address=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Customer Container Pickup Fee"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:r.formData.customer_container_pickup_fee,"onUpdate:modelValue":a[2]||(a[2]=e=>r.formData.customer_container_pickup_fee=e),min:0},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver Container Pickup Fee"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:r.formData.driver_container_pickup_fee,"onUpdate:modelValue":a[3]||(a[3]=e=>r.formData.driver_container_pickup_fee=e),min:0},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Customer Container Dropoff Fee"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:r.formData.customer_container_dropoff_fee,"onUpdate:modelValue":a[4]||(a[4]=e=>r.formData.customer_container_dropoff_fee=e),min:0},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver Container Dropoff Fee"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:r.formData.driver_container_dropoff_fee,"onUpdate:modelValue":a[5]||(a[5]=e=>r.formData.driver_container_dropoff_fee=e),min:0},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var Ea={props:{visible:Boolean,portData:Object},setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||d()}}),r=(0,t.KR)(!1),o=(0,t.KR)({pier_id:null,pier_name:"",pier_address:"",customer_container_pickup_fee:0,driver_container_pickup_fee:0,customer_container_dropoff_fee:0,driver_container_dropoff_fee:0});(0,t.wB)((()=>e.portData),(e=>{e&&(o.value={...e})}),{immediate:!0});const i=async()=>{if(o.value.pier_name&&o.value.pier_address){r.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",pier_data:{...o.value}};console.log("🚀 API 傳遞的資料:",l);const t=await X.A.post(`${z}/Customer/PierUpdate`,l);1e3===t.data.Code?(ue.nk.success("Port updated successfully!"),a("update-success",{...o.value}),d()):ue.nk.error("Update failed: "+t.data.Code)}catch(e){console.error("API error:",e),ue.nk.error("API request failed.")}finally{r.value=!1}}else ue.nk.error("Port Name 和 Port Address 為必填！")},d=()=>{a("close")};return{dialogVisible:l,formData:o,loading:r,submitEdit:i,closeDialog:d}}};const Pa=(0,i.A)(Ea,[["render",wa],["__scopeId","data-v-311e35db"]]);var Ia=Pa;function La(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-input-number"),s=(0,t.g2)("el-form"),c=(0,t.g2)("el-button"),p=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(p,{title:"Add Port",modelValue:r.dialogVisible,"onUpdate:modelValue":a[6]||(a[6]=e=>r.dialogVisible=e),width:"600px",onClose:r.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(c,{onClick:r.closeDialog},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(c,{type:"primary",onClick:r.submitAdd,loading:r.loading},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(s,{ref:"formRef",model:r.formData,"label-width":"220px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Port Name",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.pier_name,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.pier_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Port Address",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.pier_address,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.pier_address=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Customer Container Pickup Fee"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:r.formData.customer_container_pickup_fee,"onUpdate:modelValue":a[2]||(a[2]=e=>r.formData.customer_container_pickup_fee=e),min:0},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver Container Pickup Fee"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:r.formData.driver_container_pickup_fee,"onUpdate:modelValue":a[3]||(a[3]=e=>r.formData.driver_container_pickup_fee=e),min:0},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Customer Container Dropoff Fee"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:r.formData.customer_container_dropoff_fee,"onUpdate:modelValue":a[4]||(a[4]=e=>r.formData.customer_container_dropoff_fee=e),min:0},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver Container Dropoff Fee"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:r.formData.driver_container_dropoff_fee,"onUpdate:modelValue":a[5]||(a[5]=e=>r.formData.driver_container_dropoff_fee=e),min:0},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var Ua={props:{visible:Boolean},setup(e,{emit:a}){const l=(0,t.KR)(e.visible),r=(0,t.KR)(!1),o=(0,t.KR)({pier_name:"",pier_address:"",customer_container_pickup_fee:0,driver_container_pickup_fee:0,customer_container_dropoff_fee:0,driver_container_dropoff_fee:0});(0,t.wB)((()=>e.visible),(e=>{l.value=e,e&&i()}));const i=()=>{o.value={pier_name:"",pier_address:"",customer_container_pickup_fee:0,driver_container_pickup_fee:0,customer_container_dropoff_fee:0,driver_container_dropoff_fee:0}},d=async()=>{if(o.value.pier_name&&o.value.pier_address){r.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",pier_data:{...o.value}};console.log("🚀 API 傳遞的資料:",l);const t=await X.A.post(`${z}/Customer/PierAdd`,l);1e3===t.data.Code?(ue.nk.success("Port added successfully!"),a("add-success"),u()):ue.nk.error("Add failed: "+t.data.Code)}catch(e){console.error("API error:",e),ue.nk.error("API request failed.")}finally{r.value=!1}}else ue.nk.error("Port Name 和 Port Address 為必填！")},u=()=>{l.value=!1,a("close")};return{dialogVisible:l,formData:o,loading:r,submitAdd:d,closeDialog:u}}};const xa=(0,i.A)(Ua,[["render",La],["__scopeId","data-v-2c2154d4"]]);var Ra=xa,Oa={components:{PortEditDialog:Ia,PortAddDialog:Ra},setup(){const e=(0,t.KR)([]),a=(0,t.KR)(""),l=(0,t.KR)(1),r=(0,t.KR)(!1),o=(0,t.KR)(!1),i=(0,t.KR)(null),d=async()=>{try{const a=localStorage.getItem("authToken"),l=await X.A.post(`${z}/Customer/Pier`,{Token:a,Timestamp:Date.now(),Sign:"string",pier_id:0});1e3===l.data.Code?e.value=l.data.pier_list:ue.nk.error("Failed to fetch port data.")}catch(a){console.error("Error fetching port list:",a),ue.nk.error("API Request Failed.")}},u=(0,t.EW)((()=>a.value?e.value.filter((e=>{const l=e.pier_name?e.pier_name.toLowerCase():"",t=e.pier_address?e.pier_address.toLowerCase():"",r=a.value.toLowerCase();return l.includes(r)||t.includes(r)})):e.value)),n=(0,t.EW)((()=>u.value.slice(50*(l.value-1),50*l.value))),s=e=>{i.value={...e},r.value=!0},c=()=>{o.value=!0},p=async a=>{try{const l=localStorage.getItem("authToken"),t=await X.A.post(`${z}/Customer/PierDelete`,{Token:l,Timestamp:Date.now(),Sign:"string",pier_id:a});1e3===t.data.Code?(ue.nk.success("Port deleted successfully!"),e.value=e.value.filter((e=>e.pier_id!==a))):ue.nk.error("Delete failed: "+t.data.Code)}catch(l){console.error("API error:",l),ue.nk.error("API request failed.")}},m=a=>{const l=e.value.findIndex((e=>e.pier_id===a.pier_id));-1!==l&&(e.value[l]=a),r.value=!1},_=()=>{o.value=!1,d()};return(0,t.sV)(d),{portList:e,searchQuery:a,currentPage:l,filteredPorts:u,paginatedPorts:n,handlePageChange:e=>l.value=e,editDialogVisible:r,addDialogVisible:o,selectedPort:i,openEditDialog:s,deletePort:p,addPort:c,handleUpdateSuccess:m,handleAddSuccess:_}}};const Wa=(0,i.A)(Oa,[["render",Sa],["__scopeId","data-v-3205222a"]]);var Na=Wa;const Ka={class:"container"},Ya={class:"search-container"},Ga={class:"button-container"};function Ma(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-button"),s=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-tag"),p=(0,t.g2)("el-table"),m=(0,t.g2)("TruckDriverEditDialog"),_=(0,t.g2)("TruckDriverAddDialog");return(0,t.uX)(),(0,t.CE)("div",Ka,[a[7]||(a[7]=(0,t.Lk)("h2",null,"Truck Driver List",-1)),(0,t.Lk)("div",Ya,[(0,t.bF)(d,{modelValue:r.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>r.searchQuery=e),placeholder:"Search by Driver ID, Truck Group Name, or Driver Name",clearable:""},null,8,["modelValue"])]),(0,t.bF)(u,{background:"",currentPage:r.currentPage,"onUpdate:currentPage":a[1]||(a[1]=e=>r.currentPage=e),"page-size":50,total:r.filteredDrivers.length,layout:"prev, pager, next",class:"pagination-container top-pagination",onCurrentChange:r.handlePageChange},null,8,["currentPage","total","onCurrentChange"]),(0,t.Lk)("div",Ga,[(0,t.bF)(n,{type:"primary",size:"small",onClick:r.addDriver},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Add")]))),_:1},8,["onClick"])]),(0,t.bF)(p,{data:r.paginatedDrivers,style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Actions",width:"100"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(n,{type:"primary",size:"small",onClick:a=>r.openEditDialog(e)},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("Edit")]))),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(s,{label:"Driver User ID",prop:"driver_user_id"}),(0,t.bF)(s,{label:"Truck Group Name",prop:"truck_group_name"}),(0,t.bF)(s,{label:"Driver Name",prop:"driver_name"}),(0,t.bF)(s,{label:"Online Status"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(c,{type:"1"===e.online_status?"success":"info"},{default:(0,t.k6)((()=>[(0,t.eW)((0,t.v_)("1"===e.online_status?"Online":"Offline"),1)])),_:2},1032,["type"])])),_:1}),(0,t.bF)(s,{label:"Reportime",prop:"reportime",sortable:""}),(0,t.bF)(s,{label:"Trailer IDs",prop:"trailer_ids"}),(0,t.bF)(s,{label:"Driver License",prop:"driver_license",sortable:""}),(0,t.bF)(s,{label:"License Expiration Date",sortable:""},{default:(0,t.k6)((({row:e})=>[(0,t.eW)((0,t.v_)(r.formatLicenseDate(e.license_expiration_date)),1)])),_:1})])),_:1},8,["data"]),(0,t.bF)(u,{background:"",currentPage:r.currentPage,"onUpdate:currentPage":a[2]||(a[2]=e=>r.currentPage=e),"page-size":50,total:r.filteredDrivers.length,layout:"prev, pager, next",class:"pagination-container bottom-pagination",onCurrentChange:r.handlePageChange},null,8,["currentPage","total","onCurrentChange"]),(0,t.bF)(m,{visible:r.editDialogVisible,driverData:r.selectedDriver,truckGroups:r.truckGroups,onUpdateSuccess:r.handleUpdateSuccess,onClose:a[3]||(a[3]=e=>r.editDialogVisible=!1)},null,8,["visible","driverData","truckGroups","onUpdateSuccess"]),(0,t.bF)(_,{visible:r.addDialogVisible,truckGroups:r.truckGroups,onAddSuccess:r.handleAddSuccess,onClose:a[4]||(a[4]=e=>r.addDialogVisible=!1)},null,8,["visible","truckGroups","onAddSuccess"])])}l(116),l(7588);function Xa(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-date-picker"),p=(0,t.g2)("el-form"),m=(0,t.g2)("el-button"),_=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(_,{title:"Edit Truck Driver",modelValue:r.dialogVisible,"onUpdate:modelValue":a[6]||(a[6]=e=>r.dialogVisible=e),width:"600px",onClose:r.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(m,{onClick:r.closeDialog},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(m,{type:"primary",onClick:r.submitEdit},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("Save")]))),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[(0,t.bF)(p,{ref:"formRef",model:r.formData,"label-width":"150px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Driver User ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.driver_user_id,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.driver_user_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver Name"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.driver_name,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.driver_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver PWD"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.driver_pwd,"onUpdate:modelValue":a[2]||(a[2]=e=>r.formData.driver_pwd=e),type:"password","show-password":""},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Group Name"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.formData.truck_group_id,"onUpdate:modelValue":a[3]||(a[3]=e=>r.formData.truck_group_id=e),placeholder:"Select Truck Group"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(l.truckGroups,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver License"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.driver_license,"onUpdate:modelValue":a[4]||(a[4]=e=>r.formData.driver_license=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"License Expiration Date"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:r.datePickerValue,"onUpdate:modelValue":a[5]||(a[5]=e=>r.datePickerValue=e),type:"date",format:"MM/DD/YYYY",placeholder:"Select Date",onChange:r.updateLicenseDate},null,8,["modelValue","onChange"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var za={props:{visible:Boolean,driverData:Object,truckGroups:Array},setup(e,{emit:a}){const l=(0,t.KR)(e.visible),r=(0,t.KR)({}),o=(0,t.KR)(null);(0,t.wB)((()=>e.visible),(a=>{l.value=a,a&&i(e.driverData)})),(0,t.wB)((()=>e.driverData),(e=>{i(e)}));const i=e=>{if(r.value={...e,_driver_user_id:e.driver_user_id,truck_id:e.truck_id||""},e.license_expiration_date){let a=V()(e.license_expiration_date);o.value=a.isValid()?a.toDate():null}else o.value=null},d=e=>{e&&(r.value.license_expiration_date=V()(e).format("YYYY-MM-DD")+"T00:00:00.000Z")},u=async()=>{try{const l=localStorage.getItem("authToken");r.value.driver_user_id!==e.driverData.driver_user_id&&(r.value._driver_user_id=e.driverData.driver_user_id),r.value.license_expiration_date&&!r.value.license_expiration_date.includes("T")&&(r.value.license_expiration_date=V()(r.value.license_expiration_date).format("YYYY-MM-DD")+"T00:00:00.000Z");const t={Token:l,Timestamp:Date.now(),Sign:"string",driver_data:{driver_user_id:r.value.driver_user_id,driver_name:r.value.driver_name,_driver_user_id:r.value._driver_user_id,driver_pwd:r.value.driver_pwd?r.value.driver_pwd:"",truck_group_id:r.value.truck_group_id,truck_id:r.value.truck_id,driver_license:r.value.driver_license,license_expiration_date:r.value.license_expiration_date}};console.log("🚀 API 傳遞的資料:",t);const o=await X.A.post(`${z}/Truck/TruckDriverUpdate`,t);1e3===o.data.Code?(ue.nk.success("Driver updated successfully!"),a("update-success",{...r.value}),n()):ue.nk.error("Update failed: "+o.data.Code)}catch(l){console.error("API error:",l),ue.nk.error("API request failed.")}},n=()=>{l.value=!1,a("close")};return{dialogVisible:l,formData:r,datePickerValue:o,updateLicenseDate:d,submitEdit:u,closeDialog:n}}};const $a=(0,i.A)(za,[["render",Xa],["__scopeId","data-v-11918b88"]]);var Qa=$a;function qa(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-date-picker"),p=(0,t.g2)("el-form"),m=(0,t.g2)("el-button"),_=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(_,{title:"Add Truck Driver",modelValue:r.dialogVisible,"onUpdate:modelValue":a[6]||(a[6]=e=>r.dialogVisible=e),width:"600px",onClose:r.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(m,{onClick:r.closeDialog},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(m,{type:"primary",onClick:r.submitAdd},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("Save")]))),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[(0,t.bF)(p,{ref:"formRef",model:r.formData,"label-width":"150px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"* Driver User ID",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.driver_user_id,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.driver_user_id=e),placeholder:"Enter Driver User ID"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"* Driver Name",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.driver_name,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.driver_name=e),placeholder:"Enter Driver Name"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver PWD"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.driver_pwd,"onUpdate:modelValue":a[2]||(a[2]=e=>r.formData.driver_pwd=e),type:"password","show-password":"",placeholder:"Enter Password"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Group Name"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.formData.truck_group_id,"onUpdate:modelValue":a[3]||(a[3]=e=>r.formData.truck_group_id=e),placeholder:"Select Truck Group"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(l.truckGroups,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver License"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.driver_license,"onUpdate:modelValue":a[4]||(a[4]=e=>r.formData.driver_license=e),placeholder:"Enter Driver License"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"License Expiration Date"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:r.datePickerValue,"onUpdate:modelValue":a[5]||(a[5]=e=>r.datePickerValue=e),type:"date",format:"MM/DD/YYYY",placeholder:"Select Date",onChange:r.updateLicenseDate},null,8,["modelValue","onChange"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var Ba={props:{visible:Boolean,truckGroups:Array},setup(e,{emit:a}){const l=(0,t.KR)(e.visible),r=(0,t.KR)({}),o=(0,t.KR)(null);(0,t.wB)((()=>e.visible),(e=>{l.value=e,e&&i()}));const i=()=>{r.value={driver_user_id:"",driver_name:"",driver_pwd:"",truck_group_id:null,truck_id:"",driver_license:"",license_expiration_date:null},o.value=null},d=e=>{e&&(r.value.license_expiration_date=V()(e).startOf("day").toISOString())},u=async()=>{try{if(!r.value.driver_user_id||!r.value.driver_name)return void ue.nk.error("Driver User ID 和 Driver Name 為必填！");const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",driver_data:{driver_user_id:r.value.driver_user_id,driver_name:r.value.driver_name,_driver_user_id:r.value.driver_user_id,driver_pwd:r.value.driver_pwd||"",truck_group_id:r.value.truck_group_id,truck_id:r.value.truck_id,driver_license:r.value.driver_license,license_expiration_date:r.value.license_expiration_date}},t=await X.A.post(`${z}/Truck/TruckDriverAdd`,l);1e3===t.data.Code?(ue.nk.success("Driver added successfully!"),a("add-success"),n()):ue.nk.error("Add failed: "+t.data.Code)}catch(e){ue.nk.error("API request failed.")}},n=()=>{l.value=!1,a("close")};return{dialogVisible:l,formData:r,datePickerValue:o,updateLicenseDate:d,submitAdd:u,closeDialog:n}}};const Ha=(0,i.A)(Ba,[["render",qa],["__scopeId","data-v-05a9e9e1"]]);var ja=Ha,Ja={components:{TruckDriverEditDialog:Qa,TruckDriverAddDialog:ja},setup(){const e=(0,t.KR)([]),a=(0,t.KR)([]),l=(0,t.KR)(""),r=(0,t.KR)(1),o=(0,t.KR)(!1),i=(0,t.KR)(!1),d=(0,t.KR)(null),u=async()=>{try{const a=localStorage.getItem("authToken"),l=await X.A.post(`${z}/Truck/TruckDriverList`,{Token:a,Timestamp:Date.now(),Sign:"string",Truck_id:""});1e3===l.data.Code?(e.value=l.data.driver_list.map((e=>({driver_user_id:e.driver_user_id,truck_id:e.truck_id||"N/A",truck_group_id:e.truck_group_id,driver_name:e.driver_name,online_status:e.online_status,reportime:e.reportime||0,trailer_ids:e.trailer_ids||"N/A",driver_license:e.driver_license,license_expiration_date:e.license_expiration_date?V()(e.license_expiration_date).toISOString():""}))),p()):ue.nk.error("Failed to fetch driver data.")}catch(a){console.error("Error fetching truck driver list:",a),ue.nk.error("API Request Failed.")}},n=e=>e?V()(e).format("MM/DD/YYYY"):"N/A",s=e=>{d.value={...e},o.value=!0},c=async()=>{try{const e=localStorage.getItem("authToken"),l=await X.A.post(`${z}/Truck/GroupList`,{Token:e,Timestamp:Date.now(),Sign:"string",group_id:""});1e3===l.data.Code?(a.value=l.data.group_list.map((e=>({id:e.truck_group_id,name:e.truck_group_name}))),p()):console.error("Failed to fetch truck groups.")}catch(e){console.error("API error:",e)}},p=()=>{e.value.forEach((e=>{const l=a.value.find((a=>a.id===e.truck_group_id));e.truck_group_name=l?l.name:"N/A"}))},m=(0,t.EW)((()=>l.value?e.value.filter((e=>e.driver_user_id.toLowerCase().includes(l.value.toLowerCase())||e.truck_group_name.toLowerCase().includes(l.value.toLowerCase())||e.driver_name.toLowerCase().includes(l.value.toLowerCase()))):e.value)),_=(0,t.EW)((()=>m.value.slice(50*(r.value-1),50*r.value))),g=()=>{u(),o.value=!1},k=()=>{i.value=!0},b=()=>{i.value=!1,u()};return(0,t.sV)((()=>{c(),u()})),{driverList:e,truckGroups:a,searchQuery:l,currentPage:r,filteredDrivers:m,paginatedDrivers:_,handlePageChange:e=>r.value=e,editDialogVisible:o,addDialogVisible:i,selectedDriver:d,openEditDialog:s,formatLicenseDate:n,handleUpdateSuccess:g,addDriver:k,handleAddSuccess:b}}};const Za=(0,i.A)(Ja,[["render",Ma],["__scopeId","data-v-07e83a84"]]);var el=Za;const al={class:"map-container"},ll={class:"controls"};function tl(e,a,l,r,o,i){const d=(0,t.g2)("el-option"),u=(0,t.g2)("el-select"),n=(0,t.g2)("Marker"),s=(0,t.g2)("InfoWindow"),c=(0,t.g2)("GoogleMap");return(0,t.uX)(),(0,t.CE)("div",al,[(0,t.Lk)("div",ll,[(0,t.bF)(u,{modelValue:r.selectedCompany,"onUpdate:modelValue":a[0]||(a[0]=e=>r.selectedCompany=e),placeholder:"Select Trucking Company",onChange:r.filterDrivers},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"All Companies",value:""}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.dropdownMenu,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.text,label:e.text,value:e.text},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,t.bF)(u,{modelValue:r.selectedDriver,"onUpdate:modelValue":a[1]||(a[1]=e=>r.selectedDriver=e),placeholder:"Select Driver",onChange:r.filterDrivers},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"All Drivers",value:""}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.filteredDrivers,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.id,label:e.text,value:e.text},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])]),(0,t.bF)(c,{center:r.center,zoom:r.zoom,style:{width:"100%",height:"80%"},options:{disableDefaultUI:!1,zoomControl:!0}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.filteredLocations,((e,a)=>((0,t.uX)(),(0,t.Wv)(n,{key:a,options:{position:{lat:e.lat,lng:e.lng}},onClick:a=>r.selectLocation(e)},null,8,["options","onClick"])))),128)),r.selectedLocation?((0,t.uX)(),(0,t.Wv)(s,{key:0,options:{position:{lat:r.selectedLocation.lat,lng:r.selectedLocation.lng}},onCloseclick:a[2]||(a[2]=e=>r.selectedLocation=null)},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[a[3]||(a[3]=(0,t.Lk)("strong",null,"Driver:",-1)),(0,t.eW)(" "+(0,t.v_)(r.selectedLocation.text),1)]),(0,t.Lk)("p",null,[a[4]||(a[4]=(0,t.Lk)("strong",null,"Coordinates:",-1)),(0,t.eW)(" "+(0,t.v_)(r.selectedLocation.lat)+", "+(0,t.v_)(r.selectedLocation.lng),1)])])])),_:1},8,["options"])):(0,t.Q3)("",!0)])),_:1},8,["center","zoom"])])}l(3579);var rl=l(8871),ol={components:{GoogleMap:rl.u6,Marker:rl.pH,InfoWindow:rl.Fu},setup(){const e=(0,t.KR)([]),a=(0,t.KR)([]),l=(0,t.KR)(null),r=(0,t.KR)(10),o=(0,t.KR)(null),i=(0,t.KR)(null),d=(0,t.KR)(null),u=(0,t.EW)((()=>{if(!o.value)return[];const e=a.value.find((e=>e.text===o.value));return e?e.children:[]})),n=(0,t.EW)((()=>e.value.length?i.value?e.value.filter((e=>e.text===i.value)):o.value?e.value.filter((e=>u.value.some((a=>a.text===e.text)))):e.value:[])),s=async()=>{try{const t=localStorage.getItem("authToken"),o=await X.A.post(`${z}/Map/DriverOnline`,{Token:t,Timestamp:Date.now(),Sign:"string"});if(1e3===o.data.Code){const t=o.data.data;e.value=t.locations,a.value=t.DropdownMenu,l.value=t.center,r.value=t.zoom}else console.error("API response error",o.data)}catch(t){console.error("Failed to fetch map data",t)}},c=e=>{d.value=e},p=()=>{o.value||(i.value=""),d.value=null};return(0,t.sV)(s),{locations:e,dropdownMenu:a,center:l,zoom:r,selectedCompany:o,selectedDriver:i,selectedLocation:d,filteredDrivers:u,filteredLocations:n,selectLocation:c,filterDrivers:p}}};const il=(0,i.A)(ol,[["render",tl],["__scopeId","data-v-751d5196"]]);var dl=il;const ul={class:"employee-page"},nl={class:"search-container"},sl={class:"button-container"},cl={key:0},pl={key:1};function ml(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-button"),s=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-table"),p=(0,t.g2)("AdminAddDialog"),m=(0,t.g2)("AdminEditDialog"),_=(0,t.g2)("AdminLogDialog"),g=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)("div",ul,[a[10]||(a[10]=(0,t.Lk)("h1",null,"Employee List",-1)),(0,t.Lk)("div",nl,[(0,t.bF)(d,{modelValue:o.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchQuery=e),placeholder:"Search Employee Name or User ID",clearable:"",class:"search-input"},null,8,["modelValue"])]),(0,t.bF)(u,{background:"",layout:"prev, pager, next",total:i.filteredData.length,"page-size":o.pageSize,"current-page":o.currentPage,"onUpdate:currentPage":a[1]||(a[1]=e=>o.currentPage=e),class:"pagination-container top-pagination"},null,8,["total","page-size","current-page"]),(0,t.Lk)("div",sl,[(0,t.bF)(n,{type:"primary",size:"small",onClick:a[2]||(a[2]=e=>o.addDialogVisible=!0)},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("Add")]))),_:1})]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{data:i.paginatedData,border:"",stripe:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Actions",width:"180"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(n,{type:"primary",size:"small",onClick:a=>i.handleEdit(e)},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("Edit")]))),_:2},1032,["onClick"]),(0,t.bF)(n,{type:"primary",size:"small",onClick:a=>i.handleLog(e)},{default:(0,t.k6)((()=>a[9]||(a[9]=[(0,t.eW)("Log")]))),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(s,{prop:"employee_name",label:"Employee Name",width:"250"}),(0,t.bF)(s,{prop:"employee_user_id",label:"Employee User ID",width:"200"}),(0,t.bF)(s,{label:"User Group",width:"250"},{default:(0,t.k6)((({row:e})=>[e.employee_group&&e.employee_group.length>0?((0,t.uX)(),(0,t.CE)("span",cl,(0,t.v_)(e.employee_group.map((e=>e.group_name)).join(", ")),1)):((0,t.uX)(),(0,t.CE)("span",pl,"-"))])),_:1})])),_:1},8,["data"])),[[g,o.loading]]),(0,t.bF)(u,{background:"",layout:"prev, pager, next",total:i.filteredData.length,"page-size":o.pageSize,"current-page":o.currentPage,"onUpdate:currentPage":a[3]||(a[3]=e=>o.currentPage=e),class:"pagination-container bottom-pagination"},null,8,["total","page-size","current-page"]),(0,t.bF)(p,{visible:o.addDialogVisible,"onUpdate:visible":a[4]||(a[4]=e=>o.addDialogVisible=e),onUpdateSuccess:i.fetchEmployeeData},null,8,["visible","onUpdateSuccess"]),(0,t.bF)(m,{visible:o.editDialogVisible,"onUpdate:visible":a[5]||(a[5]=e=>o.editDialogVisible=e),employeeData:o.selectedEmployee,onUpdateSuccess:i.fetchEmployeeData},null,8,["visible","employeeData","onUpdateSuccess"]),(0,t.bF)(_,{visible:o.logDialogVisible,"onUpdate:visible":a[6]||(a[6]=e=>o.logDialogVisible=e),userId:o.selectedUserId},null,8,["visible","userId"])])}const _l={class:"dialog-footer"};function gl(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-form"),p=(0,t.g2)("el-button"),m=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(m,{modelValue:o.dialogVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>o.dialogVisible=e),title:"Add Employee",width:"600px",onClose:i.closeDialog},{footer:(0,t.k6)((()=>[(0,t.Lk)("div",_l,[(0,t.bF)(p,{onClick:i.closeDialog},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(p,{type:"primary",onClick:i.addEmployee},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("Save")]))),_:1},8,["onClick"])])])),default:(0,t.k6)((()=>[(0,t.bF)(c,{ref:"addForm",model:o.formData,"label-width":"200px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Employee Name"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.employee_name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.employee_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Employee User ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.employee_user_id,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.employee_user_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Employee User Password"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.employee_user_pwd,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.employee_user_pwd=e),type:"password"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"User Group"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.formData.user_group,"onUpdate:modelValue":a[3]||(a[3]=e=>o.formData.user_group=e),multiple:"",placeholder:"Select User Group"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.userGroups,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var kl={props:{visible:Boolean},data(){return{dialogVisible:!1,formData:{employee_name:"",employee_user_id:"",employee_user_pwd:"",user_group:[]},userGroups:["Administrator","API","EMP","MGMT","MONEY","TCSR","TDRV","TPIC"]}},watch:{visible(e){this.dialogVisible=e,e&&this.resetForm()}},methods:{async addEmployee(){try{let e=localStorage.getItem("authToken");if(!e)return alert("Your session has expired. Please log in again."),void this.$router.push("/login");const a={Token:e,Timestamp:Date.now(),Sign:"string",data:this.formData};console.log("📢 發送 API 請求 /Admin/EmployeeAdd:",a);const l=await X.A.post(`${z}/Admin/EmployeeAdd`,a);1e3===l.data.Code?(this.$message.success("Employee added successfully!"),this.$emit("update-success"),this.closeDialog()):this.$message.error("Failed to add employee: "+l.data.Code)}catch(e){console.error("❌ API Request Failed:",e),this.$message.error("Failed to add employee. Please try again later.")}},closeDialog(){this.$emit("update:visible",!1)},resetForm(){this.formData={employee_name:"",employee_user_id:"",employee_user_pwd:"",user_group:[]}}}};const bl=(0,i.A)(kl,[["render",gl],["__scopeId","data-v-74e9e983"]]);var fl=bl;const vl={class:"dialog-footer"};function hl(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-form"),p=(0,t.g2)("el-button"),m=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(m,{modelValue:o.dialogVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>o.dialogVisible=e),title:"Edit Employee",width:"600px",onClose:i.closeDialog},{footer:(0,t.k6)((()=>[(0,t.Lk)("div",vl,[(0,t.bF)(p,{onClick:i.closeDialog},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(p,{type:"primary",onClick:i.saveEmployee},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("Save")]))),_:1},8,["onClick"])])])),default:(0,t.k6)((()=>[(0,t.bF)(c,{ref:"editForm",model:o.formData,"label-width":"200px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Employee Name"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.employee_name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.employee_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Employee User ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.employee_user_id,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.employee_user_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Employee User Password"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.employee_user_pwd,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.employee_user_pwd=e),type:"password"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"User Group"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.formData.user_group,"onUpdate:modelValue":a[3]||(a[3]=e=>o.formData.user_group=e),multiple:"",placeholder:"Select User Group"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.userGroups,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var Dl={props:{visible:Boolean,employeeData:Object},data(){return{dialogVisible:!1,formData:{employee_id:0,employee_name:"",employee_user_id:"",employee_user_pwd:"",user_group:[]},userGroups:["Administrator","API","EMP","MGMT","MONEY","TCSR","TDRV","TPIC"]}},watch:{visible(e){this.dialogVisible=e},employeeData:{immediate:!0,handler(e){e&&(this.formData=JSON.parse(JSON.stringify({employee_id:e.employee_id,employee_name:e.employee_name,employee_user_id:e.employee_user_id,employee_user_pwd:"",user_group:e.employee_group?e.employee_group.map((e=>e.group_name)):[]})))}}},methods:{closeDialog(){this.$emit("update:visible",!1)},async saveEmployee(){try{let e=localStorage.getItem("authToken");if(!e)return alert("Your session has expired. Please log in again."),void this.$router.push("/login");const a={Token:e,Timestamp:Date.now(),Sign:"string",data:{...this.formData,user_group:Array.isArray(this.formData.user_group)?this.formData.user_group:[]}};console.log("🔹 正在發送的 payload:",JSON.stringify(a,null,2));const l=await X.A.post(`${z}/Admin/EmployeeEdit`,a);1e3===l.data.Code?(this.$message.success("Employee updated successfully!"),this.$emit("update-success"),this.closeDialog()):this.$message.error("Failed to update employee: "+l.data.Code)}catch(e){console.error("❌ API Request Failed:",e),this.$message.error("Failed to update employee. Please try again later.")}}}};const Cl=(0,i.A)(Dl,[["render",hl],["__scopeId","data-v-7078fb06"]]);var Vl=Cl;const Fl={class:"search-container"},yl={class:"dialog-footer"};function Tl(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-table-column"),s=(0,t.g2)("el-table"),c=(0,t.g2)("el-button"),p=(0,t.g2)("el-dialog"),m=(0,t.gN)("loading");return(0,t.uX)(),(0,t.Wv)(p,{modelValue:o.dialogVisible,"onUpdate:modelValue":a[1]||(a[1]=e=>o.dialogVisible=e),width:"800px","destroy-on-close":!0,onOpened:i.handleDialogOpened,onClose:i.closeDialog},{footer:(0,t.k6)((()=>[(0,t.Lk)("div",yl,[(0,t.bF)(c,{onClick:i.closeDialog},{default:(0,t.k6)((()=>a[2]||(a[2]=[(0,t.eW)("Close")]))),_:1},8,["onClick"])])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",Fl,[(0,t.bF)(d,{modelValue:o.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchQuery=e),placeholder:"Search in Note...",clearable:"",class:"search-input"},null,8,["modelValue"])]),(0,t.bF)(u,{background:"",layout:"prev, pager, next",total:i.filteredData.length,"page-size":o.pageSize,"current-page":o.currentPage,onCurrentChange:i.handlePageChange,class:"pagination-container top-pagination"},null,8,["total","page-size","current-page","onCurrentChange"]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(s,{data:i.paginatedLogs,border:"",stripe:"",key:o.tableKey},{default:(0,t.k6)((()=>[(0,t.bF)(n,{prop:"action",label:"Action",width:"200"}),(0,t.bF)(n,{prop:"user_id",label:"User ID",width:"150"}),(0,t.bF)(n,{prop:"str_logdate",label:"Log Date",width:"200"}),(0,t.bF)(n,{prop:"note",label:"Note"})])),_:1},8,["data"])),[[m,o.loading]]),(0,t.bF)(u,{background:"",layout:"prev, pager, next",total:i.filteredData.length,"page-size":o.pageSize,"current-page":o.currentPage,onCurrentChange:i.handlePageChange,class:"pagination-container bottom-pagination"},null,8,["total","page-size","current-page","onCurrentChange"])])),_:1},8,["modelValue","onOpened","onClose"])}var Al={props:{visible:Boolean,userId:String},data(){return{dialogVisible:!1,logData:[],loading:!1,tableKey:0,currentPage:1,pageSize:100,searchQuery:""}},computed:{filteredData(){if(!this.searchQuery)return this.logData;const e=this.searchQuery.toLowerCase();return this.logData.filter((a=>a.note&&a.note.toLowerCase().includes(e)))},paginatedLogs(){const e=(this.currentPage-1)*this.pageSize,a=e+this.pageSize;return this.filteredData.slice(e,a)}},watch:{visible(e){this.dialogVisible=e,e&&this.userId&&this.fetchLogs()}},methods:{async fetchLogs(){if(this.userId){this.loading=!0;try{let e=localStorage.getItem("authToken");if(!e)return alert("Your session has expired. Please log in again."),void this.$router.push("/login");const a={Token:e,Timestamp:Date.now(),Sign:"string",user_id:this.userId};console.log("📢 發送 API 請求 /Admin/EmployeeLog:",a);const l=await X.A.post(`${z}/Admin/EmployeeLog`,a);1e3===l.data.Code?(this.logData=l.data.data||[],console.log("✅ API 回應:",this.logData),this.currentPage=1,this.searchQuery="",this.refreshTable()):this.$message.error("Failed to fetch logs: "+l.data.Code)}catch(e){console.error("❌ API Request Failed:",e),this.$message.error("Failed to fetch logs. Please try again later.")}finally{this.loading=!1}}else console.error("❌ 錯誤: userId 為空，無法獲取日誌")},handleDialogOpened(){this.$nextTick((()=>{window.dispatchEvent(new Event("resize"))}))},refreshTable(){this.tableKey+=1},closeDialog(){this.$emit("update:visible",!1)},handlePageChange(e){this.currentPage=e}}};const Sl=(0,i.A)(Al,[["render",Tl],["__scopeId","data-v-34414093"]]);var wl=Sl,El={components:{AdminAddDialog:fl,AdminEditDialog:Vl,AdminLogDialog:wl},data(){return{employeeData:[],searchQuery:"",loading:!1,currentPage:1,pageSize:20,addDialogVisible:!1,editDialogVisible:!1,logDialogVisible:!1,selectedEmployee:null,selectedUserId:null}},computed:{...(0,D.aH)(["authToken"]),filteredData(){if(!this.searchQuery)return this.employeeData;const e=this.searchQuery.toLowerCase();return this.employeeData.filter((a=>a.employee_name&&a.employee_name.toLowerCase().includes(e)||a.employee_user_id&&a.employee_user_id.toLowerCase().includes(e)))},paginatedData(){const e=(this.currentPage-1)*this.pageSize,a=e+this.pageSize;return this.filteredData.slice(e,a)}},methods:{...(0,D.i0)(["checkTokenExpiration"]),async fetchEmployeeData(){this.loading=!0;try{let e=this.authToken||localStorage.getItem("authToken");if(!e)return alert("Your session has expired. Please log in again."),void this.$router.push("/login");const a=await X.A.post(`${z}/Admin/EmployeeList`,{Token:e,Timestamp:Date.now(),Sign:"string"});console.log("✅ API 回應資料:",a.data),1e3===a.data.Code?(this.employeeData=a.data.data||[],this.currentPage=1):alert("Failed to fetch employee data: "+a.data.Code)}catch(e){console.error("❌ API Request Failed:",e),alert("Failed to fetch employee data. Please try again later.")}finally{this.loading=!1}},handleEdit(e){this.selectedEmployee=JSON.parse(JSON.stringify(e)),this.editDialogVisible=!0},handleLog(e){this.selectedUserId=e.employee_user_id,this.logDialogVisible=!0}},mounted(){this.fetchEmployeeData()}};const Pl=(0,i.A)(El,[["render",ml],["__scopeId","data-v-5ce0ee18"]]);var Il=Pl;const Ll={class:"rank-page"},Ul={class:"search-container"};function xl(e,a,l,r,o,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-table-column"),s=(0,t.g2)("el-table"),c=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)("div",Ll,[a[3]||(a[3]=(0,t.Lk)("h1",null,"Rank",-1)),(0,t.Lk)("div",Ul,[(0,t.bF)(d,{modelValue:o.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchQuery=e),placeholder:"Search Week or Customer Name",clearable:"",class:"search-input"},null,8,["modelValue"])]),(0,t.bF)(u,{background:"",layout:"prev, pager, next",total:i.filteredData.length,"page-size":o.pageSize,"current-page":o.currentPage,"onUpdate:currentPage":a[1]||(a[1]=e=>o.currentPage=e),class:"pagination-container top-pagination"},null,8,["total","page-size","current-page"]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(s,{data:i.paginatedData,border:"",stripe:"",style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(n,{prop:"year",label:"Year",width:"100"}),(0,t.bF)(n,{prop:"week",label:"Week",width:"100"}),(0,t.bF)(n,{prop:"customer_name",label:"Customer Name",width:"250"},{default:(0,t.k6)((({row:e})=>[(0,t.eW)((0,t.v_)(e.customer_name?e.customer_name:e.user_id),1)])),_:1}),(0,t.bF)(n,{prop:"login_count",label:"Login Count",width:"150",sortable:"","sort-method":i.sortByNumber},null,8,["sort-method"])])),_:1},8,["data"])),[[c,o.loading]]),(0,t.bF)(u,{background:"",layout:"prev, pager, next",total:i.filteredData.length,"page-size":o.pageSize,"current-page":o.currentPage,"onUpdate:currentPage":a[2]||(a[2]=e=>o.currentPage=e),class:"pagination-container bottom-pagination"},null,8,["total","page-size","current-page"])])}var Rl={data(){return{rankData:[],searchQuery:"",loading:!1,currentPage:1,pageSize:20}},computed:{...(0,D.aH)(["authToken"]),filteredData(){if(!this.searchQuery)return this.rankData;const e=this.searchQuery.toLowerCase();return this.rankData.filter((a=>a.week.toString().includes(e)||a.customer_name&&a.customer_name.toLowerCase().includes(e)||a.user_id&&a.user_id.toLowerCase().includes(e)))},paginatedData(){const e=(this.currentPage-1)*this.pageSize,a=e+this.pageSize;return this.filteredData.slice(e,a)}},methods:{...(0,D.i0)(["checkTokenExpiration"]),sortByNumber(e,a){return e.login_count-a.login_count},async fetchRankData(){this.loading=!0;try{let e=this.authToken||localStorage.getItem("authToken");if(!e)return alert("您的登入已過期，請重新登入。"),void this.$router.push("/login");const a=await X.A.post(`${z}/Admin/LoginRank`,{Token:e,Timestamp:Date.now(),Sign:"string"});1e3===a.data.Code?(this.rankData=a.data.data||[],this.currentPage=1):alert("Failed to fetch rank data: "+a.data.Code)}catch(e){console.error("❌ API 請求失敗:",e),alert("Failed to fetch rank data. 請稍後重試！")}finally{this.loading=!1}}},mounted(){this.fetchRankData()}};const Ol=(0,i.A)(Rl,[["render",xl],["__scopeId","data-v-19a5c920"]]);var Wl=Ol;function Nl(e,a){return(0,t.uX)(),(0,t.CE)("h1",null,"Hi")}const Kl={},Yl=(0,i.A)(Kl,[["render",Nl]]);var Gl=Yl;const Ml={template:"<div><h1>Home Page</h1></div>"},Xl=[{path:"/",component:W,children:[{path:"login",component:q},{path:"",component:Ml},{path:"order",component:te},{path:"customer",component:Pe},{path:"truck",component:na},{path:"chassis",component:qe},{path:"driver-fleet",component:Fa},{path:"port",component:Na},{path:"truck-driver",component:el},{path:"map",component:dl},{path:"admin",component:Il},{path:"rank",component:Wl},{path:"billing",component:Gl}]},{path:"/:pathMatch(.*)*",redirect:"/login"}],zl=(0,n.aE)({history:(0,n.LA)(),routes:Xl});zl.beforeEach(((e,a,l)=>{const t=localStorage.getItem("authToken");"/login"===e.path||t?l():l("/login")}));var $l=zl,Ql=(0,D.y$)({state:{authToken:localStorage.getItem("authToken")||"",username:localStorage.getItem("username")||"Guest",groups:JSON.parse(localStorage.getItem("groups"))||[],tokenExpiration:localStorage.getItem("tokenExpiration")||null},mutations:{SET_AUTH_TOKEN(e,a){e.authToken=a,localStorage.setItem("authToken",a)},SET_USERNAME(e,a){e.username=a,localStorage.setItem("username",a)},SET_GROUPS(e,a){e.groups=a,localStorage.setItem("groups",JSON.stringify(a))},SET_TOKEN_EXPIRATION(e,a){e.tokenExpiration=a,localStorage.setItem("tokenExpiration",a)},LOGOUT(e){e.authToken="",e.username="Guest",e.groups=[],e.tokenExpiration=null,localStorage.removeItem("authToken"),localStorage.removeItem("username"),localStorage.removeItem("groups"),localStorage.removeItem("tokenExpiration")}},actions:{login({commit:e},{token:a,username:l,groups:t}){const r=Date.now()+864e5;e("SET_AUTH_TOKEN",a),e("SET_USERNAME",l),e("SET_GROUPS",t||[]),e("SET_TOKEN_EXPIRATION",r)},logout({commit:e}){e("LOGOUT")},checkTokenExpiration({commit:e,state:a}){a.tokenExpiration&&Date.now()>a.tokenExpiration&&(e("LOGOUT"),alert("Session expired. Please log in again."))}},getters:{isAuthenticated:e=>!!e.authToken,username:e=>e.username,userGroups:e=>e.groups}}),ql=l(5835),Bl=(l(4188),l(2266));if(!window.google||!window.google.maps){const e=new Bl.aH({apiKey:"AIzaSyAivOqdNbvSeRgB-NQpEnl61AhSKAW9_YE",version:"weekly",libraries:["places","marker"],region:"US",language:"en"});e.load().then((()=>{console.log("✅ Google Maps API loaded successfully!")}))}const Hl=(0,t.Ef)(u);Hl.use($l),Hl.use(Ql),Hl.use(ql.A),Hl.mount("#app"),$l.beforeEach(((e,a,l)=>{Ql.dispatch("checkTokenExpiration");const t=Ql.getters.isAuthenticated;t||"/login"===e.path?l():l("/login")}))}},a={};function l(t){var r=a[t];if(void 0!==r)return r.exports;var o=a[t]={exports:{}};return e[t].call(o.exports,o,o.exports,l),o.exports}l.m=e,function(){var e=[];l.O=function(a,t,r,o){if(!t){var i=1/0;for(s=0;s<e.length;s++){t=e[s][0],r=e[s][1],o=e[s][2];for(var d=!0,u=0;u<t.length;u++)(!1&o||i>=o)&&Object.keys(l.O).every((function(e){return l.O[e](t[u])}))?t.splice(u--,1):(d=!1,o<i&&(i=o));if(d){e.splice(s--,1);var n=r();void 0!==n&&(a=n)}}return a}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[t,r,o]}}(),function(){l.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(a,{a:a}),a}}(),function(){l.d=function(e,a){for(var t in a)l.o(a,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){l.p="/hello-vue-app/"}(),function(){var e={524:0};l.O.j=function(a){return 0===e[a]};var a=function(a,t){var r,o,i=t[0],d=t[1],u=t[2],n=0;if(i.some((function(a){return 0!==e[a]}))){for(r in d)l.o(d,r)&&(l.m[r]=d[r]);if(u)var s=u(l)}for(a&&a(t);n<i.length;n++)o=i[n],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(s)},t=self["webpackChunkTOPPOINT_Web"]=self["webpackChunkTOPPOINT_Web"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=l.O(void 0,[504],(function(){return l(5056)}));t=l.O(t)})();
//# sourceMappingURL=app.4b0cf092.js.map