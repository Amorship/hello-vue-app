(function(){"use strict";var e={8368:function(e,a,l){var t=l(8709);function o(e,a,l,o,r,i){const d=(0,t.g2)("router-view");return(0,t.uX)(),(0,t.Wv)(d)}var r={name:"App"},i=l(1241);const d=(0,i.A)(r,[["render",o]]);var u=d,n=l(973);const s={class:"main-layout","lock-scroll":!1,"modal-append-to-body":!1},c={class:"layout"};function p(e,a,l,o,r,i){const d=(0,t.g2)("AppNavbar"),u=(0,t.g2)("AppSidebar"),n=(0,t.g2)("router-view");return(0,t.uX)(),(0,t.CE)("div",s,[(0,t.bF)(d,{collapsed:r.isSidebarCollapsed},null,8,["collapsed"]),(0,t.Lk)("div",c,[(0,t.bF)(u,{collapsed:r.isSidebarCollapsed,hideMenu:i.isLoginPage,onToggleSidebar:i.toggleSidebar},null,8,["collapsed","hideMenu","onToggleSidebar"]),(0,t.Lk)("div",{class:(0,t.C4)(["content",{"content-collapsed":r.isSidebarCollapsed}])},[(0,t.bF)(n)],2)])])}var m=l.p+"img/wlogo.f0b2d67e.svg",_=l.p+"img/clock.f3bd457e.png";const b={class:"navbar-left"},g={key:0,class:"logo-text"},k={class:"navbar-right"},f={class:"current-time"},v={class:"name-text"},h={key:0,class:"dropdown",ref:"dropdownMenu"};function D(e,a,l,o,r,i){return(0,t.uX)(),(0,t.CE)("div",{class:(0,t.C4)(["navbar",{collapsed:l.collapsed}])},[(0,t.Lk)("div",b,[a[2]||(a[2]=(0,t.Lk)("img",{src:m,alt:"TOPPOINT Logo",class:"logo-img"},null,-1)),l.collapsed?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("span",g,"TOPPOINT"))]),(0,t.Lk)("div",k,[(0,t.Lk)("span",f,[a[3]||(a[3]=(0,t.Lk)("img",{src:_,class:"clock-icon",alt:"Clock Icon"},null,-1)),(0,t.eW)(" EST - "+(0,t.v_)(r.currentTime),1)]),!i.isLoginPage&&e.isAuthenticated?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"user-menu",onClick:a[1]||(a[1]=(0,t.D$)(((...e)=>i.toggleDropdown&&i.toggleDropdown(...e)),["stop"]))},[(0,t.Lk)("span",v,"Hi, "+(0,t.v_)(e.username),1),r.showDropdown?((0,t.uX)(),(0,t.CE)("div",h,[(0,t.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>i.handleLogout&&i.handleLogout(...e))},"Logout")],512)):(0,t.Q3)("",!0)])):(0,t.Q3)("",!0)])],2)}l(4114);var F=l(782),V=l(1576),C=l.n(V),y=l(6121),S=l.n(y),T=l(9048),A=l.n(T);C().extend(S()),C().extend(A());var E={props:{collapsed:{type:Boolean,default:!1}},data(){return{currentTime:this.getNewJerseyTime(),showDropdown:!1}},computed:{...(0,F.L8)(["username","isAuthenticated"]),isLoginPage(){return"/login"===this.$route.path}},methods:{...(0,F.i0)(["logout"]),getNewJerseyTime(){return C()().tz("America/New_York").format("MM/DD/YYYY HH:mm:ss")},toggleDropdown(){this.showDropdown=!this.showDropdown},async handleLogout(){await this.logout(),this.$router.push("/login"),setTimeout((()=>{window.location.reload()}),300)},handleClickOutside(e){this.$refs.dropdownMenu&&!this.$refs.dropdownMenu.contains(e.target)&&(this.showDropdown=!1)},updateTime(){setInterval((()=>{this.currentTime=this.getNewJerseyTime()}),1e3)}},mounted(){this.updateTime(),document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const w=(0,i.A)(E,[["render",D],["__scopeId","data-v-1ef730ad"]]);var L=w;const I={key:0,class:"menu"},U=["src"];function P(e,a,l,o,r,i){const d=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)("div",{class:(0,t.C4)(["sidebar",{collapsed:l.collapsed}])},[e.isAuthenticated?((0,t.uX)(),(0,t.CE)("ul",I,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.menuItems,(e=>((0,t.uX)(),(0,t.CE)("li",{key:e.name},[(0,t.bF)(d,{to:e.route,class:"menu-link"},{default:(0,t.k6)((()=>[(0,t.Lk)("img",{src:e.icon,class:"menu-icon"},null,8,U),(0,t.Lk)("span",{class:(0,t.C4)({"collapsed-text":l.collapsed})},(0,t.v_)(e.name),3)])),_:2},1032,["to"])])))),128))])):(0,t.Q3)("",!0),(0,t.Lk)("button",{class:"toggle-button",onClick:a[0]||(a[0]=(...e)=>i.toggleSidebar&&i.toggleSidebar(...e))},(0,t.v_)(l.collapsed?"▶":"◀"),1)],2)}var O=l.p+"img/container.eb40caab.png",R=l.p+"img/customer-review.db4d96d9.png",Y=l.p+"img/car.cc7d5f6e.png",N=l.p+"img/delivery-truck.6f9addab.png",x=l.p+"img/crowd-of-users.4e329766.png",M=l.p+"img/port.4b86b2ab.png",W=l.p+"img/driver.ec1f683f.png",K=l.p+"img/map.3dfd118c.png",X=l.p+"img/admin.10a94fd4.png",z=l.p+"img/ranking.6c8762fd.png",H=l.p+"img/bill.e7ac317f.png",G={props:{collapsed:{type:Boolean,default:!1}},data(){return{menuItems:[{name:"Order",route:"/order",icon:O},{name:"Customer",route:"/customer",icon:R},{name:"Chassis",route:"/chassis",icon:Y},{name:"Truck",route:"/truck",icon:N},{name:"Driver Fleet",route:"/driver-fleet",icon:x},{name:"Port",route:"/port",icon:M},{name:"Truck Driver",route:"/truck-driver",icon:W},{name:"Map",route:"/map",icon:K},{name:"Admin",route:"/admin",icon:X},{name:"Rank",route:"/rank",icon:z},{name:"Billing",route:"/billing",icon:H}]}},computed:{...(0,F.L8)(["isAuthenticated"])},methods:{toggleSidebar(){this.$emit("toggle-sidebar")}}};const $=(0,i.A)(G,[["render",P],["__scopeId","data-v-090c7d69"]]);var B=$,Q={data(){return{isSidebarCollapsed:!1}},computed:{isLoginPage(){return"/login"===this.$route.path}},methods:{toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed}},components:{AppNavbar:L,AppSidebar:B}};const q=(0,i.A)(Q,[["render",p],["__scopeId","data-v-3828f622"]]);var j=q;const Z={class:"login-page"},J={class:"login-container"},ee={class:"input-group"},ae={class:"input-group"};function le(e,a,l,o,r,i){return(0,t.uX)(),(0,t.CE)("div",Z,[(0,t.Lk)("div",J,[a[5]||(a[5]=(0,t.Lk)("h1",null,"Login",-1)),(0,t.Lk)("div",ee,[a[3]||(a[3]=(0,t.Lk)("label",null,"Username:",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>r.username=e)},null,512),[[t.Jo,r.username]])]),(0,t.Lk)("div",ae,[a[4]||(a[4]=(0,t.Lk)("label",null,"Password:",-1)),(0,t.bo)((0,t.Lk)("input",{type:"password","onUpdate:modelValue":a[1]||(a[1]=e=>r.password=e)},null,512),[[t.Jo,r.password]])]),(0,t.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>i.handleLogin&&i.handleLogin(...e))},"Login")])])}var te=l(4373);const oe="https://api-stage.toppointtrucking.com";var re={data(){return{username:"",password:""}},methods:{...(0,F.i0)(["login"]),async handleLogin(){try{const e={Token:"string",Timestamp:Date.now(),Sign:"string",UserId:this.username,Password:this.password},a=await te.A.post(`${oe}/Auth/Login`,e);if(1e3===a.data.Code){const e=a.data.Groups||[];await this.login({token:a.data.Token,username:a.data.UserName,groups:e}),localStorage.setItem("authToken",a.data.Token),localStorage.setItem("username",a.data.UserName),localStorage.setItem("groups",JSON.stringify(e)),alert("Login successful! Redirecting to the homepage..."),this.$router.push("/")}else alert("Login failed: "+a.data.Code)}catch(e){console.error("Login error:",e),alert("Login error: "+(e.response?e.response.data:e.message))}}}};const ie=(0,i.A)(re,[["render",le],["__scopeId","data-v-5bc08f7c"]]);var de=ie;l(8111),l(2489);const ue={class:"order-page"},ne={class:"search-container"},se={class:"button-container"},ce={class:"table-container"},pe={key:0,class:"must-do-icon"},me=["innerHTML"];function _e(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-button"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-form-item"),p=(0,t.g2)("el-col"),m=(0,t.g2)("el-row"),_=(0,t.g2)("el-date-picker"),b=(0,t.g2)("el-form"),g=(0,t.g2)("el-card"),k=(0,t.g2)("el-collapse"),f=(0,t.g2)("el-pagination"),v=(0,t.g2)("el-table-column"),h=(0,t.g2)("el-table"),D=(0,t.g2)("OrderAddDialog"),F=(0,t.g2)("OrderEditDialog"),V=(0,t.g2)("OrderBatchEditDialog");return(0,t.uX)(),(0,t.CE)("div",ue,[a[33]||(a[33]=(0,t.Lk)("h1",null,"Order List",-1)),(0,t.Lk)("div",ne,[(0,t.bF)(d,{modelValue:r.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>r.searchQuery=e),placeholder:"Search Customer Name or Load ID",clearable:"",class:"search-input"},null,8,["modelValue"]),(0,t.bF)(u,{type:"primary",onClick:a[1]||(a[1]=e=>r.showFilter=!r.showFilter),class:"filter-btn"},{default:(0,t.k6)((()=>[(0,t.eW)((0,t.v_)(r.showFilter?"Hide Filter":"Show Filter"),1)])),_:1})]),(0,t.bo)((0,t.bF)(k,null,{default:(0,t.k6)((()=>[(0,t.bF)(g,{class:"filter-panel"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{"label-width":"180px"},{default:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(p,{span:12},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"Load Type"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.filter.loadType,"onUpdate:modelValue":a[2]||(a[2]=e=>r.filter.loadType=e),placeholder:"Select Load Type",clearable:"",filterable:""},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"Import",value:"I"}),(0,t.bF)(n,{label:"Domestic",value:"D"}),(0,t.bF)(n,{label:"Export",value:"E"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(p,{span:16},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"SCHEDULE DATE"},{default:(0,t.k6)((()=>[(0,t.bF)(_,{modelValue:r.filter.scheduleDate,"onUpdate:modelValue":a[3]||(a[3]=e=>r.filter.scheduleDate=e),type:"daterange",format:"MM-DD-YYYY","value-format":"YYYY-MM-DD","range-separator":"To","start-placeholder":"Start","end-placeholder":"End"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(p,{span:16},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"ERD"},{default:(0,t.k6)((()=>[(0,t.bF)(_,{modelValue:r.filter.erd,"onUpdate:modelValue":a[4]||(a[4]=e=>r.filter.erd=e),type:"daterange",format:"MM-DD-YYYY","value-format":"YYYY-MM-DD","range-separator":"To","start-placeholder":"Start","end-placeholder":"End"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(p,{span:16},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"CUT OFF"},{default:(0,t.k6)((()=>[(0,t.bF)(_,{modelValue:r.filter.cutOff,"onUpdate:modelValue":a[5]||(a[5]=e=>r.filter.cutOff=e),type:"daterange",format:"MM-DD-YYYY","value-format":"YYYY-MM-DD","range-separator":"To","start-placeholder":"Start","end-placeholder":"End"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(p,{span:16},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"DOC CUT"},{default:(0,t.k6)((()=>[(0,t.bF)(_,{modelValue:r.filter.docCut,"onUpdate:modelValue":a[6]||(a[6]=e=>r.filter.docCut=e),type:"daterange",format:"MM-DD-YYYY","value-format":"YYYY-MM-DD","range-separator":"To","start-placeholder":"Start","end-placeholder":"End"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(m,{gutter:10},{default:(0,t.k6)((()=>[(0,t.bF)(p,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"Load ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.filter.loadId,"onUpdate:modelValue":a[7]||(a[7]=e=>r.filter.loadId=e),placeholder:"Enter Load ID"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(p,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"Driver User ID"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.filter.driverUserId,"onUpdate:modelValue":a[8]||(a[8]=e=>r.filter.driverUserId=e),placeholder:"Select Driver",clearable:"",filterable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.drivers,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.driver_user_id,label:e.driver_name,value:e.driver_user_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(p,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"Load Status"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.filter.loadStatus,"onUpdate:modelValue":a[9]||(a[9]=e=>r.filter.loadStatus=e),placeholder:"Select Status",clearable:"",filterable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.loadStatusOptions,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(m,{gutter:10},{default:(0,t.k6)((()=>[(0,t.bF)(p,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"Booking"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.filter.booking,"onUpdate:modelValue":a[10]||(a[10]=e=>r.filter.booking=e),placeholder:"Enter Booking"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(p,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"CONTAINER #"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.filter.container,"onUpdate:modelValue":a[11]||(a[11]=e=>r.filter.container=e),placeholder:"Enter Container #"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(p,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"CUSTOMER NAME"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.filter.customerName,"onUpdate:modelValue":a[12]||(a[12]=e=>r.filter.customerName=e),placeholder:"Customer Name",clearable:"",filterable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.customers,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.customer_id,label:e.customer_name,value:e.customer_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(m,{gutter:10},{default:(0,t.k6)((()=>[(0,t.bF)(p,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"CUSTOMER / LOCATION"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.filter.customerLocation,"onUpdate:modelValue":a[13]||(a[13]=e=>r.filter.customerLocation=e),placeholder:"Select Customer/Location",clearable:"",filterable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.locations,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.location_id,label:e.customer_location,value:e.location_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(p,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"ADDRESS DETAIL"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.filter.addressDetail,"onUpdate:modelValue":a[14]||(a[14]=e=>r.filter.addressDetail=e),placeholder:"Enter Address Detail"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(p,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"SSL"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.filter.ssl,"onUpdate:modelValue":a[15]||(a[15]=e=>r.filter.ssl=e),placeholder:"Select SSL",clearable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.sslOptions,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(m,{gutter:10},{default:(0,t.k6)((()=>[(0,t.bF)(p,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"Loads Notes"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.filter.loadNotes,"onUpdate:modelValue":a[16]||(a[16]=e=>r.filter.loadNotes=e),placeholder:"Enter Loads Notes"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(p,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"SCALE / HAZ"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.filter.scaleHaz,"onUpdate:modelValue":a[17]||(a[17]=e=>r.filter.scaleHaz=e),placeholder:"Select Option",clearable:"",filterable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.scaleHazmatOptions,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(p,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"Load Number / PO"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.filter.loadNumberPo,"onUpdate:modelValue":a[18]||(a[18]=e=>r.filter.loadNumberPo=e),placeholder:"Enter Load Number / PO"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(m,{gutter:10},{default:(0,t.k6)((()=>[(0,t.bF)(p,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"Size"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.filter.size,"onUpdate:modelValue":a[19]||(a[19]=e=>r.filter.size=e),placeholder:"Enter Size"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(p,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"PICK TERMINAL"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.filter.pickTerminal,"onUpdate:modelValue":a[20]||(a[20]=e=>r.filter.pickTerminal=e),placeholder:"Pick Terminal",clearable:"",filterable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.piers,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.pier_id,label:e.pier_name,value:e.pier_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(p,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"DROP TERMINAL"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.filter.dropTerminal,"onUpdate:modelValue":a[21]||(a[21]=e=>r.filter.dropTerminal=e),placeholder:"Drop Terminal",clearable:"",filterable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.piers,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.pier_id,label:e.pier_name,value:e.pier_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(m,{gutter:10},{default:(0,t.k6)((()=>[(0,t.bF)(p,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"VESSEL"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.filter.vessel,"onUpdate:modelValue":a[22]||(a[22]=e=>r.filter.vessel=e),placeholder:"Enter Vessel"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(m,{justify:"end"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{span:6,class:"filter-buttons"},{default:(0,t.k6)((()=>[(0,t.bF)(c,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{type:"primary",onClick:i.searchOrders},{default:(0,t.k6)((()=>a[27]||(a[27]=[(0,t.eW)("Search")]))),_:1},8,["onClick"]),(0,t.bF)(u,{type:"warning",onClick:i.clearFilters},{default:(0,t.k6)((()=>a[28]||(a[28]=[(0,t.eW)("Clear")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),[[t.aG,r.showFilter]]),(0,t.bF)(f,{background:"",layout:"prev, pager, next",total:i.filteredOrders.length,"page-size":r.pageSize,"current-page":r.currentPage,"onUpdate:currentPage":a[23]||(a[23]=e=>r.currentPage=e),class:"pagination-container top-pagination"},null,8,["total","page-size","current-page"]),(0,t.Lk)("div",se,[(0,t.bF)(u,{type:"primary",size:"small",onClick:i.openAddDialog},{default:(0,t.k6)((()=>a[29]||(a[29]=[(0,t.eW)(" Add ")]))),_:1},8,["onClick"]),(0,t.bF)(u,{type:"danger",size:"small",onClick:i.cancelOrder},{default:(0,t.k6)((()=>a[30]||(a[30]=[(0,t.eW)(" Cancel Order ")]))),_:1},8,["onClick"]),(0,t.bF)(u,{type:"warning",size:"small",onClick:i.openBatchEdit},{default:(0,t.k6)((()=>a[31]||(a[31]=[(0,t.eW)(" Batch Edit ")]))),_:1},8,["onClick"])]),(0,t.Lk)("div",ce,[(0,t.bF)(h,{ref:"orderTable",data:r.orderList.length?r.orderList:[],stripe:"",border:"",onSelectionChange:i.handleSelectionChange,onScroll:e.syncScroll,style:{width:"100%","min-width":"3750px"}},{default:(0,t.k6)((()=>[(0,t.bF)(v,{type:"selection",width:"55"}),(0,t.bF)(v,{label:"Actions",width:"100"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(u,{type:"primary",size:"small",onClick:a=>i.handleEdit(e)},{default:(0,t.k6)((()=>a[32]||(a[32]=[(0,t.eW)("Edit")]))),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(v,{label:"Load Type",width:"150",formatter:o.formatOrderType},null,8,["formatter"]),(0,t.bF)(v,{prop:"order.str_schedule_date",label:"SCHEDULE DATE",width:"180"}),(0,t.bF)(v,{label:"Load ID",width:"150"},{default:(0,t.k6)((({row:e})=>[e.order.must_do?((0,t.uX)(),(0,t.CE)("span",pe,"❗")):(0,t.Q3)("",!0),(0,t.eW)(" "+(0,t.v_)(e.order.order_id),1)])),_:1}),(0,t.bF)(v,{prop:"detail.driver_user_id",label:"Driver User ID",width:"180"}),(0,t.bF)(v,{prop:"detail.str_order_status",label:"Load Status",width:"200"}),(0,t.bF)(v,{prop:"order.str_erd",label:"ERD",width:"150"}),(0,t.bF)(v,{prop:"order.str_cut_off",label:"CUT OFF",width:"150"}),(0,t.bF)(v,{prop:"order.booking_id",label:"Booking",width:"180"}),(0,t.bF)(v,{prop:"order.str_doc_date",label:"DOC CUT",width:"200"}),(0,t.bF)(v,{prop:"detail.container",label:"CONTAINER #",width:"180"}),(0,t.bF)(v,{prop:"order.str_customer",label:"CUSTOMER / LOCATION",width:"250"}),(0,t.bF)(v,{prop:"order.customer_address",label:"ADDRESS DETAIL",width:"300"}),(0,t.bF)(v,{prop:"order.str_ssl",label:"SSL",width:"150"}),(0,t.bF)(v,{label:"Loads Notes",width:"250"},{default:(0,t.k6)((({row:e})=>[(0,t.Lk)("div",{class:"load-notes-cell",innerHTML:e.order.load_notes.replace(/\n/g,"<br>")},null,8,me)])),_:1}),(0,t.bF)(v,{prop:"order.scale_hazmat",label:"SCALE / HAZ",width:"150",formatter:i.formatScaleHaz},null,8,["formatter"]),(0,t.bF)(v,{prop:"order.po_no",label:"Load Number / PO",width:"180"}),(0,t.bF)(v,{prop:"order.container_size",label:"Size",width:"120"}),(0,t.bF)(v,{label:"PICK TERMINAL",width:"150"},{default:(0,t.k6)((({row:e})=>[(0,t.eW)((0,t.v_)(i.getPierName(e.order.pick_terminal)),1)])),_:1}),(0,t.bF)(v,{label:"DROP TERMINAL",width:"150"},{default:(0,t.k6)((({row:e})=>[(0,t.eW)((0,t.v_)(i.getPierName(e.order.drop_terminal)),1)])),_:1}),(0,t.bF)(v,{prop:"order.vessel",label:"VESSEL",width:"200"})])),_:1},8,["data","onSelectionChange","onScroll"])]),(0,t.bF)(f,{background:"",layout:"prev, pager, next",total:i.filteredOrders.length,"page-size":r.pageSize,"current-page":r.currentPage,"onUpdate:currentPage":a[24]||(a[24]=e=>r.currentPage=e),class:"pagination-container bottom-pagination"},null,8,["total","page-size","current-page"]),(0,t.bF)(D,{visible:r.addDialogVisible,onClose:i.closeAddDialog,onAddSuccess:i.handleAddSuccess},null,8,["visible","onClose","onAddSuccess"]),(0,t.bF)(F,{visible:r.editDialogVisible,orderData:r.selectedOrder,"onUpdate:visible":a[25]||(a[25]=e=>r.editDialogVisible=e),onUpdateSuccess:i.yourRefreshMethod},null,8,["visible","orderData","onUpdateSuccess"]),(0,t.bF)(V,{visible:r.batchEditDialogVisible,selectedOrders:r.selectedOrders,"onUpdate:visible":a[26]||(a[26]=e=>r.batchEditDialogVisible=e),onBatchUpdateSuccess:i.fetchOrders},null,8,["visible","selectedOrders","onBatchUpdateSuccess"])])}l(116),l(7588),l(1701);var be=l(742),ge=l.n(be);function ke(e,a,l,o,r,i){const d=(0,t.g2)("el-checkbox"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-input"),p=(0,t.g2)("el-date-picker"),m=(0,t.g2)("el-form"),_=(0,t.g2)("el-table-column"),b=(0,t.g2)("el-table"),g=(0,t.g2)("el-button"),k=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(k,{modelValue:o.dialogVisible,"onUpdate:modelValue":a[25]||(a[25]=e=>o.dialogVisible=e),title:"Order Add",width:"800px",onClose:o.closeDialog},{footer:(0,t.k6)((()=>[(0,t.bF)(g,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[27]||(a[27]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),o.step>1?((0,t.uX)(),(0,t.Wv)(g,{key:0,onClick:a[23]||(a[23]=e=>o.step--)},{default:(0,t.k6)((()=>a[28]||(a[28]=[(0,t.eW)("Back")]))),_:1})):(0,t.Q3)("",!0),o.step<3?((0,t.uX)(),(0,t.Wv)(g,{key:1,type:"primary",onClick:a[24]||(a[24]=e=>o.step++)},{default:(0,t.k6)((()=>a[29]||(a[29]=[(0,t.eW)("Next")]))),_:1})):(0,t.Q3)("",!0),3===o.step||2===o.step&&"N"===o.differentPO&&"N"===o.differentScheduleDate?((0,t.uX)(),(0,t.Wv)(g,{key:2,type:"success",onClick:o.submitOrder},{default:(0,t.k6)((()=>a[30]||(a[30]=[(0,t.eW)("Save")]))),_:1},8,["onClick"])):(0,t.Q3)("",!0)])),default:(0,t.k6)((()=>[1===o.step?((0,t.uX)(),(0,t.Wv)(m,{key:0,model:o.orderData,"label-width":"140px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"MustDo"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.orderData.must_do,"onUpdate:modelValue":a[0]||(a[0]=e=>o.orderData.must_do=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Load Type"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderData.order_type,"onUpdate:modelValue":a[1]||(a[1]=e=>o.orderData.order_type=e)},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"Import",value:"I"}),(0,t.bF)(n,{label:"Domestic",value:"D"}),(0,t.bF)(n,{label:"Export",value:"E"})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Customer Name"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderData.customer_id,"onUpdate:modelValue":a[2]||(a[2]=e=>o.orderData.customer_id=e),filterable:"",placeholder:"Select Customer",onChange:o.fetchCustomerLocations},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.customers,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.customer_id,label:e.customer_name,value:e.customer_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,t.bF)(u,{label:"Customer / Location"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderData.customer_location,"onUpdate:modelValue":a[3]||(a[3]=e=>o.orderData.customer_location=e),filterable:"",placeholder:"Select Location",onChange:o.updateCustomerAddress},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.locations,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.location_id,label:e.customer_location,value:e.location_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,t.bF)(u,{label:"Address Detail"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.orderData.customer_address,"onUpdate:modelValue":a[4]||(a[4]=e=>o.orderData.customer_address=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Delivery Address"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.orderData.delivery_address,"onUpdate:modelValue":a[5]||(a[5]=e=>o.orderData.delivery_address=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Booking"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.orderData.booking_id,"onUpdate:modelValue":a[6]||(a[6]=e=>o.orderData.booking_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"ERD"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{modelValue:o.orderData.erd,"onUpdate:modelValue":a[7]||(a[7]=e=>o.orderData.erd=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"CUT OFF"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{modelValue:o.orderData.cut_off,"onUpdate:modelValue":a[8]||(a[8]=e=>o.orderData.cut_off=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"SCHEDULE DATE"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{modelValue:o.orderData.schedule_date,"onUpdate:modelValue":a[9]||(a[9]=e=>o.orderData.schedule_date=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"PICK TERMINAL"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderData.pick_terminal,"onUpdate:modelValue":a[10]||(a[10]=e=>o.orderData.pick_terminal=e),placeholder:"Select Pick Terminal"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.piers,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.pier_id,label:e.pier_name,value:e.pier_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"DROP TERMINAL"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderData.drop_terminal,"onUpdate:modelValue":a[11]||(a[11]=e=>o.orderData.drop_terminal=e),placeholder:"Select Drop Terminal"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.piers,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.pier_id,label:e.pier_name,value:e.pier_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"SCALE / HAZ"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderData.scale_hazmat,"onUpdate:modelValue":a[12]||(a[12]=e=>o.orderData.scale_hazmat=e),placeholder:"Select Scale / Haz"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.scaleHazmatOptions,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"SSL"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderData.ssl_id,"onUpdate:modelValue":a[13]||(a[13]=e=>o.orderData.ssl_id=e),placeholder:"Select SSL"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.sslOptions,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Loads Notes"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.orderData.load_notes,"onUpdate:modelValue":a[14]||(a[14]=e=>o.orderData.load_notes=e),type:"textarea",rows:3},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Size"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.orderData.container_size,"onUpdate:modelValue":a[15]||(a[15]=e=>o.orderData.container_size=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Vessel"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.orderData.vessel,"onUpdate:modelValue":a[16]||(a[16]=e=>o.orderData.vessel=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Load Number / PO"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.orderData.po_no,"onUpdate:modelValue":a[17]||(a[17]=e=>o.orderData.po_no=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Reference Number"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.orderData.reference_number,"onUpdate:modelValue":a[18]||(a[18]=e=>o.orderData.reference_number=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"DOC CUT"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{modelValue:o.orderData.doc_cut,"onUpdate:modelValue":a[19]||(a[19]=e=>o.orderData.doc_cut=e),type:"datetime"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])):(0,t.Q3)("",!0),2===o.step?((0,t.uX)(),(0,t.Wv)(m,{key:1,"label-width":"200px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Count"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.addOrderCount,"onUpdate:modelValue":a[20]||(a[20]=e=>o.addOrderCount=e),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Different PO"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.differentPO,"onUpdate:modelValue":a[21]||(a[21]=e=>o.differentPO=e)},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"Yes",value:"Y"}),(0,t.bF)(n,{label:"No",value:"N"})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Different Schedule date"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.differentScheduleDate,"onUpdate:modelValue":a[22]||(a[22]=e=>o.differentScheduleDate=e)},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"Yes",value:"Y"}),(0,t.bF)(n,{label:"No",value:"N"})])),_:1},8,["modelValue"])])),_:1})])),_:1})):(0,t.Q3)("",!0),3===o.step?((0,t.uX)(),(0,t.CE)(t.FK,{key:2},[(0,t.bF)(b,{data:o.poNumbers,border:""},{default:(0,t.k6)((()=>[(0,t.bF)(_,{label:"PO"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(c,{modelValue:e.po,"onUpdate:modelValue":a=>e.po=a},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(_,{label:"Schedule Date"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(p,{modelValue:e.sdate,"onUpdate:modelValue":a=>e.sdate=a,type:"date"},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),(0,t.bF)(g,{type:"primary",onClick:o.addPOEntry},{default:(0,t.k6)((()=>a[26]||(a[26]=[(0,t.eW)("Add PO")]))),_:1},8,["onClick"])],64)):(0,t.Q3)("",!0)])),_:1},8,["modelValue","onClose"])}var fe={props:{visible:Boolean},emits:["close","add-success"],setup(e,{emit:a}){const l=(0,t.KR)(1),o=(0,t.KR)(e.visible),r=(0,t.KR)([]),i=(0,t.KR)([]),d=(0,t.KR)([]),u=(0,t.KR)(1),n=(0,t.KR)("N"),s=(0,t.KR)("N"),c=(0,t.KR)([]),p=(0,t.KR)([{label:"None",value:0},{label:"ScaleTicket",value:1},{label:"Hazmat",value:2},{label:"ScaleTicketAndHazmat",value:3}]),m=(0,t.KR)([{id:1,name:"ACL"},{id:2,name:"CMA/CGM"},{id:3,name:"COSCO"},{id:4,name:"ECLK"},{id:5,name:"EVERGREEN"},{id:6,name:"HAMBURG SUD"},{id:7,name:"HAPAG"},{id:8,name:"HMM"},{id:9,name:"MAERSK"},{id:10,name:"MSC"},{id:11,name:"ONE"},{id:12,name:"OOCL"},{id:13,name:"SEALAND"},{id:14,name:"TRKU"},{id:15,name:"WANHAI"},{id:16,name:"YANGMING"},{id:17,name:"ZIM"},{id:18,name:"To be decided"}]);(0,t.wB)((()=>e.visible),(e=>{o.value=e}));const _=(0,t.KR)({}),b=()=>{_.value={order_id:0,order_type:"I",customer_id:null,customer_location:"",customer_address:"",delivery_address:"",booking_id:"",erd:"",cut_off:"",schedule_date:"",pick_terminal:"",drop_terminal:"",scale_hazmat:0,ssl_id:18,load_notes:"",container_size:"",vessel:"",po_no:"",reference_number:"",doc_cut:"",collection:0,payment:0,overtime_price:0,overtime_payment:0,load_year:0,load_week:0,paperwork_confirmation:!1,must_do:!1}},g=async()=>{try{const e=localStorage.getItem("authToken"),a=await te.A.post(`${oe}/Customer/List`,{Token:e,Timestamp:Date.now(),Sign:"string"});1e3===a.data.Code&&(r.value=a.data.customer_list)}catch(e){console.error("Error fetching customers:",e)}},k=async()=>{try{const e=localStorage.getItem("authToken"),a=await te.A.post(`${oe}/Customer/Pier`,{Token:e,Timestamp:Date.now(),Sign:"string",pier_id:0});1e3===a.data.Code&&(d.value=a.data.pier_list)}catch(e){console.error("Error fetching piers:",e)}},f=async()=>{if(_.value.customer_id)try{const e=localStorage.getItem("authToken"),a=await te.A.post(`${oe}/Customer/Location`,{Token:e,Timestamp:Date.now(),Sign:"string",customer_id:_.value.customer_id});1e3===a.data.Code&&(i.value=a.data.location_list)}catch(e){console.error("Error fetching locations:",e)}},v=()=>{const e=i.value.find((e=>e.location_id===_.value.customer_location));_.value.customer_address=e&&e.customer_address||""};(0,t.sV)((()=>{g(),k(),b()}));const h=()=>{c.value.push({po:"",sdate:""})},D=async()=>{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",order_data:{..._.value,must_do:!!_.value.must_do},add_order_count:u.value};"Y"===n.value||"Y"===s.value?(l.po_numbers=c.value,await te.A.post(`${oe}/Order/AddByDfPoSdate`,l)):await te.A.post(`${oe}/Order/Add`,l),a("add-success"),F()},F=()=>{b(),l.value=1,a("close")};return{step:l,dialogVisible:o,orderData:_,addOrderCount:u,differentPO:n,differentScheduleDate:s,poNumbers:c,customers:r,locations:i,piers:d,scaleHazmatOptions:p,sslOptions:m,addPOEntry:h,submitOrder:D,closeDialog:F,fetchCustomerLocations:f,updateCustomerAddress:v}}};const ve=(0,i.A)(fe,[["render",ke]]);var he=ve;const De=["src"],Fe={key:1},Ve=["src"],Ce={key:1},ye=["src"],Se={key:1},Te=["src"],Ae={key:1},Ee=["src"],we={key:1},Le=["src"],Ie={key:1};function Ue(e,a,l,o,r,i){const d=(0,t.g2)("el-option"),u=(0,t.g2)("el-select"),n=(0,t.g2)("el-form-item"),s=(0,t.g2)("el-input"),c=(0,t.g2)("el-date-picker"),p=(0,t.g2)("el-checkbox"),m=(0,t.g2)("el-form"),_=(0,t.g2)("el-button"),b=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(b,{modelValue:o.dialogVisible,"onUpdate:modelValue":a[29]||(a[29]=e=>o.dialogVisible=e),title:"Edit Order",width:"800px",onClose:o.closeDialog},{footer:(0,t.k6)((()=>[(0,t.bF)(_,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[30]||(a[30]=[(0,t.eW)("Cancel")]))),_:1},8,["onClick"]),(0,t.bF)(_,{type:"primary",onClick:o.submitEdit},{default:(0,t.k6)((()=>a[31]||(a[31]=[(0,t.eW)("Save")]))),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[(0,t.bF)(m,{model:l.orderData,"label-width":"180px"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"Load Type"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:o.orderForm.order_type,"onUpdate:modelValue":a[0]||(a[0]=e=>o.orderForm.order_type=e)},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"Import",value:"I"}),(0,t.bF)(d,{label:"Domestic",value:"D"}),(0,t.bF)(d,{label:"Export",value:"E"})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"Customer Name"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:o.orderForm.customer_id,"onUpdate:modelValue":a[1]||(a[1]=e=>o.orderForm.customer_id=e),filterable:"",onChange:o.fetchCustomerLocations},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.customers,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.customer_id,label:e.customer_name,value:e.customer_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,t.bF)(n,{label:"CUSTOMER / Location"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:o.orderForm.customer_location,"onUpdate:modelValue":a[2]||(a[2]=e=>o.orderForm.customer_location=e),filterable:"",onChange:o.updateCustomerAddress},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.locations,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.location_id,label:e.customer_location,value:e.location_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,t.bF)(n,{label:"ADDRESS DETAIL"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderForm.customer_address,"onUpdate:modelValue":a[3]||(a[3]=e=>o.orderForm.customer_address=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"Booking"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderForm.booking_id,"onUpdate:modelValue":a[4]||(a[4]=e=>o.orderForm.booking_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"CONTAINER #"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderForm.container,"onUpdate:modelValue":a[5]||(a[5]=e=>o.orderForm.container=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"PICK TERMINAL"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:o.orderForm.pick_terminal,"onUpdate:modelValue":a[6]||(a[6]=e=>o.orderForm.pick_terminal=e)},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.piers,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.pier_id,label:e.pier_name,value:e.pier_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"Pick Up Date"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.orderForm.pick_up_date,"onUpdate:modelValue":a[7]||(a[7]=e=>o.orderForm.pick_up_date=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"DROP TERMINAL"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:o.orderForm.drop_terminal,"onUpdate:modelValue":a[8]||(a[8]=e=>o.orderForm.drop_terminal=e)},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.piers,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.pier_id,label:e.pier_name,value:e.pier_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"Drop Off Date"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.orderForm.drop_off_date,"onUpdate:modelValue":a[9]||(a[9]=e=>o.orderForm.drop_off_date=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"SCALE / HAZ"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:o.orderForm.scale_hazmat,"onUpdate:modelValue":a[10]||(a[10]=e=>o.orderForm.scale_hazmat=e)},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.scaleHazmatOptions,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"ERD"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.orderForm.erd,"onUpdate:modelValue":a[11]||(a[11]=e=>o.orderForm.erd=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"CUT OFF"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.orderForm.cut_off,"onUpdate:modelValue":a[12]||(a[12]=e=>o.orderForm.cut_off=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"SSL"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:o.orderForm.ssl_id,"onUpdate:modelValue":a[13]||(a[13]=e=>o.orderForm.ssl_id=e)},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.sslOptions,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"SCHEDULE DATE"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.orderForm.schedule_date,"onUpdate:modelValue":a[14]||(a[14]=e=>o.orderForm.schedule_date=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"Loads Notes"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderForm.load_notes,"onUpdate:modelValue":a[15]||(a[15]=e=>o.orderForm.load_notes=e),type:"textarea",rows:"3"},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"Size"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderForm.container_size,"onUpdate:modelValue":a[16]||(a[16]=e=>o.orderForm.container_size=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"VESSEL"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderForm.vessel,"onUpdate:modelValue":a[17]||(a[17]=e=>o.orderForm.vessel=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"Load Number / PO"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderForm.po_no,"onUpdate:modelValue":a[18]||(a[18]=e=>o.orderForm.po_no=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"Reference Number"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderForm.Reference_Number,"onUpdate:modelValue":a[19]||(a[19]=e=>o.orderForm.Reference_Number=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"Paperwork Validation"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{modelValue:o.orderForm.paperwork_confirmation,"onUpdate:modelValue":a[20]||(a[20]=e=>o.orderForm.paperwork_confirmation=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"Load Status"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:o.orderForm.order_status,"onUpdate:modelValue":a[21]||(a[21]=e=>o.orderForm.order_status=e)},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.loadStatusOptions,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"Driver User ID"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{modelValue:o.orderForm.driver_user_id,"onUpdate:modelValue":a[22]||(a[22]=e=>o.orderForm.driver_user_id=e),filterable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.drivers,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.driver_user_id,label:e.driver_name,value:e.driver_user_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"Arrival Time"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.orderForm.arrival_time,"onUpdate:modelValue":a[23]||(a[23]=e=>o.orderForm.arrival_time=e),type:"datetime"},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"Arrival Photo"},{default:(0,t.k6)((()=>[o.orderForm.arrival_photo&&o.orderForm.arrival_photo.length?((0,t.uX)(),(0,t.CE)("img",{key:0,src:o.orderForm.arrival_photo[0],style:{"max-width":"400px","max-height":"800px"}},null,8,De)):((0,t.uX)(),(0,t.CE)("span",Fe,"No Arrival Photo"))])),_:1}),(0,t.bF)(n,{label:"Departure Time"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.orderForm.departure_time,"onUpdate:modelValue":a[24]||(a[24]=e=>o.orderForm.departure_time=e),type:"datetime"},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"Departure Photo"},{default:(0,t.k6)((()=>[o.orderForm.departure_photo&&o.orderForm.departure_photo.length?((0,t.uX)(),(0,t.CE)("img",{key:0,src:o.orderForm.departure_photo[0],style:{"max-width":"400px","max-height":"800px"}},null,8,Ve)):((0,t.uX)(),(0,t.CE)("span",Ce,"No Departure Photo"))])),_:1}),(0,t.bF)(n,{label:"Total Load Time"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderForm.total_load_time,"onUpdate:modelValue":a[25]||(a[25]=e=>o.orderForm.total_load_time=e),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"Overtime"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderForm.over_time,"onUpdate:modelValue":a[26]||(a[26]=e=>o.orderForm.over_time=e),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"Scale Ticket"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.orderForm.scale_ticket,"onUpdate:modelValue":a[27]||(a[27]=e=>o.orderForm.scale_ticket=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"BoL"},{default:(0,t.k6)((()=>[o.orderForm.bol_photo&&o.orderForm.bol_photo.length?((0,t.uX)(),(0,t.CE)("img",{key:0,src:o.orderForm.bol_photo[0],style:{"max-width":"400px","max-height":"800px"}},null,8,ye)):((0,t.uX)(),(0,t.CE)("span",Se,"No BoL Photo"))])),_:1}),(0,t.bF)(n,{label:"Pick up TIR"},{default:(0,t.k6)((()=>[o.orderForm.pickup_tir&&o.orderForm.pickup_tir.length?((0,t.uX)(),(0,t.CE)("img",{key:0,src:o.orderForm.pickup_tir[0],style:{"max-width":"400px","max-height":"800px"}},null,8,Te)):((0,t.uX)(),(0,t.CE)("span",Ae,"No Pickup TIR Photo"))])),_:1}),(0,t.bF)(n,{label:"Drop off TIR"},{default:(0,t.k6)((()=>[o.orderForm.dropoff_tir&&o.orderForm.dropoff_tir.length?((0,t.uX)(),(0,t.CE)("img",{key:0,src:o.orderForm.dropoff_tir[0],style:{"max-width":"400px","max-height":"800px"}},null,8,Ee)):((0,t.uX)(),(0,t.CE)("span",we,"No Drop off TIR Photo"))])),_:1}),(0,t.bF)(n,{label:"Void Out Ticket"},{default:(0,t.k6)((()=>[o.orderForm.void_out_ticket&&o.orderForm.void_out_ticket.length?((0,t.uX)(),(0,t.CE)("img",{key:0,src:o.orderForm.void_out_ticket[0],style:{"max-width":"400px","max-height":"800px"}},null,8,Le)):((0,t.uX)(),(0,t.CE)("span",Ie,"No Void Out Ticket Photo"))])),_:1}),(0,t.bF)(n,{label:"DOC CUT"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.orderForm.doc_cut,"onUpdate:modelValue":a[28]||(a[28]=e=>o.orderForm.doc_cut=e),type:"datetime"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var Pe={props:{visible:Boolean,orderData:Object},emits:["update:visible","update-success"],setup(e,{emit:a}){const l=(0,t.KR)(e.visible),o=(0,t.KR)({}),r=(0,t.KR)([]),i=(0,t.KR)([]),d=(0,t.KR)([]),u=(0,t.KR)([]),n=(0,t.KR)([{label:"None",value:0},{label:"ScaleTicket",value:1},{label:"Hazmat",value:2},{label:"ScaleTicketAndHazmat",value:3}]),s=(0,t.KR)([{id:1,name:"ACL"},{id:2,name:"CMA/CGM"},{id:3,name:"COSCO"},{id:4,name:"ECLK"},{id:5,name:"EVERGREEN"},{id:6,name:"HAMBURG SUD"},{id:7,name:"HAPAG"},{id:8,name:"HMM"},{id:9,name:"MAERSK"},{id:10,name:"MSC"},{id:11,name:"ONE"},{id:12,name:"OOCL"},{id:13,name:"SEALAND"},{id:14,name:"TRKU"},{id:15,name:"WANHAI"},{id:16,name:"YANGMING"},{id:17,name:"ZIM"},{id:18,name:"To be decided"}]),c=(0,t.KR)([{label:"Waiting For Vessel Date",value:0},{label:"Waiting For Driver To Confirm",value:1},{label:"Need Dispatch",value:2},{label:"Picking Up",value:3},{label:"On The Way To Loador/Unload",value:4},{label:"Loading Or Unloading",value:5},{label:"Dropping Off",value:6},{label:"Waiting For Validation",value:7},{label:"Cancelled",value:8},{label:"Dry Run",value:9},{label:"Complete",value:10},{label:"Needre Dispatch",value:11},{label:"Rejected Files",value:12},{label:"Void Out Ticket",value:13},{label:"Void Out Only",value:14}]),p=async()=>{try{const e=localStorage.getItem("authToken"),a=await te.A.post(`${oe}/Truck/TruckDriverList`,{Token:e,Timestamp:Date.now(),Sign:"string",truck_id:""});1e3===a.data.Code&&(u.value=a.data.driver_list)}catch(e){console.error("Error fetching drivers:",e)}},m=async()=>{try{const e=localStorage.getItem("authToken"),a=await te.A.post(`${oe}/Customer/List`,{Token:e,Timestamp:Date.now(),Sign:"string"});1e3===a.data.Code&&(r.value=a.data.customer_list)}catch(e){console.error("Error fetching customers:",e)}},_=async()=>{try{const e=localStorage.getItem("authToken"),a=await te.A.post(`${oe}/Customer/Pier`,{Token:e,Timestamp:Date.now(),Sign:"string",pier_id:0});1e3===a.data.Code&&(d.value=a.data.pier_list)}catch(e){console.error("Error fetching piers:",e)}},b=async()=>{if(o.value.customer_id)try{const e=localStorage.getItem("authToken"),a=await te.A.post(`${oe}/Customer/Location`,{Token:e,Timestamp:Date.now(),Sign:"string",customer_id:o.value.customer_id});1e3===a.data.Code&&(i.value=a.data.location_list)}catch(e){console.error("Error fetching locations:",e)}},g=()=>{const e=i.value.find((e=>e.location_id===o.value.customer_location));o.value.customer_address=e&&e.customer_address||""},k=async()=>{const e=localStorage.getItem("authToken"),l=await te.A.post(`${oe}/Order/Edit`,{Token:e,Timestamp:Date.now(),Sign:"string",order_data:o.value});1e3===l.data.Code?(a("update-success"),f()):alert("Edit failed")},f=()=>a("update:visible",!1);return(0,t.wB)((()=>e.visible),(a=>{l.value=a,a&&e.orderData&&(console.log("props.orderData:",e.orderData),o.value={...e.orderData},m(),_(),b(),p())}),{immediate:!0}),(0,t.sV)((()=>{m(),_(),p()})),{dialogVisible:l,orderForm:o,customers:r,locations:i,piers:d,drivers:u,scaleHazmatOptions:n,loadStatusOptions:c,sslOptions:s,fetchCustomerLocations:b,updateCustomerAddress:g,submitEdit:k,closeDialog:f}}};const Oe=(0,i.A)(Pe,[["render",Ue]]);var Re=Oe;function Ye(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-date-picker"),p=(0,t.g2)("el-checkbox"),m=(0,t.g2)("el-form"),_=(0,t.g2)("el-button"),b=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(b,{modelValue:o.dialogVisible,"onUpdate:modelValue":a[20]||(a[20]=e=>o.dialogVisible=e),title:"Batch Edit Orders",width:"600px",onClose:o.closeDialog},{footer:(0,t.k6)((()=>[(0,t.bF)(_,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[21]||(a[21]=[(0,t.eW)("Cancel")]))),_:1},8,["onClick"]),(0,t.bF)(_,{type:"primary",onClick:o.submitBatchEdit},{default:(0,t.k6)((()=>a[22]||(a[22]=[(0,t.eW)("Save")]))),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[(0,t.bF)(m,{model:o.batchForm,"label-width":"180px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Booking"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.batchForm.booking_id,"onUpdate:modelValue":a[0]||(a[0]=e=>o.batchForm.booking_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"CONTAINER #"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.batchForm.container,"onUpdate:modelValue":a[1]||(a[1]=e=>o.batchForm.container=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"PICK TERMINAL"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.batchForm.pick_terminal,"onUpdate:modelValue":a[2]||(a[2]=e=>o.batchForm.pick_terminal=e),clearable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.piers,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.pier_id,label:e.pier_name,value:e.pier_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Pick Up Date"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.batchForm.pick_up_date,"onUpdate:modelValue":a[3]||(a[3]=e=>o.batchForm.pick_up_date=e),format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"DROP TERMINAL"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.batchForm.drop_terminal,"onUpdate:modelValue":a[4]||(a[4]=e=>o.batchForm.drop_terminal=e),clearable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.piers,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.pier_id,label:e.pier_name,value:e.pier_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Drop Off Date"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.batchForm.drop_off_date,"onUpdate:modelValue":a[5]||(a[5]=e=>o.batchForm.drop_off_date=e),format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"SCALE / HAZ"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.batchForm.scale_hazmat,"onUpdate:modelValue":a[6]||(a[6]=e=>o.batchForm.scale_hazmat=e),clearable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.scaleHazmatOptions,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"ERD"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.batchForm.erd,"onUpdate:modelValue":a[7]||(a[7]=e=>o.batchForm.erd=e),format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"CUT OFF"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.batchForm.cut_off,"onUpdate:modelValue":a[8]||(a[8]=e=>o.batchForm.cut_off=e),format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"SSL"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.batchForm.ssl_id,"onUpdate:modelValue":a[9]||(a[9]=e=>o.batchForm.ssl_id=e),clearable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.sslOptions,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"SCHEDULE DATE"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.batchForm.schedule_date,"onUpdate:modelValue":a[10]||(a[10]=e=>o.batchForm.schedule_date=e),format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Loads Notes"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.batchForm.load_notes,"onUpdate:modelValue":a[11]||(a[11]=e=>o.batchForm.load_notes=e),type:"textarea",rows:"3"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Size"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.batchForm.container_size,"onUpdate:modelValue":a[12]||(a[12]=e=>o.batchForm.container_size=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"VESSEL"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.batchForm.vessel,"onUpdate:modelValue":a[13]||(a[13]=e=>o.batchForm.vessel=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Load Number / PO"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.batchForm.po_no,"onUpdate:modelValue":a[14]||(a[14]=e=>o.batchForm.po_no=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Reference Number"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.batchForm.Reference_Number,"onUpdate:modelValue":a[15]||(a[15]=e=>o.batchForm.Reference_Number=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Paperwork Validation"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{modelValue:o.batchForm.paperwork_confirmation,"onUpdate:modelValue":a[16]||(a[16]=e=>o.batchForm.paperwork_confirmation=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Load Status"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.batchForm.order_status,"onUpdate:modelValue":a[17]||(a[17]=e=>o.batchForm.order_status=e),clearable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.loadStatusOptions,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver User ID"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.batchForm.driver_user_id,"onUpdate:modelValue":a[18]||(a[18]=e=>o.batchForm.driver_user_id=e),clearable:"",filterable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.drivers,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.driver_user_id,label:e.driver_name,value:e.driver_user_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"DOC CUT"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.batchForm.doc_cut,"onUpdate:modelValue":a[19]||(a[19]=e=>o.batchForm.doc_cut=e),format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var Ne={props:{visible:Boolean,selectedOrders:Array},emits:["update:visible","batch-update-success"],setup(e,{emit:a}){const l=(0,t.KR)(e.visible);(0,t.wB)((()=>e.visible),(e=>{l.value=e}));const o=(0,t.KR)({}),r=(0,t.KR)([]),i=(0,t.KR)([{label:"None",value:0},{label:"ScaleTicket",value:1},{label:"Hazmat",value:2},{label:"ScaleTicketAndHazmat",value:3}]),d=(0,t.KR)([{label:"Waiting For Vessel Date",value:"0"},{label:"Waiting For Driver To Confirm",value:"1"},{label:"Need Dispatch",value:"2"},{label:"Picking Up",value:"3"},{label:"On The Way To Loador/Unload",value:"4"},{label:"Loading Or Unloading",value:"5"},{label:"Dropping Off",value:"6"},{label:"Waiting For Validation",value:"7"},{label:"Cancelled",value:"8"},{label:"Dry Run",value:"9"},{label:"Complete",value:"10"},{label:"Needre Dispatch",value:"11"},{label:"Rejected Files",value:"12"},{label:"Void Out Ticket",value:"13"},{label:"Void Out Only",value:"14"}]),u=(0,t.KR)([]),n=(0,t.KR)([]),s=async()=>{const e=localStorage.getItem("authToken"),a=await te.A.post(`${oe}/Truck/TruckDriverList`,{Token:e,Timestamp:Date.now(),Sign:"string",truck_id:""});1e3===a.data.Code&&(u.value=a.data.driver_list)},c=async()=>{const e=localStorage.getItem("authToken"),a=await te.A.post(`${oe}/Customer/Pier`,{Token:e,Timestamp:Date.now(),Sign:"string",pier_id:0});1e3===a.data.Code&&(n.value=a.data.pier_list)},p=()=>{r.value=[{id:1,name:"ACL"},{id:2,name:"CMA/CGM"},{id:3,name:"COSCO"},{id:4,name:"ECLK"},{id:5,name:"EVERGREEN"},{id:6,name:"HAMBURG SUD"},{id:7,name:"HAPAG"},{id:8,name:"HMM"},{id:9,name:"MAERSK"},{id:10,name:"MSC"},{id:11,name:"ONE"},{id:12,name:"OOCL"},{id:13,name:"SEALAND"},{id:14,name:"TRKU"},{id:15,name:"WANHAI"},{id:16,name:"YANGMING"},{id:17,name:"ZIM"},{id:18,name:"To be decided"}]};(0,t.sV)((()=>{s(),c(),p()}));const m=[{label:"Booking",prop:"booking_id",type:"input"},{label:"CONTAINER #",prop:"container",type:"input"},{label:"PICK TERMINAL",prop:"pick_terminal",type:"select",options:n},{label:"Pick Up Date",prop:"pick_up_date",type:"date"},{label:"DROP TERMINAL",prop:"drop_terminal",type:"select",options:n},{label:"Drop Off Date",prop:"drop_off_date",type:"date"},{label:"SCALE / HAZ",prop:"scale_hazmat",type:"select",options:i},{label:"ERD",prop:"erd",type:"date"},{label:"CUT OFF",prop:"cut_off",type:"date"},{label:"SSL",prop:"ssl_id",type:"select",options:r},{label:"SCHEDULE DATE",prop:"schedule_date",type:"date"},{label:"Loads Notes",prop:"load_notes",type:"input"},{label:"Size",prop:"container_size",type:"input"},{label:"VESSEL",prop:"vessel",type:"input"},{label:"Load Number / PO",prop:"po_no",type:"input"},{label:"Reference Number",prop:"Reference_Number",type:"input"},{label:"Paperwork Validation",prop:"paperwork_confirmation",type:"checkbox"},{label:"Load Status",prop:"order_status",type:"select",options:d},{label:"Driver User ID",prop:"driver_user_id",type:"select",options:u},{label:"DOC CUT",prop:"doc_cut",type:"date"}],_=async()=>{const l=localStorage.getItem("authToken"),t={};Object.entries(o.value).forEach((([e,a])=>{void 0!==a&&null!==a&&""!==a&&(t[e]=a)}));const r={Token:l,Timestamp:Date.now(),Sign:"string",orders:e.selectedOrders,data:t};console.log("🚀 送出的資料：",JSON.stringify(r,null,2));try{const e=await te.A.post(`${oe}/Order/EditList`,r);1e3===e.data.Code?(a("batch-update-success"),b()):(alert("Batch Edit failed"),console.log("⚠️ API 回應錯誤：",e.data))}catch(i){console.error("❌ Batch Edit Error:",i),alert("Batch Edit Error")}},b=()=>a("update:visible",!1);return{dialogVisible:l,batchForm:o,fields:m,submitBatchEdit:_,closeDialog:b,piers:n,sslOptions:r,loadStatusOptions:d,scaleHazmatOptions:i,drivers:u}}};const xe=(0,i.A)(Ne,[["render",Ye]]);var Me=xe;C().extend(ge());var We={components:{OrderAddDialog:he,OrderEditDialog:Re,OrderBatchEditDialog:Me},setup(){const e=e=>{const a={I:"Import",D:"Domestic",E:"Export"};return a[e.order?.order_type]||"Unknown"};return{formatOrderType:e}},data(){return{addDialogVisible:!1,editDialogVisible:!1,batchEditDialogVisible:!1,selectedOrder:null,orderList:[],selectedOrders:[],searchQuery:"",loading:!1,currentPage:1,pageSize:100,showFilter:!1,filter:{scheduleDate:null,erd:null,cutOff:null,docCut:null,loadType:"",loadId:"",driverUserId:"",loadStatus:"",booking:"",container:"",customerLocation:"",addressDetail:"",loadNotes:"",loadNumberPo:"",pickTerminal:"",dropTerminal:"",vessel:"",customerName:"",ssl:"",scaleHaz:"",size:""},drivers:[],customers:[],piers:[],locations:[],scaleHazmatOptions:[{label:"None",value:0},{label:"ScaleTicket",value:1},{label:"Hazmat",value:2},{label:"ScaleTicketAndHazmat",value:3}],sslOptions:[{id:1,name:"ACL"},{id:2,name:"CMA/CGM"},{id:3,name:"COSCO"},{id:4,name:"ECLK"},{id:5,name:"EVERGREEN"},{id:6,name:"HAMBURG SUD"},{id:7,name:"HAPAG"},{id:8,name:"HMM"},{id:9,name:"MAERSK"},{id:10,name:"MSC"},{id:11,name:"ONE"},{id:12,name:"OOCL"},{id:13,name:"SEALAND"},{id:14,name:"TRKU"},{id:15,name:"WANHAI"},{id:16,name:"YANGMING"},{id:17,name:"ZIM"},{id:18,name:"To be decided"}],loadStatusOptions:[{label:"Waiting For Vessel Date",value:0},{label:"Waiting For Driver To Confirm",value:1},{label:"Need Dispatch",value:2},{label:"Picking Up",value:3},{label:"On The Way To Loador/Unload",value:4},{label:"Loading Or Unloading",value:5},{label:"Dropping Off",value:6},{label:"Waiting For Validation",value:7},{label:"Cancelled",value:8},{label:"Dry Run",value:9},{label:"Complete",value:10},{label:"Needre Dispatch",value:11},{label:"Rejected Files",value:12},{label:"Void Out Ticket",value:13},{label:"Void Out Only",value:14}]}},computed:{...(0,F.aH)(["authToken"]),filteredOrders(){if(!this.searchQuery)return this.orderList;const e=this.searchQuery.toLowerCase();return this.orderList.filter((a=>a.order.customer_id_name?.toLowerCase().includes(e)||a.order.order_id?.toString().includes(e)))},paginatedOrders(){const e=(this.currentPage-1)*this.pageSize;return this.filteredOrders.slice(e,e+this.pageSize)}},methods:{...(0,F.i0)(["checkTokenExpiration"]),formatScaleHaz(e){const a={0:"None",1:"ScaleTicket",2:"Hazmat",3:"ScaleTicketAndHazmat"};return a[e.order.scale_hazmat]||"Unknown"},clearFilters(){Object.keys(this.filter).forEach((e=>{this.filter[e]=Array.isArray(this.filter[e])?null:""})),this.searchQuery="",this.locations=[],this.filter.addressDetail=""},async fetchCustomerLocations(){if(!this.filter.customerName)return this.locations=[],this.filter.customerLocation="",void(this.filter.addressDetail="");const e=localStorage.getItem("authToken");try{const a=await te.A.post(`${oe}/Customer/Location`,{Token:e,Timestamp:Date.now(),Sign:"string",customer_id:this.filter.customerName});1e3===a.data.Code?this.locations=a.data.location_list:this.locations=[],this.filter.customerLocation="",this.filter.addressDetail=""}catch(a){console.error("Error fetching locations:",a),this.locations=[],this.filter.customerLocation="",this.filter.addressDetail=""}},updateCustomerAddress(){const e=this.locations.find((e=>e.location_id===this.filter.customerLocation));this.filter.addressDetail=e&&(e.customer_address||e.address_detail||e.address)||""},async handleEdit(e){const a=localStorage.getItem("authToken");try{const l=await te.A.post(`${oe}/Order/List`,{Token:a,Timestamp:Date.now(),Sign:"string",order_id:String(e.order.order_id),year:0,week:0});if(1e3===l.data.Code&&l.data.order_list.length>0){const{order:e,detail:a}=l.data.order_list[0],t={...e,...a,arrival_photo:a.arrival_photo?JSON.parse(a.arrival_photo):[],departure_photo:a.departure_photo?JSON.parse(a.departure_photo):[],bol_photo:a.bol_path?JSON.parse(a.bol_path):[],pickup_tir:a.tir_pu_empty_path?JSON.parse(a.tir_pu_empty_path):[],dropoff_tir:a.tir_drop_path?JSON.parse(a.tir_drop_path):[],void_out_ticket:a.void_ticket_path?JSON.parse(a.void_ticket_path):[]};console.log("完整的 Order 資料:",t),this.selectedOrder=t,this.editDialogVisible=!0}else alert("Failed to fetch order details.")}catch(l){console.error("Error fetching order detail:",l),alert("An error occurred. Please try again later.")}},yourRefreshMethod(){this.fetchOrders()},openAddDialog(){this.addDialogVisible=!0},closeAddDialog(){this.addDialogVisible=!1},handleAddSuccess(){this.fetchOrders(),this.closeAddDialog()},openBatchEdit(){this.selectedOrders.length?this.batchEditDialogVisible=!0:alert("Please select at least one order.")},async searchOrders(){this.loading=!0;const e=localStorage.getItem("authToken");if(!e)return alert("Session expired, please log in again."),void this.$router.push("/login");try{const a={schedule_date_start:this.filter.scheduleDate?.[0],schedule_date_end:this.filter.scheduleDate?.[1],erd_start:this.filter.erd?.[0],erd_end:this.filter.erd?.[1],cut_off_start:this.filter.cutOff?.[0],cut_off_end:this.filter.cutOff?.[1],doc_cut_start:this.filter.docCut?.[0],doc_cut_end:this.filter.docCut?.[1],order_type:this.filter.loadType,load_id:this.filter.loadId,driver_user_id:this.filter.driverUserId,order_status:this.filter.loadStatus,booking:this.filter.booking,container:this.filter.container,customer_id:this.filter.customerName,customer_location:this.filter.customerLocation,address_detail:this.filter.addressDetail,load_notes:this.filter.loadNotes,po_no:this.filter.loadNumberPo,pick_terminal:this.filter.pickTerminal,drop_terminal:this.filter.dropTerminal,vessel:this.filter.vessel,ssl:this.filter.ssl,scale_hazmat:this.filter.scaleHaz,container_size:this.filter.size},l=Object.fromEntries(Object.entries(a).filter((([,e])=>e))),t={Token:e,Timestamp:Date.now(),Sign:"string",data:l};console.log("🔹 發送 API payload:",JSON.stringify(t,null,2));const o=await te.A.post(`${oe}/Order/SearchV2`,t);1e3===o.data.Code?(this.orderList=o.data.order_list,this.currentPage=1,this.$message.success("Search completed successfully!")):(this.orderList=[],alert("No results found."))}catch(a){console.error("❌ 搜索 API 請求失敗:",a),alert("An error occurred. Please try again later.")}finally{this.loading=!1}},async fetchOrders(){this.loading=!0;const e=localStorage.getItem("authToken");if(!e)return alert("Session expired, please log in again."),void this.$router.push("/login");const a=C()().startOf("isoWeek").format("YYYY-MM-DD"),l=C()().endOf("isoWeek").format("YYYY-MM-DD");try{const t=await te.A.post(`${oe}/Order/ListByDate`,{Token:e,Timestamp:Date.now(),Sign:"string",start_date:a,end_date:l});this.orderList=1e3===t.data.Code?t.data.order_list:[]}catch(t){console.error("Error fetching orders:",t),this.orderList=[]}finally{this.loading=!1}},handleSelectionChange(e){this.selectedOrders=e.map((e=>e.order.order_id))},async cancelOrder(){if(this.selectedOrders.length)try{const e=localStorage.getItem("authToken"),a={Token:e,Timestamp:Date.now(),Sign:"string",orders:this.selectedOrders},l=await te.A.post(`${oe}/Order/Cancel`,a);1e3===l.data.Code?(alert("Order(s) canceled successfully!"),this.fetchOrders()):alert("Failed to cancel orders.")}catch(e){console.error("Cancel API Error:",e)}else alert("Please select orders to cancel first!")},async fetchDrivers(){const e=await te.A.post(`${oe}/Truck/TruckDriverList`,{Token:this.authToken,Timestamp:Date.now(),Sign:"string",truck_id:""});this.drivers=e.data.driver_list||[]},async fetchCustomers(){const e=await te.A.post(`${oe}/Customer/List`,{Token:this.authToken,Timestamp:Date.now(),Sign:"string"});this.customers=e.data.customer_list||[]},async fetchPiers(){const e=await te.A.post(`${oe}/Customer/Pier`,{Token:this.authToken,Timestamp:Date.now(),Sign:"string",pier_id:0});1e3===e.data.Code?this.piers=e.data.pier_list||[]:this.piers=[]},getPierName(e){const a=this.piers.find((a=>Number(a.pier_id)===Number(e)));return a?a.pier_name:e?e.toString():"Unknown"}},watch:{"filter.customerName"(){this.filter.customerLocation="",this.filter.addressDetail="",this.fetchCustomerLocations()},"filter.customerLocation"(e){e?this.updateCustomerAddress():this.filter.addressDetail=""}},mounted(){this.fetchOrders(),this.fetchDrivers(),this.fetchCustomers(),this.fetchPiers()}};const Ke=(0,i.A)(We,[["render",_e],["__scopeId","data-v-30e64bfa"]]);var Xe=Ke;const ze={class:"container"},He={class:"search-container"},Ge={class:"button-container"};function $e(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-button"),s=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-table"),p=(0,t.g2)("CustomerEditDialog"),m=(0,t.g2)("CustomerLocationDialog"),_=(0,t.g2)("CustomerAddDialog");return(0,t.uX)(),(0,t.CE)("div",ze,[a[7]||(a[7]=(0,t.Lk)("h2",null,"Customer",-1)),(0,t.Lk)("div",He,[(0,t.bF)(d,{modelValue:o.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchQuery=e),placeholder:"Search Customer Name or Customer User ID",clearable:""},null,8,["modelValue"])]),(0,t.bF)(u,{background:"","current-page":o.currentPage,"page-size":50,total:o.filteredCustomers.length,layout:"prev, pager, next",class:"pagination-container top-pagination",onCurrentChange:o.handlePageChange},null,8,["current-page","total","onCurrentChange"]),(0,t.Lk)("div",Ge,[(0,t.bF)(n,{type:"primary",size:"small",onClick:o.addCustomer},{default:(0,t.k6)((()=>a[4]||(a[4]=[(0,t.eW)("Add")]))),_:1},8,["onClick"])]),(0,t.bF)(c,{data:o.paginatedCustomers,style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Actions",width:"200"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(n,{type:"primary",size:"small",onClick:a=>o.openEditDialog(e)},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Edit")]))),_:2},1032,["onClick"]),(0,t.bF)(n,{type:"success",size:"small",onClick:a=>o.openLocationDialog(e)},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("Location")]))),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(s,{label:"Customer Name",prop:"customer_name"}),(0,t.bF)(s,{label:"Customer User ID",prop:"customer_user_id"})])),_:1},8,["data"]),(0,t.bF)(u,{background:"","current-page":o.currentPage,"page-size":50,total:o.filteredCustomers.length,layout:"prev, pager, next",class:"pagination-container bottom-pagination",onCurrentChange:o.handlePageChange},null,8,["current-page","total","onCurrentChange"]),o.editDialogVisible?((0,t.uX)(),(0,t.Wv)(p,{key:0,visible:o.editDialogVisible,customerData:o.selectedCustomer,onUpdateSuccess:o.handleUpdateSuccess,onClose:a[1]||(a[1]=e=>o.editDialogVisible=!1)},null,8,["visible","customerData","onUpdateSuccess"])):(0,t.Q3)("",!0),o.locationDialogVisible?((0,t.uX)(),(0,t.Wv)(m,{key:1,visible:o.locationDialogVisible,customerId:o.selectedCustomer?.customer_id,onClose:a[2]||(a[2]=e=>o.locationDialogVisible=!1)},null,8,["visible","customerId"])):(0,t.Q3)("",!0),o.addDialogVisible?((0,t.uX)(),(0,t.Wv)(_,{key:2,visible:o.addDialogVisible,onAddSuccess:o.handleAddSuccess,onClose:a[3]||(a[3]=e=>o.addDialogVisible=!1)},null,8,["visible","onAddSuccess"])):(0,t.Q3)("",!0)])}var Be=l(1219);function Qe(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-form"),s=(0,t.g2)("el-button"),c=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(c,{title:"Customer Add",modelValue:o.dialogVisible,"onUpdate:modelValue":a[3]||(a[3]=e=>o.dialogVisible=e),width:"600px",onClose:o.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(s,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[4]||(a[4]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(s,{type:"primary",onClick:o.submitAdd,loading:o.loading},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(n,{ref:"formRef",model:o.formData,"label-width":"180px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Customer Name",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.customer_name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.customer_name=e),placeholder:"Enter Customer Name"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Customer User ID",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.customer_user_id,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.customer_user_id=e),placeholder:"Enter Customer User ID",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Password",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.customer_user_pwd,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.customer_user_pwd=e),type:"password",placeholder:"Enter Password","show-password":"",autocomplete:"new-password"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var qe={props:{visible:Boolean},emits:["update:visible","add-success"],setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||d()}}),o=(0,t.KR)(!1),r=(0,t.KR)({customer_name:"",customer_user_id:"",customer_user_pwd:""}),i=async()=>{if(r.value.customer_name&&r.value.customer_user_id&&r.value.customer_user_pwd){o.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",customer:{...r.value}};console.log("🚀 API 傳遞的資料:",l);const t=await te.A.post(`${oe}/Customer/Add`,l);1e3===t.data.Code?(Be.nk.success("Customer added successfully!"),a("add-success"),d()):Be.nk.error("Add failed: "+t.data.Code)}catch(e){console.error("API error:",e),Be.nk.error("API request failed.")}finally{o.value=!1}}else Be.nk.error("All fields are required!")},d=()=>{r.value={customer_name:"",customer_user_id:"",customer_user_pwd:""},a("close")};return{dialogVisible:l,formData:r,loading:o,submitAdd:i,closeDialog:d}}};const je=(0,i.A)(qe,[["render",Qe],["__scopeId","data-v-09cf67a8"]]);var Ze=je;function Je(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-form"),s=(0,t.g2)("el-button"),c=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(c,{title:"Customer Edit",modelValue:o.dialogVisible,"onUpdate:modelValue":a[3]||(a[3]=e=>o.dialogVisible=e),width:"600px",onClose:o.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(s,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[4]||(a[4]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(s,{type:"primary",onClick:o.submitEdit,loading:o.loading},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(n,{ref:"formRef",model:o.formData,"label-width":"180px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Customer Name",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.customer_name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.customer_name=e),placeholder:"Enter Customer Name"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Customer User ID",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.customer_user_id,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.customer_user_id=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Password"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.customer_user_pwd,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.customer_user_pwd=e),type:"password",placeholder:"Enter New Password (Leave Blank to Keep Old Password)","show-password":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var ea={props:{visible:Boolean,customerData:Object},emits:["update:visible","update-success"],setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||u()}}),o=(0,t.KR)(!1),r=localStorage.getItem("authUser")||"liwang",i=(0,t.KR)({customer_id:"",customer_name:"",customer_user_id:"",customer_user_pwd:""});(0,t.wB)((()=>e.customerData),(e=>{e&&(i.value={customer_id:e.customer_id,customer_name:e.customer_name,customer_user_id:e.customer_user_id,customer_user_pwd:""})}),{immediate:!0});const d=async()=>{if(i.value.customer_name){o.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",customer:{customer_id:i.value.customer_id,customer_name:i.value.customer_name,customer_user_id:i.value.customer_user_id,updated_at:Date.now(),updated_user_id:r}};i.value.customer_user_pwd&&(l.customer.customer_user_pwd=i.value.customer_user_pwd),console.log("🚀 API 更新傳遞的資料:",l);const t=await te.A.post(`${oe}/Customer/Update`,l);1e3===t.data.Code?(Be.nk.success("Customer updated successfully!"),a("update-success"),u()):Be.nk.error("Update failed: "+t.data.Code)}catch(e){console.error("API error:",e),Be.nk.error("API request failed.")}finally{o.value=!1}}else Be.nk.error("Customer Name is required!")},u=()=>{a("close")};return{dialogVisible:l,formData:i,loading:o,submitEdit:d,closeDialog:u}}};const aa=(0,i.A)(ea,[["render",Je],["__scopeId","data-v-0a0a98e8"]]);var la=aa;const ta={class:"dialog-container"},oa={class:"button-container"};function ra(e,a,l,o,r,i){const d=(0,t.g2)("el-button"),u=(0,t.g2)("el-table-column"),n=(0,t.g2)("el-table"),s=(0,t.g2)("CustomerLocationAddDialog"),c=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(c,{title:"Location",modelValue:o.dialogVisible,"onUpdate:modelValue":a[1]||(a[1]=e=>o.dialogVisible=e),width:"80%",onOpen:o.fetchLocations,onClose:o.closeDialog,"lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(d,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[3]||(a[3]=[(0,t.eW)("Close")]))),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",ta,[(0,t.Lk)("div",oa,[(0,t.bF)(d,{type:"primary",size:"small",onClick:o.openAddLocationDialog},{default:(0,t.k6)((()=>a[2]||(a[2]=[(0,t.eW)(" Add Location ")]))),_:1},8,["onClick"])]),(0,t.bF)(n,{data:o.locationList,border:"",stripe:""},{default:(0,t.k6)((()=>[(0,t.bF)(u,{prop:"customer_location",label:"CUSTOMER / Location",width:"200"}),(0,t.bF)(u,{prop:"customer_address",label:"ADDRESS DETAIL",width:"300"}),(0,t.bF)(u,{prop:"Void_Price",label:"Void Price",width:"120"}),(0,t.bF)(u,{prop:"SPLIT",label:"Split",width:"100"}),(0,t.bF)(u,{prop:"TRIAXLE",label:"Triaxle",width:"100"}),(0,t.bF)(u,{prop:"PP_CTF",label:"PP CTF",width:"100"}),(0,t.bF)(u,{prop:"LAYOVER",label:"Layover",width:"100"}),(0,t.bF)(u,{prop:"SCALE_TICKET",label:"Scale Ticket",width:"120"}),(0,t.bF)(u,{prop:"SCALE_TICKET_HAZMAT",label:"Scale Ticket Hazmat",width:"150"})])),_:1},8,["data"])]),o.addLocationDialogVisible?((0,t.uX)(),(0,t.Wv)(s,{key:0,visible:o.addLocationDialogVisible,customerList:e.customerList,onClose:a[0]||(a[0]=e=>o.addLocationDialogVisible=!1),onAddSuccess:o.fetchLocations},null,8,["visible","customerList","onAddSuccess"])):(0,t.Q3)("",!0)])),_:1},8,["modelValue","onOpen","onClose"])}const ia={class:"dialog-container"},da={class:"scrollable-content"};function ua(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-input-number"),s=(0,t.g2)("el-col"),c=(0,t.g2)("el-row"),p=(0,t.g2)("el-form"),m=(0,t.g2)("el-button"),_=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(_,{title:"Add Location",modelValue:o.dialogVisible,"onUpdate:modelValue":a[2]||(a[2]=e=>o.dialogVisible=e),width:"600px",onClose:o.closeDialog,"lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(m,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[3]||(a[3]=[(0,t.eW)("Cancel")]))),_:1},8,["onClick"]),(0,t.bF)(m,{type:"primary",onClick:o.submitAdd},{default:(0,t.k6)((()=>a[4]||(a[4]=[(0,t.eW)("Save")]))),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",ia,[(0,t.bF)(p,{ref:"formRef",model:o.formData,"label-width":"180px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Customer Location",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.customer_location,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.customer_location=e),placeholder:"Enter Location"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Address",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.customer_address,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.customer_address=e),placeholder:"Enter Address"},null,8,["modelValue"])])),_:1}),(0,t.Lk)("div",da,[(0,t.bF)(c,{gutter:20},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.numberFields,((e,a)=>((0,t.uX)(),(0,t.Wv)(s,{span:12,key:a},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:a},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.formData[e],"onUpdate:modelValue":a=>o.formData[e]=a,min:0},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])])),_:2},1024)))),128))])),_:1})])])),_:1},8,["model"])])])),_:1},8,["modelValue","onClose"])}var na={props:{visible:Boolean,customerList:{type:Array,default:()=>[]}},emits:["close","add-success"],setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||u()}}),o=(0,t.KR)({customer_id:0,customer_location:"",customer_address:"",customer_rate:0,driver_rate:0,FUEL_SURCHARGE:0,HAZ:0,HAZ_BATTERIES:0,INSPECTION:0,DROP_FEE:0,CHASSIS:0,STORAGE:0,CHASSIS_STORAGE:0,REEFER:0,OVERWEIGHT:0,PREPULL:0,BOLT_SEAL:0,EXAM_SITE_EXTRA:0,Void_Price:0,SPLIT:0,TRIAXLE:0,PP_CTF:0,LAYOVER:0,SCALE_TICKET:0,SCALE_TICKET_HAZMAT:0}),r=(0,t.KR)({"Customer Rate":"customer_rate","Driver Rate":"driver_rate","Fuel Surcharge":"FUEL_SURCHARGE",Hazmat:"HAZ","Haz Batteries":"HAZ_BATTERIES",Inspection:"INSPECTION","Drop Fee":"DROP_FEE",Chassis:"CHASSIS",Storage:"STORAGE","Chassis + Storage":"CHASSIS_STORAGE",Reefer:"REEFER",Overweight:"OVERWEIGHT",Prepull:"PREPULL","Bolt Seal":"BOLT_SEAL","Exam Site Extra":"EXAM_SITE_EXTRA","Void Price":"Void_Price",Split:"SPLIT",Triaxle:"TRIAXLE","PP CTF":"PP_CTF",Layover:"LAYOVER","Scale Ticket":"SCALE_TICKET","Scale Ticket Hazmat":"SCALE_TICKET_HAZMAT"}),i=()=>{if(Array.isArray(e.customerList)&&e.customerList.length>0){const a=Math.max(...e.customerList.map((e=>e.customer_id||0)));o.value.customer_id=a+1}else o.value.customer_id=1;console.log("✅ 設定 customer_id:",o.value.customer_id)};(0,t.wB)((()=>e.visible),(e=>{e&&i()}));const d=async()=>{if(o.value.customer_location&&o.value.customer_address)try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",location:{...o.value}};console.log("🚀 送出 API 資料:",l);const t=await te.A.post(`${oe}/Customer/LocationAdd`,l);1e3===t.data.Code?(Be.nk.success("Location added successfully!"),a("add-success"),u()):Be.nk.error("Add failed: "+t.data.Code)}catch(e){console.error("❌ API error:",e),Be.nk.error("API request failed.")}else Be.nk.error("Location Name and Address are required!")},u=()=>{a("close")};return{dialogVisible:l,formData:o,numberFields:r,submitAdd:d,closeDialog:u}}};const sa=(0,i.A)(na,[["render",ua]]);var ca=sa,pa={props:{visible:Boolean,customerId:Number},emits:["update:visible"],components:{CustomerLocationAddDialog:ca},setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||n()}}),o=(0,t.KR)([]),r=(0,t.KR)(!1),i=async()=>{if(e.customerId){console.log("📡 Fetching locations for customerId:",e.customerId);try{const a=localStorage.getItem("authToken");if(!a)return void alert("Session expired, please log in again.");const l=await te.A.post(`${oe}/Customer/Location`,{Token:a,Timestamp:Date.now(),Sign:"string",customer_id:e.customerId});1e3===l.data.Code?o.value=l.data.location_list||[]:(console.error("⚠️ API Error:",l.data),o.value=[])}catch(a){console.error("❌ API Request Failed:",a)}}else console.warn("❌ customerId 未提供，無法請求 API")};(0,t.nT)((()=>{e.visible&&i()}));const d=()=>{r.value=!0},u=()=>{r.value=!1,i()},n=()=>{a("update:visible",!1)};return{dialogVisible:l,locationList:o,fetchLocations:i,addLocationDialogVisible:r,openAddLocationDialog:d,handleAddSuccess:u,closeDialog:n}}};const ma=(0,i.A)(pa,[["render",ra],["__scopeId","data-v-139a3a92"]]);var _a=ma,ba={components:{CustomerAddDialog:Ze,CustomerEditDialog:la,CustomerLocationDialog:_a},setup(){const e=(0,t.KR)([]),a=(0,t.KR)(""),l=(0,t.KR)(1),o=(0,t.KR)(!1),r=(0,t.KR)(!1),i=(0,t.KR)(!1),d=(0,t.KR)(null),u=async()=>{try{const a=localStorage.getItem("authToken"),l=await te.A.post(`${oe}/Customer/List`,{Token:a,Timestamp:Date.now(),Sign:"string"});1e3===l.data.Code?e.value=l.data.customer_list.map((e=>({customer_id:e.customer_id,customer_name:e.customer_name,customer_user_id:e.customer_user_id,updated_at:e.updated_at,updated_user_id:e.updated_user_id}))):Be.nk.error("Failed to fetch customer data.")}catch(a){console.error("Error fetching customer list:",a),Be.nk.error("API Request Failed.")}},n=(0,t.EW)((()=>a.value?e.value.filter((e=>{const l=e.customer_name?e.customer_name.toLowerCase():"",t=e.customer_user_id?e.customer_user_id.toLowerCase():"",o=a.value.toLowerCase();return l.includes(o)||t.includes(o)})):e.value)),s=(0,t.EW)((()=>n.value.slice(50*(l.value-1),50*l.value))),c=e=>{d.value={...e},o.value=!0},p=e=>{console.log("Opening Location Dialog",e),d.value=e,i.value=!0},m=()=>{r.value=!0},_=()=>{o.value=!1,u()},b=()=>{r.value=!1,u()};return(0,t.sV)((()=>{u()})),{customerList:e,searchQuery:a,currentPage:l,filteredCustomers:n,paginatedCustomers:s,handlePageChange:e=>l.value=e,editDialogVisible:o,addDialogVisible:r,locationDialogVisible:i,selectedCustomer:d,openEditDialog:c,openLocationDialog:p,addCustomer:m,handleUpdateSuccess:_,handleAddSuccess:b}}};const ga=(0,i.A)(ba,[["render",$e],["__scopeId","data-v-772aee0b"]]);var ka=ga;const fa={class:"container"},va={class:"header-container"},ha={class:"stats-table"},Da={class:"search-container"},Fa={class:"button-container"};function Va(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-button"),s=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-table"),p=(0,t.g2)("ChassisEditDialog"),m=(0,t.g2)("ChassisAddDialog");return(0,t.uX)(),(0,t.CE)("div",fa,[(0,t.Lk)("div",va,[a[8]||(a[8]=(0,t.Lk)("h2",null,"Chassis Management",-1)),(0,t.Lk)("div",ha,[a[7]||(a[7]=(0,t.Lk)("h3",null,"Chassis Statistics",-1)),(0,t.Lk)("table",null,[a[6]||(a[6]=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"Category"),(0,t.Lk)("th",null,"Count")])],-1)),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.trailerCounts,((e,a)=>((0,t.uX)(),(0,t.CE)("tr",{key:a},[(0,t.Lk)("td",null,(0,t.v_)(e.name),1),(0,t.Lk)("td",null,(0,t.v_)(e.count),1)])))),128))])])])]),(0,t.Lk)("div",Da,[(0,t.bF)(d,{modelValue:o.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchQuery=e),placeholder:"Search Chassis Plate",clearable:""},null,8,["modelValue"])]),(0,t.bF)(u,{background:"",modelValue:o.currentPage,"onUpdate:modelValue":a[1]||(a[1]=e=>o.currentPage=e),"page-size":50,total:o.filteredChassis.length,layout:"prev, pager, next",class:"pagination-container top-pagination",onCurrentChange:o.handlePageChange},null,8,["modelValue","total","onCurrentChange"]),(0,t.Lk)("div",Fa,[(0,t.bF)(n,{type:"primary",size:"small",onClick:o.addChassis},{default:(0,t.k6)((()=>a[9]||(a[9]=[(0,t.eW)("Add")]))),_:1},8,["onClick"])]),(0,t.bF)(c,{data:o.paginatedChassis,style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Actions",width:"150"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(n,{type:"primary",size:"small",onClick:a=>o.openEditDialog(e)},{default:(0,t.k6)((()=>a[10]||(a[10]=[(0,t.eW)("Edit")]))),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(s,{label:"Chassis ID",prop:"trailer_id"}),(0,t.bF)(s,{label:"Chassis NO",prop:"trailer_no"}),(0,t.bF)(s,{label:"Chassis State"},{default:(0,t.k6)((({row:e})=>[(0,t.Lk)("span",null,(0,t.v_)(1===e.trailer_state?"Assigned":"Unassigned"),1)])),_:1}),(0,t.bF)(s,{label:"Chassis Plate",prop:"trailer_plate"}),(0,t.bF)(s,{label:"Chassis Reg Expired At",prop:"str_trailer_reg_expired_at"}),(0,t.bF)(s,{label:"Chassis Plate Expired At",prop:"str_trailer_plate_expired_at"}),(0,t.bF)(s,{label:"Chassis Check Expired At",prop:"str_trailer_check_expired_at"}),(0,t.bF)(s,{label:"Chassis Corp",prop:"trailer_corp"}),(0,t.bF)(s,{label:"Chassis Area",prop:"trailer_area"})])),_:1},8,["data"]),(0,t.bF)(u,{background:"",modelValue:o.currentPage,"onUpdate:modelValue":a[2]||(a[2]=e=>o.currentPage=e),"page-size":50,total:o.filteredChassis.length,layout:"prev, pager, next",class:"pagination-container",onCurrentChange:o.handlePageChange},null,8,["modelValue","total","onCurrentChange"]),o.editDialogVisible?((0,t.uX)(),(0,t.Wv)(p,{key:0,visible:o.editDialogVisible,chassisData:o.selectedChassis,onUpdateSuccess:o.handleUpdateSuccess,onClose:a[3]||(a[3]=e=>o.editDialogVisible=!1)},null,8,["visible","chassisData","onUpdateSuccess"])):(0,t.Q3)("",!0),(0,t.bF)(m,{modelValue:o.addDialogVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>o.addDialogVisible=e),onAddSuccess:o.handleAddSuccess,onClose:a[5]||(a[5]=e=>o.addDialogVisible=!1)},null,8,["modelValue","onAddSuccess"])])}function Ca(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-date-picker"),s=(0,t.g2)("el-option"),c=(0,t.g2)("el-select"),p=(0,t.g2)("el-form"),m=(0,t.g2)("el-button"),_=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(_,{title:"Add Chassis",modelValue:o.dialogVisible,"onUpdate:modelValue":a[7]||(a[7]=e=>o.dialogVisible=e),width:"600px",onClose:o.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(m,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(m,{type:"primary",onClick:o.submitAdd,loading:o.loading},{default:(0,t.k6)((()=>a[9]||(a[9]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(p,{ref:"formRef",model:o.formData,"label-width":"180px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Chassis NO"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.trailer_no,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.trailer_no=e),placeholder:"Enter Chassis NO"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Plate"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.trailer_plate,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.trailer_plate=e),placeholder:"Enter Chassis Plate"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Reg Expired At"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.formData.trailer_reg_expired_at,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.trailer_reg_expired_at=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DD",placeholder:"Select Date"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Plate Expired At"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.formData.trailer_plate_expired_at,"onUpdate:modelValue":a[3]||(a[3]=e=>o.formData.trailer_plate_expired_at=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DD",placeholder:"Select Date"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Check Expired At"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.formData.trailer_check_expired_at,"onUpdate:modelValue":a[4]||(a[4]=e=>o.formData.trailer_check_expired_at=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DD",placeholder:"Select Date"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Corp"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.formData.trailer_corp,"onUpdate:modelValue":a[5]||(a[5]=e=>o.formData.trailer_corp=e),placeholder:"Select Chassis Corp"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.chassisCorps,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Area"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.trailer_area,"onUpdate:modelValue":a[6]||(a[6]=e=>o.formData.trailer_area=e),placeholder:"Enter Chassis Area"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var ya={props:{visible:Boolean},emits:["update:visible","add-success"],setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||n()}}),o=(0,t.KR)(!1),r=()=>({trailer_no:"",trailer_plate:"",trailer_reg_expired_at:"",trailer_plate_expired_at:"",trailer_check_expired_at:"",trailer_corp:"",trailer_area:""}),i=(0,t.KR)(r()),d=(0,t.KR)(["TREND","TRAC","PORT","TOPPOINT","4JOHN"]);(0,t.wB)(l,(e=>{e||(i.value=r())}));const u=async()=>{if(i.value.trailer_no&&i.value.trailer_plate){o.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",new_trailer:{...i.value}};console.log("🚀 API 傳遞的資料:",l);const t=await te.A.post(`${oe}/Trailer/Add`,l);1e3===t.data.Code?(Be.nk.success("Chassis added successfully!"),a("add-success"),n()):Be.nk.error("Add failed: "+t.data.Code)}catch(e){console.error("API error:",e),Be.nk.error("API request failed.")}finally{o.value=!1}}else Be.nk.error("Chassis NO 和 Chassis Plate 為必填！")},n=()=>{a("close")};return{dialogVisible:l,formData:i,loading:o,chassisCorps:d,submitAdd:u,closeDialog:n}}};const Sa=(0,i.A)(ya,[["render",Ca],["__scopeId","data-v-08ac8a48"]]);var Ta=Sa;function Aa(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-date-picker"),p=(0,t.g2)("el-form"),m=(0,t.g2)("el-button"),_=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(_,{title:"Edit Chassis",modelValue:o.dialogVisible,"onUpdate:modelValue":a[9]||(a[9]=e=>o.dialogVisible=e),width:"600px",onClose:o.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(m,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[10]||(a[10]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(m,{type:"primary",onClick:o.submitEdit,loading:o.loading},{default:(0,t.k6)((()=>a[11]||(a[11]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(p,{ref:"formRef",model:o.formData,"label-width":"180px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Chassis ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.trailer_id,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.trailer_id=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis NO"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.trailer_no,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.trailer_no=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis State"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.formData.trailer_state,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.trailer_state=e),placeholder:"Select State"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"Assigned",value:1}),(0,t.bF)(n,{label:"Unassigned",value:0})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Plate"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.trailer_plate,"onUpdate:modelValue":a[3]||(a[3]=e=>o.formData.trailer_plate=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Reg Expired At"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.formData.trailer_reg_expired_at,"onUpdate:modelValue":a[4]||(a[4]=e=>o.formData.trailer_reg_expired_at=e),type:"date",format:"MM-DD-YYYY",placeholder:"Select Date"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Plate Expired At"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.formData.trailer_plate_expired_at,"onUpdate:modelValue":a[5]||(a[5]=e=>o.formData.trailer_plate_expired_at=e),type:"date",format:"MM-DD-YYYY",placeholder:"Select Date"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Check Expired At"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.formData.trailer_check_expired_at,"onUpdate:modelValue":a[6]||(a[6]=e=>o.formData.trailer_check_expired_at=e),type:"date",format:"MM-DD-YYYY",placeholder:"Select Date"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Corp"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.formData.trailer_corp,"onUpdate:modelValue":a[7]||(a[7]=e=>o.formData.trailer_corp=e),placeholder:"Select Chassis Corp"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.chassisCorps,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Chassis Area"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.trailer_area,"onUpdate:modelValue":a[8]||(a[8]=e=>o.formData.trailer_area=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var Ea={props:{visible:Boolean,chassisData:Object},emits:["update:visible","update-success"],setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||n()}}),o=(0,t.KR)(!1),r=()=>({trailer_id:"",trailer_no:"",trailer_state:0,trailer_plate:"",trailer_reg_expired_at:"",trailer_plate_expired_at:"",trailer_check_expired_at:"",trailer_corp:"",trailer_area:""}),i=(0,t.KR)(r()),d=(0,t.KR)(["TREND","TRAC","PORT","TOPPOINT","4JOHN"]);(0,t.wB)((()=>e.chassisData),(e=>{console.log("🔥 Edit Dialog 接收到的 chassisData:",e),e&&(i.value={...e},i.value.trailer_reg_expired_at=e.str_trailer_reg_expired_at?new Date(e.str_trailer_reg_expired_at):null,i.value.trailer_plate_expired_at=e.str_trailer_plate_expired_at?new Date(e.str_trailer_plate_expired_at):null,i.value.trailer_check_expired_at=e.str_trailer_check_expired_at?new Date(e.str_trailer_check_expired_at):null)}),{immediate:!0});const u=async()=>{if(i.value.trailer_no&&i.value.trailer_plate){o.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",trailer:{trailer_id:i.value.trailer_id,trailer_no:i.value.trailer_no,trailer_state:1===i.value.trailer_state?1:0,trailer_plate:i.value.trailer_plate,trailer_reg_expired_at:i.value.trailer_reg_expired_at?new Date(i.value.trailer_reg_expired_at).toLocaleDateString("en-CA"):null,trailer_plate_expired_at:i.value.trailer_plate_expired_at?new Date(i.value.trailer_plate_expired_at).toLocaleDateString("en-CA"):null,trailer_check_expired_at:i.value.trailer_check_expired_at?new Date(i.value.trailer_check_expired_at).toLocaleDateString("en-CA"):null,trailer_corp:i.value.trailer_corp,trailer_area:i.value.trailer_area}};console.log("🚀 API 傳遞的資料:",l);const t=await te.A.post(`${oe}/Trailer/Edit`,l);1e3===t.data.Code?(Be.nk.success("Chassis updated successfully!"),a("update-success"),n()):Be.nk.error("Edit failed: "+t.data.Code)}catch(e){console.error("API error:",e),Be.nk.error("API request failed.")}finally{o.value=!1}}else Be.nk.error("Chassis NO 和 Chassis Plate 為必填！")},n=()=>{a("close")};return{dialogVisible:l,formData:i,loading:o,chassisCorps:d,submitEdit:u,closeDialog:n}}};const wa=(0,i.A)(Ea,[["render",Aa],["__scopeId","data-v-657885f7"]]);var La=wa,Ia={components:{ChassisAddDialog:Ta,ChassisEditDialog:La},setup(){const e=(0,t.KR)([]),a=(0,t.KR)([]),l=(0,t.KR)(""),o=(0,t.KR)(1),r=(0,t.KR)(!1),i=(0,t.KR)(!1),d=(0,t.KR)(null),u=async()=>{try{e.value=[];const l=localStorage.getItem("authToken"),t=await te.A.post(`${oe}/Trailer/GroupList`,{Token:l,Timestamp:Date.now(),Sign:"string",trailer_id:""});1e3===t.data.Code?(e.value=t.data.trailer_list?.map((e=>({trailer_id:e.trailer_id,trailer_no:e.trailer_no,trailer_state:e.trailer_state,trailer_plate:e.trailer_plate||"",str_trailer_reg_expired_at:e.str_trailer_reg_expired_at||"",str_trailer_plate_expired_at:e.str_trailer_plate_expired_at||"",str_trailer_check_expired_at:e.str_trailer_check_expired_at||"",trailer_corp:e.trailer_corp||"",trailer_area:e.trailer_area||""})))||[],a.value=t.data.trailer_Counts||[]):Be.nk.error("Failed to fetch chassis data.")}catch(l){console.error("Error fetching chassis list:",l),Be.nk.error("API Request Failed.")}},n=(0,t.EW)((()=>e.value?l.value?e.value.filter((e=>e.trailer_plate?.toLowerCase().includes(l.value.toLowerCase()))):e.value:[])),s=(0,t.EW)((()=>n.value.slice(50*(o.value-1),50*o.value))),c=()=>{console.log("Opening Add Dialog"),r.value=!0},p=e=>{d.value={...e},i.value=!0},m=()=>{i.value=!1,u()},_=()=>{r.value=!1,u()};return(0,t.sV)((()=>{u()})),{chassisList:e,trailerCounts:a,searchQuery:l,currentPage:o,addDialogVisible:r,editDialogVisible:i,selectedChassis:d,addChassis:c,openEditDialog:p,filteredChassis:n,paginatedChassis:s,handlePageChange:e=>o.value=e,handleUpdateSuccess:m,handleAddSuccess:_}}};const Ua=(0,i.A)(Ia,[["render",Va],["__scopeId","data-v-01b5358b"]]);var Pa=Ua;const Oa={class:"container"},Ra={class:"search-container"},Ya={class:"button-container"};function Na(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-button"),s=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-table"),p=(0,t.g2)("TruckEditDialog"),m=(0,t.g2)("TruckAddDialog");return(0,t.uX)(),(0,t.CE)("div",Oa,[a[7]||(a[7]=(0,t.Lk)("h2",null,"Truck",-1)),(0,t.Lk)("div",Ra,[(0,t.bF)(d,{modelValue:o.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchQuery=e),placeholder:"Search Truck Area or Truck Corp",clearable:""},null,8,["modelValue"])]),(0,t.bF)(u,{background:"",modelValue:o.currentPage,"onUpdate:modelValue":a[1]||(a[1]=e=>o.currentPage=e),"page-size":50,total:o.filteredTrucks.length,layout:"prev, pager, next",class:"pagination-container top-pagination",onCurrentChange:o.handlePageChange},null,8,["modelValue","total","onCurrentChange"]),(0,t.Lk)("div",Ya,[(0,t.bF)(n,{type:"primary",size:"small",onClick:o.addTruck},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Add")]))),_:1},8,["onClick"])]),(0,t.bF)(c,{data:o.paginatedTrucks,style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Actions",width:"150"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(n,{type:"primary",size:"small",onClick:a=>o.openEditDialog(e)},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("Edit")]))),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(s,{label:"Truck ID",prop:"truck_id"}),(0,t.bF)(s,{label:"Truck Area",prop:"truck_area"}),(0,t.bF)(s,{label:"Truck Corp",prop:"truck_corp"}),(0,t.bF)(s,{label:"Truck Year",prop:"truck_year"}),(0,t.bF)(s,{label:"Truck Make",prop:"truck_make"}),(0,t.bF)(s,{label:"Truck Plate",prop:"truck_plate"}),(0,t.bF)(s,{label:"Vin Number",prop:"vin_number"}),(0,t.bF)(s,{label:"Truck State",prop:"truck_state"}),(0,t.bF)(s,{label:"Truck Ins Expired Time",prop:"str_truck_ins_expired_at_time"}),(0,t.bF)(s,{label:"Truck Reg Expired Time",prop:"str_truck_reg_expired_at_time"}),(0,t.bF)(s,{label:"Truck Master ID",prop:"truck_master_id"}),(0,t.bF)(s,{label:"Truck Group ID",prop:"truck_group_id"})])),_:1},8,["data"]),(0,t.bF)(u,{background:"",modelValue:o.currentPage,"onUpdate:modelValue":a[2]||(a[2]=e=>o.currentPage=e),"page-size":50,total:o.filteredTrucks.length,layout:"prev, pager, next",class:"pagination-container bottom-pagination",onCurrentChange:o.handlePageChange},null,8,["modelValue","total","onCurrentChange"]),o.editDialogVisible?((0,t.uX)(),(0,t.Wv)(p,{key:0,visible:o.editDialogVisible,truckData:o.selectedTruck,onUpdateSuccess:o.handleUpdateSuccess,onClose:a[3]||(a[3]=e=>o.editDialogVisible=!1)},null,8,["visible","truckData","onUpdateSuccess"])):(0,t.Q3)("",!0),o.addDialogVisible?((0,t.uX)(),(0,t.Wv)(m,{key:1,visible:o.addDialogVisible,truckList:o.truckList,nextTruckGroupId:o.nextTruckGroupId,onAddSuccess:o.handleAddSuccess,onClose:a[4]||(a[4]=e=>o.addDialogVisible=!1)},null,8,["visible","truckList","nextTruckGroupId","onAddSuccess"])):(0,t.Q3)("",!0)])}function xa(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-date-picker"),p=(0,t.g2)("el-form"),m=(0,t.g2)("el-button"),_=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(_,{title:"Add Truck",modelValue:o.dialogVisible,"onUpdate:modelValue":a[11]||(a[11]=e=>o.dialogVisible=e),width:"600px",onClose:o.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(m,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[12]||(a[12]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(m,{type:"primary",onClick:o.submitAdd,loading:o.loading},{default:(0,t.k6)((()=>a[13]||(a[13]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(p,{ref:"formRef",model:o.formData,"label-width":"200px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Truck Group ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_group_id,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.truck_group_id=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Master ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_master_id,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.truck_master_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Area"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_area,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.truck_area=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Corp"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_corp,"onUpdate:modelValue":a[3]||(a[3]=e=>o.formData.truck_corp=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Year"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_year,"onUpdate:modelValue":a[4]||(a[4]=e=>o.formData.truck_year=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Make"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_make,"onUpdate:modelValue":a[5]||(a[5]=e=>o.formData.truck_make=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Plate"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_plate,"onUpdate:modelValue":a[6]||(a[6]=e=>o.formData.truck_plate=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Vin Number"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.vin_number,"onUpdate:modelValue":a[7]||(a[7]=e=>o.formData.vin_number=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck State"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.formData.truck_state,"onUpdate:modelValue":a[8]||(a[8]=e=>o.formData.truck_state=e),placeholder:"Select State"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"ACTIVE",value:1}),(0,t.bF)(n,{label:"INACTIVE",value:0})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Ins Expired Time"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.formData.truck_ins_expired_at_time,"onUpdate:modelValue":a[9]||(a[9]=e=>o.formData.truck_ins_expired_at_time=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Reg Expired Time"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.formData.truck_reg_expired_at_time,"onUpdate:modelValue":a[10]||(a[10]=e=>o.formData.truck_reg_expired_at_time=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DDTHH:mm:ss.SSS"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var Ma={props:{visible:Boolean,truckList:Array},setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||u()}}),o=(0,t.KR)(!1),r=(0,t.KR)({truck_group_id:"",truck_master_id:"",truck_area:"",truck_corp:"",truck_year:"",truck_make:"",truck_plate:"",vin_number:"",truck_state:1,truck_ins_expired_at_time:"",truck_reg_expired_at_time:""}),i=()=>{if(e.truckList&&e.truckList.length>0){const a=e.truckList.map((e=>Number(e.truck_group_id))).filter((e=>!isNaN(e)&&e>0)),l=a.length>0?Math.max(...a):0;r.value.truck_group_id=String(l+1)}else r.value.truck_group_id=String(1)};(0,t.wB)((()=>e.truckList),i,{immediate:!0}),(0,t.sV)((()=>{i()}));const d=async()=>{if(r.value.truck_group_id&&r.value.truck_area&&r.value.truck_corp){o.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",truck_data:{...r.value,truck_state:1===r.value.truck_state?1:0}};console.log("🚀 API 傳遞的資料:",l);const t=await te.A.post(`${oe}/Truck/TruckAdd`,l);1e3===t.data.Code?(Be.nk.success("Truck added successfully!"),a("add-success"),u()):Be.nk.error("Add failed: "+t.data.Code)}catch(e){console.error("API error:",e),Be.nk.error("API request failed.")}finally{o.value=!1}}else Be.nk.error("Truck Group ID、Truck Area、Truck Corp 為必填！")},u=()=>{a("close")};return{dialogVisible:l,formData:r,loading:o,submitAdd:d,closeDialog:u}}};const Wa=(0,i.A)(Ma,[["render",xa],["__scopeId","data-v-2e3ab761"]]);var Ka=Wa;function Xa(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-date-picker"),p=(0,t.g2)("el-form"),m=(0,t.g2)("el-button"),_=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(_,{title:"Edit Truck",modelValue:o.dialogVisible,"onUpdate:modelValue":a[12]||(a[12]=e=>o.dialogVisible=e),width:"600px",onClose:o.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(m,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[13]||(a[13]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(m,{type:"primary",onClick:o.submitEdit,loading:o.loading},{default:(0,t.k6)((()=>a[14]||(a[14]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(p,{ref:"formRef",model:o.formData,"label-width":"200px"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_id,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.truck_id=e),type:"hidden"},null,8,["modelValue"]),(0,t.bF)(u,{label:"Truck Group ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_group_id,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.truck_group_id=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Master ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_master_id,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.truck_master_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Area"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_area,"onUpdate:modelValue":a[3]||(a[3]=e=>o.formData.truck_area=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Corp"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_corp,"onUpdate:modelValue":a[4]||(a[4]=e=>o.formData.truck_corp=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Year"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_year,"onUpdate:modelValue":a[5]||(a[5]=e=>o.formData.truck_year=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Make"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_make,"onUpdate:modelValue":a[6]||(a[6]=e=>o.formData.truck_make=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Plate"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_plate,"onUpdate:modelValue":a[7]||(a[7]=e=>o.formData.truck_plate=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Vin Number"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.vin_number,"onUpdate:modelValue":a[8]||(a[8]=e=>o.formData.vin_number=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck State"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.formData.truck_state,"onUpdate:modelValue":a[9]||(a[9]=e=>o.formData.truck_state=e),placeholder:"Select State"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"ACTIVE",value:1}),(0,t.bF)(n,{label:"INACTIVE",value:0})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Ins Expired Time"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.formData.truck_ins_expired_at_time,"onUpdate:modelValue":a[10]||(a[10]=e=>o.formData.truck_ins_expired_at_time=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Reg Expired Time"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.formData.truck_reg_expired_at_time,"onUpdate:modelValue":a[11]||(a[11]=e=>o.formData.truck_reg_expired_at_time=e),type:"date",format:"MM-DD-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var za={props:{visible:Boolean,truckData:Object},setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||u()}}),o=(0,t.KR)(!1),r=(0,t.KR)({truck_id:"",truck_group_id:"",truck_master_id:"",truck_area:"",truck_corp:"",truck_year:"",truck_make:"",truck_plate:"",vin_number:"",truck_state:1,truck_ins_expired_at_time:"",truck_reg_expired_at_time:""}),i=e=>{if(!e)return"";const[a,l,t]=e.split("/");return`${t}-${a.padStart(2,"0")}-${l.padStart(2,"0")}`};(0,t.wB)((()=>e.truckData),(e=>{e&&(r.value={truck_id:String(e.truck_id||""),truck_group_id:String(e.truck_group_id||""),truck_master_id:e.truck_master_id||"",truck_area:e.truck_area||"",truck_corp:e.truck_corp||"",truck_year:e.truck_year||"",truck_make:e.truck_make||"",truck_plate:e.truck_plate||"",vin_number:e.vin_number||"",truck_state:1===e.truck_state?1:0,truck_ins_expired_at_time:i(e.str_truck_ins_expired_at_time),truck_reg_expired_at_time:i(e.str_truck_reg_expired_at_time)},console.log("🟢 更新後的 formData:",e))}),{immediate:!0});const d=async()=>{if(r.value.truck_id){o.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",truck_data:{truck_id:String(r.value.truck_id),truck_group_id:String(r.value.truck_group_id),truck_master_id:r.value.truck_master_id,truck_area:r.value.truck_area,truck_corp:r.value.truck_corp,truck_year:r.value.truck_year,truck_make:r.value.truck_make,truck_plate:r.value.truck_plate,vin_number:r.value.vin_number,truck_state:1===r.value.truck_state?1:0,truck_ins_expired_at_time:r.value.truck_ins_expired_at_time,truck_reg_expired_at_time:r.value.truck_reg_expired_at_time}};console.log("🚀 API 更新傳遞的資料:",l);const t=await te.A.post(`${oe}/Truck/TruckUpdate`,l);1e3===t.data.Code?(Be.nk.success("Truck updated successfully!"),a("update-success",r.value),u()):Be.nk.error("Update failed: "+t.data.Code)}catch(e){console.error("API error:",e),Be.nk.error("API request failed.")}finally{o.value=!1}}else Be.nk.error("Truck ID 錯誤！")},u=()=>{a("close"),a("update-success")};return{dialogVisible:l,formData:r,loading:o,submitEdit:d,closeDialog:u}}};const Ha=(0,i.A)(za,[["render",Xa],["__scopeId","data-v-7ebc811c"]]);var Ga=Ha,$a={components:{TruckAddDialog:Ka,TruckEditDialog:Ga},setup(){const e=(0,t.KR)([]),a=(0,t.KR)(""),l=(0,t.KR)(1),o=(0,t.KR)(!1),r=(0,t.KR)(!1),i=(0,t.KR)(null),d=async()=>{try{const a=localStorage.getItem("authToken"),l=await te.A.post(`${oe}/Truck/TruckList`,{Token:a,Timestamp:Date.now(),Sign:"string",group_id:""});1e3===l.data.Code?e.value=l.data.truck_list.map((e=>({truck_id:e.truck_id,truck_area:e.truck_area,truck_corp:e.truck_corp,truck_year:e.truck_year,truck_make:e.truck_make,truck_plate:e.truck_plate,vin_number:e.vin_number,truck_state:e.truck_state,str_truck_ins_expired_at_time:e.str_truck_ins_expired_at_time,str_truck_reg_expired_at_time:e.str_truck_reg_expired_at_time,truck_master_id:e.truck_master_id||"N/A",truck_group_id:e.truck_group_id||0}))):Be.nk.error("Failed to fetch truck data.")}catch(a){console.error("Error fetching truck list:",a),Be.nk.error("API Request Failed.")}},u=(0,t.EW)((()=>{if(!e.value||0===e.value.length)return 1;const a=e.value.map((e=>Number(e.truck_group_id))).filter((e=>!isNaN(e)&&e>0));return a.length>0?Math.max(...a)+1:1})),n=(0,t.EW)((()=>a.value?e.value.filter((e=>{const l=e.truck_area?e.truck_area.toLowerCase():"",t=e.truck_corp?e.truck_corp.toLowerCase():"",o=a.value.toLowerCase();return l.includes(o)||t.includes(o)})):e.value)),s=(0,t.EW)((()=>n.value.slice(50*(l.value-1),50*l.value))),c=e=>{i.value={...e},o.value=!0},p=()=>{r.value=!0},m=()=>{o.value=!1,d()},_=()=>{r.value=!1,d()};return(0,t.sV)((()=>{d()})),{truckList:e,searchQuery:a,currentPage:l,filteredTrucks:n,paginatedTrucks:s,nextTruckGroupId:u,handlePageChange:e=>l.value=e,editDialogVisible:o,addDialogVisible:r,selectedTruck:i,openEditDialog:c,addTruck:p,handleUpdateSuccess:m,handleAddSuccess:_}}};const Ba=(0,i.A)($a,[["render",Na],["__scopeId","data-v-1a46be8a"]]);var Qa=Ba;const qa={class:"container"},ja={class:"search-container"},Za={class:"button-container"};function Ja(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-button"),s=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-table"),p=(0,t.g2)("DriverFleetEditDialog"),m=(0,t.g2)("DriverFleetAddDialog");return(0,t.uX)(),(0,t.CE)("div",qa,[a[7]||(a[7]=(0,t.Lk)("h2",null,"Truck Groups",-1)),(0,t.Lk)("div",ja,[(0,t.bF)(d,{modelValue:o.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchQuery=e),placeholder:"Search Truck Group Name",clearable:""},null,8,["modelValue"])]),(0,t.bF)(u,{background:"",modelValue:o.currentPage,"onUpdate:modelValue":a[1]||(a[1]=e=>o.currentPage=e),"page-size":50,total:o.filteredGroups.length,layout:"prev, pager, next",class:"pagination-container top-pagination",onCurrentChange:o.handlePageChange},null,8,["modelValue","total","onCurrentChange"]),(0,t.Lk)("div",Za,[(0,t.bF)(n,{type:"primary",size:"small",onClick:o.addTruckGroup},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Add")]))),_:1},8,["onClick"])]),(0,t.bF)(c,{data:o.paginatedGroups,style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Actions",width:"150"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(n,{type:"primary",size:"small",onClick:a=>o.openEditDialog(e)},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("Edit")]))),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(s,{label:"Truck Group Name",prop:"truck_group_name"}),(0,t.bF)(s,{label:"Truck Group Master ID",prop:"truck_group_master_id"}),(0,t.bF)(s,{label:"User Name",prop:"user_name"}),(0,t.bF)(s,{label:"Truck Group State"},{default:(0,t.k6)((({row:e})=>[(0,t.Lk)("span",null,(0,t.v_)(o.getTruckGroupState(e.truck_group_state)),1)])),_:1})])),_:1},8,["data"]),(0,t.bF)(u,{background:"",modelValue:o.currentPage,"onUpdate:modelValue":a[2]||(a[2]=e=>o.currentPage=e),"page-size":50,total:o.filteredGroups.length,layout:"prev, pager, next",class:"pagination-container bottom-pagination",onCurrentChange:o.handlePageChange},null,8,["modelValue","total","onCurrentChange"]),o.editDialogVisible?((0,t.uX)(),(0,t.Wv)(p,{key:0,visible:o.editDialogVisible,truckGroupData:o.selectedTruckGroup,onUpdateSuccess:o.handleUpdateSuccess,onClose:a[3]||(a[3]=e=>o.editDialogVisible=!1)},null,8,["visible","truckGroupData","onUpdateSuccess"])):(0,t.Q3)("",!0),o.addDialogVisible?((0,t.uX)(),(0,t.Wv)(m,{key:1,visible:o.addDialogVisible,onAddSuccess:o.handleAddSuccess,onClose:a[4]||(a[4]=e=>o.addDialogVisible=!1)},null,8,["visible","onAddSuccess"])):(0,t.Q3)("",!0)])}function el(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-form"),p=(0,t.g2)("el-button"),m=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(m,{title:"Edit Truck Group",modelValue:o.dialogVisible,"onUpdate:modelValue":a[6]||(a[6]=e=>o.dialogVisible=e),width:"600px",onClose:o.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(p,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(p,{type:"primary",onClick:o.submitEdit,loading:o.loading},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(c,{ref:"formRef",model:o.formData,"label-width":"200px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"* Truck Group Name",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_group_name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.truck_group_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Group Master ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_group_master_id,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.truck_group_master_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Update User ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.updated_user_id,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.updated_user_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"User Name"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.user_name,"onUpdate:modelValue":a[3]||(a[3]=e=>o.formData.user_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Group Master PWD"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_group_master_pwd,"onUpdate:modelValue":a[4]||(a[4]=e=>o.formData.truck_group_master_pwd=e),type:"password",autocomplete:"new-password","show-password":""},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Group State"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.formData.truck_group_state,"onUpdate:modelValue":a[5]||(a[5]=e=>o.formData.truck_group_state=e),placeholder:"Select State"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"DRIVING",value:1}),(0,t.bF)(n,{label:"SOLD / NOT DRIVING FOR TOPPOINT",value:2})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var al={props:{visible:Boolean,truckGroupData:Object},setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||d()}}),o=(0,t.KR)(!1),r=(0,t.KR)({truck_group_id:null,truck_group_name:"",truck_group_master_id:"",truck_group_state:1,updated_user_id:"",truck_group_master_pwd:"",user_name:""});(0,t.wB)((()=>e.truckGroupData),(e=>{e&&(r.value={...e,truck_group_master_id:"N/A"===e.truck_group_master_id?"":e.truck_group_master_id,user_name:"N/A"===e.user_name?"":e.user_name,updated_user_id:"",truck_group_master_pwd:""})}),{immediate:!0});const i=async()=>{if(r.value.truck_group_name){o.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",group:{...r.value}};console.log("🚀 API 傳遞的資料:",l);const t=await te.A.post(`${oe}/Truck/GroupUpdate`,l);1e3===t.data.Code?(Be.nk.success("Truck Group updated successfully!"),a("update-success",{...r.value}),r.value.updated_user_id="",r.value.truck_group_master_pwd="",d()):Be.nk.error("Update failed: "+t.data.Code)}catch(e){console.error("API error:",e),Be.nk.error("API request failed.")}finally{o.value=!1}}else Be.nk.error("Truck Group Name 為必填！")},d=()=>{a("close")};return{dialogVisible:l,formData:r,loading:o,submitEdit:i,closeDialog:d}}};const ll=(0,i.A)(al,[["render",el],["__scopeId","data-v-89403bb2"]]);var tl=ll;function ol(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-form"),s=(0,t.g2)("el-button"),c=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(c,{title:"Add Truck Group",modelValue:o.dialogVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>o.dialogVisible=e),width:"600px",onClose:o.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(s,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(s,{type:"primary",onClick:o.submitAdd,loading:o.loading},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(n,{ref:"formRef",model:o.formData,"label-width":"200px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"* Truck Group Name",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_group_name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.truck_group_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"* Truck Group Master ID",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_group_master_id,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.truck_group_master_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"* Truck Group Master PWD",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.truck_group_master_pwd,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.truck_group_master_pwd=e),type:"password",autocomplete:"new-password","show-password":""},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"* User Name",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.user_name,"onUpdate:modelValue":a[3]||(a[3]=e=>o.formData.user_name=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var rl={props:{visible:Boolean},setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||u()}}),o=(0,t.KR)(!1),r=(0,t.KR)({truck_group_name:"",truck_group_master_id:"",truck_group_master_pwd:"",user_name:""}),i=async()=>{if(r.value.truck_group_name&&r.value.truck_group_master_id&&r.value.truck_group_master_pwd&&r.value.user_name){o.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",group_data:{...r.value}};console.log("🚀 API 傳遞的資料:",l);const t=await te.A.post(`${oe}/Truck/GroupAdd`,l);1e3===t.data.Code?(Be.nk.success("Truck Group added successfully!"),a("add-success",{...r.value}),d(),u()):Be.nk.error("Add failed: "+t.data.Code)}catch(e){console.error("API error:",e),Be.nk.error("API request failed.")}finally{o.value=!1}}else Be.nk.error("請填寫所有必填欄位！")},d=()=>{r.value={truck_group_name:"",truck_group_master_id:"",truck_group_master_pwd:"",user_name:""}},u=()=>{d(),a("close")};return{dialogVisible:l,formData:r,loading:o,submitAdd:i,closeDialog:u}}};const il=(0,i.A)(rl,[["render",ol],["__scopeId","data-v-15442b39"]]);var dl=il,ul={components:{DriverFleetEditDialog:tl,DriverFleetAddDialog:dl},setup(){const e=(0,t.KR)([]),a=(0,t.KR)(""),l=(0,t.KR)(1),o=(0,t.KR)(!1),r=(0,t.KR)(!1),i=(0,t.KR)(null),d=async()=>{try{const a=localStorage.getItem("authToken"),l=await te.A.post(`${oe}/Truck/GroupList`,{Token:a,Timestamp:Date.now(),Sign:"string",group_id:""});1e3===l.data.Code?e.value=l.data.group_list.map((e=>({truck_group_id:e.truck_group_id,truck_group_name:e.truck_group_name,truck_group_master_id:e.truck_group_master_id||"N/A",user_name:e.user_name||"N/A",truck_group_state:e.truck_group_state}))):Be.nk.error("Failed to fetch truck group data.")}catch(a){console.error("Error fetching truck group list:",a),Be.nk.error("API Request Failed.")}},u=e=>1===e?"DRIVING":2===e?"SOLD / NOT DRIVING FOR TOPPOINT":"UNKNOWN",n=(0,t.EW)((()=>a.value?e.value.filter((e=>{const l=e.truck_group_name?e.truck_group_name.toLowerCase():"",t=a.value.toLowerCase();return l.includes(t)})):e.value)),s=(0,t.EW)((()=>n.value.slice(50*(l.value-1),50*l.value))),c=e=>{i.value={...e},o.value=!0},p=()=>{r.value=!0},m=a=>{const l=e.value.findIndex((e=>e.truck_group_id===a.truck_group_id));-1!==l&&(e.value[l]=a),o.value=!1},_=()=>{r.value=!1,d()};return(0,t.sV)((()=>{d()})),{truckGroupList:e,searchQuery:a,currentPage:l,filteredGroups:n,paginatedGroups:s,handlePageChange:e=>l.value=e,editDialogVisible:o,addDialogVisible:r,selectedTruckGroup:i,openEditDialog:c,addTruckGroup:p,handleUpdateSuccess:m,handleAddSuccess:_,getTruckGroupState:u}}};const nl=(0,i.A)(ul,[["render",Ja],["__scopeId","data-v-7d4cf65c"]]);var sl=nl;const cl={class:"container"},pl={class:"search-container"},ml={class:"button-container"};function _l(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-button"),s=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-table"),p=(0,t.g2)("PortEditDialog"),m=(0,t.g2)("PortAddDialog");return(0,t.uX)(),(0,t.CE)("div",cl,[a[8]||(a[8]=(0,t.Lk)("h2",null,"Port",-1)),(0,t.Lk)("div",pl,[(0,t.bF)(d,{modelValue:o.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchQuery=e),placeholder:"Search by Port Name or Address",clearable:""},null,8,["modelValue"])]),(0,t.bF)(u,{background:"",modelValue:o.currentPage,"onUpdate:modelValue":a[1]||(a[1]=e=>o.currentPage=e),"page-size":50,total:o.filteredPorts.length,layout:"prev, pager, next",class:"pagination-container top-pagination",onCurrentChange:o.handlePageChange},null,8,["modelValue","total","onCurrentChange"]),(0,t.Lk)("div",ml,[(0,t.bF)(n,{type:"primary",size:"small",onClick:o.addPort},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Add")]))),_:1},8,["onClick"])]),(0,t.bF)(c,{data:o.paginatedPorts,style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Actions",width:"150"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(n,{type:"primary",size:"small",onClick:a=>o.openEditDialog(e)},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("Edit")]))),_:2},1032,["onClick"]),(0,t.bF)(n,{type:"danger",size:"small",onClick:a=>o.deletePort(e.pier_id)},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("Delete")]))),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(s,{label:"Port Name",prop:"pier_name"}),(0,t.bF)(s,{label:"Port Address",prop:"pier_address"}),(0,t.bF)(s,{label:"Customer Pickup Fee",prop:"customer_container_pickup_fee"}),(0,t.bF)(s,{label:"Driver Pickup Fee",prop:"driver_container_pickup_fee"}),(0,t.bF)(s,{label:"Customer Dropoff Fee",prop:"customer_container_dropoff_fee"}),(0,t.bF)(s,{label:"Driver Dropoff Fee",prop:"driver_container_dropoff_fee"})])),_:1},8,["data"]),(0,t.bF)(u,{background:"",modelValue:o.currentPage,"onUpdate:modelValue":a[2]||(a[2]=e=>o.currentPage=e),"page-size":50,total:o.filteredPorts.length,layout:"prev, pager, next",class:"pagination-container bottom-pagination",onCurrentChange:o.handlePageChange},null,8,["modelValue","total","onCurrentChange"]),o.editDialogVisible?((0,t.uX)(),(0,t.Wv)(p,{key:0,visible:o.editDialogVisible,portData:o.selectedPort,onUpdateSuccess:o.handleUpdateSuccess,onClose:a[3]||(a[3]=e=>o.editDialogVisible=!1)},null,8,["visible","portData","onUpdateSuccess"])):(0,t.Q3)("",!0),o.addDialogVisible?((0,t.uX)(),(0,t.Wv)(m,{key:1,visible:o.addDialogVisible,onAddSuccess:o.handleAddSuccess,onClose:a[4]||(a[4]=e=>o.addDialogVisible=!1)},null,8,["visible","onAddSuccess"])):(0,t.Q3)("",!0)])}function bl(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-input-number"),s=(0,t.g2)("el-form"),c=(0,t.g2)("el-button"),p=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(p,{title:"Edit Port",modelValue:o.dialogVisible,"onUpdate:modelValue":a[6]||(a[6]=e=>o.dialogVisible=e),width:"600px",onClose:o.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(c,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(c,{type:"primary",onClick:o.submitEdit,loading:o.loading},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(s,{ref:"formRef",model:o.formData,"label-width":"220px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"* Port Name",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.pier_name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.pier_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"* Port Address",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.pier_address,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.pier_address=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Customer Container Pickup Fee"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.formData.customer_container_pickup_fee,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.customer_container_pickup_fee=e),min:0},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver Container Pickup Fee"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.formData.driver_container_pickup_fee,"onUpdate:modelValue":a[3]||(a[3]=e=>o.formData.driver_container_pickup_fee=e),min:0},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Customer Container Dropoff Fee"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.formData.customer_container_dropoff_fee,"onUpdate:modelValue":a[4]||(a[4]=e=>o.formData.customer_container_dropoff_fee=e),min:0},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver Container Dropoff Fee"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.formData.driver_container_dropoff_fee,"onUpdate:modelValue":a[5]||(a[5]=e=>o.formData.driver_container_dropoff_fee=e),min:0},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var gl={props:{visible:Boolean,portData:Object},setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>{e||d()}}),o=(0,t.KR)(!1),r=(0,t.KR)({pier_id:null,pier_name:"",pier_address:"",customer_container_pickup_fee:0,driver_container_pickup_fee:0,customer_container_dropoff_fee:0,driver_container_dropoff_fee:0});(0,t.wB)((()=>e.portData),(e=>{e&&(r.value={...e})}),{immediate:!0});const i=async()=>{if(r.value.pier_name&&r.value.pier_address){o.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",pier_data:{...r.value}};console.log("🚀 API 傳遞的資料:",l);const t=await te.A.post(`${oe}/Customer/PierUpdate`,l);1e3===t.data.Code?(Be.nk.success("Port updated successfully!"),a("update-success",{...r.value}),d()):Be.nk.error("Update failed: "+t.data.Code)}catch(e){console.error("API error:",e),Be.nk.error("API request failed.")}finally{o.value=!1}}else Be.nk.error("Port Name 和 Port Address 為必填！")},d=()=>{a("close")};return{dialogVisible:l,formData:r,loading:o,submitEdit:i,closeDialog:d}}};const kl=(0,i.A)(gl,[["render",bl],["__scopeId","data-v-311e35db"]]);var fl=kl;function vl(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-input-number"),s=(0,t.g2)("el-form"),c=(0,t.g2)("el-button"),p=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(p,{title:"Add Port",modelValue:o.dialogVisible,"onUpdate:modelValue":a[6]||(a[6]=e=>o.dialogVisible=e),width:"600px",onClose:o.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(c,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(c,{type:"primary",onClick:o.submitAdd,loading:o.loading},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("Save")]))),_:1},8,["onClick","loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(s,{ref:"formRef",model:o.formData,"label-width":"220px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Port Name",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.pier_name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.pier_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Port Address",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.pier_address,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.pier_address=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Customer Container Pickup Fee"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.formData.customer_container_pickup_fee,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.customer_container_pickup_fee=e),min:0},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver Container Pickup Fee"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.formData.driver_container_pickup_fee,"onUpdate:modelValue":a[3]||(a[3]=e=>o.formData.driver_container_pickup_fee=e),min:0},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Customer Container Dropoff Fee"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.formData.customer_container_dropoff_fee,"onUpdate:modelValue":a[4]||(a[4]=e=>o.formData.customer_container_dropoff_fee=e),min:0},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver Container Dropoff Fee"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{modelValue:o.formData.driver_container_dropoff_fee,"onUpdate:modelValue":a[5]||(a[5]=e=>o.formData.driver_container_dropoff_fee=e),min:0},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var hl={props:{visible:Boolean},setup(e,{emit:a}){const l=(0,t.KR)(e.visible),o=(0,t.KR)(!1),r=(0,t.KR)({pier_name:"",pier_address:"",customer_container_pickup_fee:0,driver_container_pickup_fee:0,customer_container_dropoff_fee:0,driver_container_dropoff_fee:0});(0,t.wB)((()=>e.visible),(e=>{l.value=e,e&&i()}));const i=()=>{r.value={pier_name:"",pier_address:"",customer_container_pickup_fee:0,driver_container_pickup_fee:0,customer_container_dropoff_fee:0,driver_container_dropoff_fee:0}},d=async()=>{if(r.value.pier_name&&r.value.pier_address){o.value=!0;try{const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",pier_data:{...r.value}};console.log("🚀 API 傳遞的資料:",l);const t=await te.A.post(`${oe}/Customer/PierAdd`,l);1e3===t.data.Code?(Be.nk.success("Port added successfully!"),a("add-success"),u()):Be.nk.error("Add failed: "+t.data.Code)}catch(e){console.error("API error:",e),Be.nk.error("API request failed.")}finally{o.value=!1}}else Be.nk.error("Port Name 和 Port Address 為必填！")},u=()=>{l.value=!1,a("close")};return{dialogVisible:l,formData:r,loading:o,submitAdd:d,closeDialog:u}}};const Dl=(0,i.A)(hl,[["render",vl],["__scopeId","data-v-2c2154d4"]]);var Fl=Dl,Vl={components:{PortEditDialog:fl,PortAddDialog:Fl},setup(){const e=(0,t.KR)([]),a=(0,t.KR)(""),l=(0,t.KR)(1),o=(0,t.KR)(!1),r=(0,t.KR)(!1),i=(0,t.KR)(null),d=async()=>{try{const a=localStorage.getItem("authToken"),l=await te.A.post(`${oe}/Customer/Pier`,{Token:a,Timestamp:Date.now(),Sign:"string",pier_id:0});1e3===l.data.Code?e.value=l.data.pier_list:Be.nk.error("Failed to fetch port data.")}catch(a){console.error("Error fetching port list:",a),Be.nk.error("API Request Failed.")}},u=(0,t.EW)((()=>a.value?e.value.filter((e=>{const l=e.pier_name?e.pier_name.toLowerCase():"",t=e.pier_address?e.pier_address.toLowerCase():"",o=a.value.toLowerCase();return l.includes(o)||t.includes(o)})):e.value)),n=(0,t.EW)((()=>u.value.slice(50*(l.value-1),50*l.value))),s=e=>{i.value={...e},o.value=!0},c=()=>{r.value=!0},p=async a=>{try{const l=localStorage.getItem("authToken"),t=await te.A.post(`${oe}/Customer/PierDelete`,{Token:l,Timestamp:Date.now(),Sign:"string",pier_id:a});1e3===t.data.Code?(Be.nk.success("Port deleted successfully!"),e.value=e.value.filter((e=>e.pier_id!==a))):Be.nk.error("Delete failed: "+t.data.Code)}catch(l){console.error("API error:",l),Be.nk.error("API request failed.")}},m=a=>{const l=e.value.findIndex((e=>e.pier_id===a.pier_id));-1!==l&&(e.value[l]=a),o.value=!1},_=()=>{r.value=!1,d()};return(0,t.sV)(d),{portList:e,searchQuery:a,currentPage:l,filteredPorts:u,paginatedPorts:n,handlePageChange:e=>l.value=e,editDialogVisible:o,addDialogVisible:r,selectedPort:i,openEditDialog:s,deletePort:p,addPort:c,handleUpdateSuccess:m,handleAddSuccess:_}}};const Cl=(0,i.A)(Vl,[["render",_l],["__scopeId","data-v-1299ef3e"]]);var yl=Cl;const Sl={class:"container"},Tl={class:"search-container"},Al={class:"button-container"};function El(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-button"),s=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-tag"),p=(0,t.g2)("el-table"),m=(0,t.g2)("TruckDriverEditDialog"),_=(0,t.g2)("TruckDriverAddDialog");return(0,t.uX)(),(0,t.CE)("div",Sl,[a[7]||(a[7]=(0,t.Lk)("h2",null,"Truck Driver List",-1)),(0,t.Lk)("div",Tl,[(0,t.bF)(d,{modelValue:o.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchQuery=e),placeholder:"Search by Driver ID, Truck Group Name, or Driver Name",clearable:""},null,8,["modelValue"])]),(0,t.bF)(u,{background:"",currentPage:o.currentPage,"onUpdate:currentPage":a[1]||(a[1]=e=>o.currentPage=e),"page-size":50,total:o.filteredDrivers.length,layout:"prev, pager, next",class:"pagination-container top-pagination",onCurrentChange:o.handlePageChange},null,8,["currentPage","total","onCurrentChange"]),(0,t.Lk)("div",Al,[(0,t.bF)(n,{type:"primary",size:"small",onClick:o.addDriver},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Add")]))),_:1},8,["onClick"])]),(0,t.bF)(p,{data:o.paginatedDrivers,style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Actions",width:"100"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(n,{type:"primary",size:"small",onClick:a=>o.openEditDialog(e)},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("Edit")]))),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(s,{label:"Driver User ID",prop:"driver_user_id"}),(0,t.bF)(s,{label:"Truck Group Name",prop:"truck_group_name"}),(0,t.bF)(s,{label:"Driver Name",prop:"driver_name"}),(0,t.bF)(s,{label:"Online Status"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(c,{type:"1"===e.online_status?"success":"info"},{default:(0,t.k6)((()=>[(0,t.eW)((0,t.v_)("1"===e.online_status?"Online":"Offline"),1)])),_:2},1032,["type"])])),_:1}),(0,t.bF)(s,{label:"Reportime",prop:"reportime",sortable:""}),(0,t.bF)(s,{label:"Trailer IDs",prop:"trailer_ids"}),(0,t.bF)(s,{label:"Driver License",prop:"driver_license",sortable:""}),(0,t.bF)(s,{label:"License Expiration Date",sortable:""},{default:(0,t.k6)((({row:e})=>[(0,t.eW)((0,t.v_)(o.formatLicenseDate(e.license_expiration_date)),1)])),_:1})])),_:1},8,["data"]),(0,t.bF)(u,{background:"",currentPage:o.currentPage,"onUpdate:currentPage":a[2]||(a[2]=e=>o.currentPage=e),"page-size":50,total:o.filteredDrivers.length,layout:"prev, pager, next",class:"pagination-container bottom-pagination",onCurrentChange:o.handlePageChange},null,8,["currentPage","total","onCurrentChange"]),(0,t.bF)(m,{visible:o.editDialogVisible,driverData:o.selectedDriver,truckGroups:o.truckGroups,onUpdateSuccess:o.handleUpdateSuccess,onClose:a[3]||(a[3]=e=>o.editDialogVisible=!1)},null,8,["visible","driverData","truckGroups","onUpdateSuccess"]),(0,t.bF)(_,{visible:o.addDialogVisible,truckGroups:o.truckGroups,onAddSuccess:o.handleAddSuccess,onClose:a[4]||(a[4]=e=>o.addDialogVisible=!1)},null,8,["visible","truckGroups","onAddSuccess"])])}function wl(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-date-picker"),p=(0,t.g2)("el-form"),m=(0,t.g2)("el-button"),_=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(_,{title:"Edit Truck Driver",modelValue:o.dialogVisible,"onUpdate:modelValue":a[6]||(a[6]=e=>o.dialogVisible=e),width:"600px",onClose:o.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(m,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(m,{type:"primary",onClick:o.submitEdit},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("Save")]))),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[(0,t.bF)(p,{ref:"formRef",model:o.formData,"label-width":"150px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Driver User ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.driver_user_id,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.driver_user_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver Name"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.driver_name,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.driver_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver PWD"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.driver_pwd,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.driver_pwd=e),type:"password","show-password":""},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Group Name"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.formData.truck_group_id,"onUpdate:modelValue":a[3]||(a[3]=e=>o.formData.truck_group_id=e),placeholder:"Select Truck Group"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(l.truckGroups,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver License"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.driver_license,"onUpdate:modelValue":a[4]||(a[4]=e=>o.formData.driver_license=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"License Expiration Date"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.datePickerValue,"onUpdate:modelValue":a[5]||(a[5]=e=>o.datePickerValue=e),type:"date",format:"MM/DD/YYYY",placeholder:"Select Date",onChange:o.updateLicenseDate},null,8,["modelValue","onChange"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var Ll={props:{visible:Boolean,driverData:Object,truckGroups:Array},setup(e,{emit:a}){const l=(0,t.KR)(e.visible),o=(0,t.KR)({}),r=(0,t.KR)(null);(0,t.wB)((()=>e.visible),(a=>{l.value=a,a&&i(e.driverData)})),(0,t.wB)((()=>e.driverData),(e=>{i(e)}));const i=e=>{if(o.value={...e,_driver_user_id:e.driver_user_id,truck_id:e.truck_id||""},e.license_expiration_date){let a=C()(e.license_expiration_date);r.value=a.isValid()?a.toDate():null}else r.value=null},d=e=>{e&&(o.value.license_expiration_date=C()(e).format("YYYY-MM-DD")+"T00:00:00.000Z")},u=async()=>{try{const l=localStorage.getItem("authToken");o.value.driver_user_id!==e.driverData.driver_user_id&&(o.value._driver_user_id=e.driverData.driver_user_id),o.value.license_expiration_date&&!o.value.license_expiration_date.includes("T")&&(o.value.license_expiration_date=C()(o.value.license_expiration_date).format("YYYY-MM-DD")+"T00:00:00.000Z");const t={Token:l,Timestamp:Date.now(),Sign:"string",driver_data:{driver_user_id:o.value.driver_user_id,driver_name:o.value.driver_name,_driver_user_id:o.value._driver_user_id,driver_pwd:o.value.driver_pwd?o.value.driver_pwd:"",truck_group_id:o.value.truck_group_id,truck_id:o.value.truck_id,driver_license:o.value.driver_license,license_expiration_date:o.value.license_expiration_date}};console.log("🚀 API 傳遞的資料:",t);const r=await te.A.post(`${oe}/Truck/TruckDriverUpdate`,t);1e3===r.data.Code?(Be.nk.success("Driver updated successfully!"),a("update-success",{...o.value}),n()):Be.nk.error("Update failed: "+r.data.Code)}catch(l){console.error("API error:",l),Be.nk.error("API request failed.")}},n=()=>{l.value=!1,a("close")};return{dialogVisible:l,formData:o,datePickerValue:r,updateLicenseDate:d,submitEdit:u,closeDialog:n}}};const Il=(0,i.A)(Ll,[["render",wl],["__scopeId","data-v-11918b88"]]);var Ul=Il;function Pl(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-date-picker"),p=(0,t.g2)("el-form"),m=(0,t.g2)("el-button"),_=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(_,{title:"Add Truck Driver",modelValue:o.dialogVisible,"onUpdate:modelValue":a[6]||(a[6]=e=>o.dialogVisible=e),width:"600px",onClose:o.closeDialog,"append-to-body":"","lock-scroll":!1,"modal-append-to-body":!1},{footer:(0,t.k6)((()=>[(0,t.bF)(m,{onClick:o.closeDialog},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(m,{type:"primary",onClick:o.submitAdd},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("Save")]))),_:1},8,["onClick"])])),default:(0,t.k6)((()=>[(0,t.bF)(p,{ref:"formRef",model:o.formData,"label-width":"150px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"* Driver User ID",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.driver_user_id,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.driver_user_id=e),placeholder:"Enter Driver User ID"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"* Driver Name",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.driver_name,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.driver_name=e),placeholder:"Enter Driver Name"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver PWD"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.driver_pwd,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.driver_pwd=e),type:"password","show-password":"",placeholder:"Enter Password"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Truck Group Name"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:o.formData.truck_group_id,"onUpdate:modelValue":a[3]||(a[3]=e=>o.formData.truck_group_id=e),placeholder:"Select Truck Group"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(l.truckGroups,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Driver License"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:o.formData.driver_license,"onUpdate:modelValue":a[4]||(a[4]=e=>o.formData.driver_license=e),placeholder:"Enter Driver License"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"License Expiration Date"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:o.datePickerValue,"onUpdate:modelValue":a[5]||(a[5]=e=>o.datePickerValue=e),type:"date",format:"MM/DD/YYYY",placeholder:"Select Date",onChange:o.updateLicenseDate},null,8,["modelValue","onChange"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var Ol={props:{visible:Boolean,truckGroups:Array},setup(e,{emit:a}){const l=(0,t.KR)(e.visible),o=(0,t.KR)({}),r=(0,t.KR)(null);(0,t.wB)((()=>e.visible),(e=>{l.value=e,e&&i()}));const i=()=>{o.value={driver_user_id:"",driver_name:"",driver_pwd:"",truck_group_id:null,truck_id:"",driver_license:"",license_expiration_date:null},r.value=null},d=e=>{e&&(o.value.license_expiration_date=C()(e).startOf("day").toISOString())},u=async()=>{try{if(!o.value.driver_user_id||!o.value.driver_name)return void Be.nk.error("Driver User ID 和 Driver Name 為必填！");const e=localStorage.getItem("authToken"),l={Token:e,Timestamp:Date.now(),Sign:"string",driver_data:{driver_user_id:o.value.driver_user_id,driver_name:o.value.driver_name,_driver_user_id:o.value.driver_user_id,driver_pwd:o.value.driver_pwd||"",truck_group_id:o.value.truck_group_id,truck_id:o.value.truck_id,driver_license:o.value.driver_license,license_expiration_date:o.value.license_expiration_date}},t=await te.A.post(`${oe}/Truck/TruckDriverAdd`,l);1e3===t.data.Code?(Be.nk.success("Driver added successfully!"),a("add-success"),n()):Be.nk.error("Add failed: "+t.data.Code)}catch(e){Be.nk.error("API request failed.")}},n=()=>{l.value=!1,a("close")};return{dialogVisible:l,formData:o,datePickerValue:r,updateLicenseDate:d,submitAdd:u,closeDialog:n}}};const Rl=(0,i.A)(Ol,[["render",Pl],["__scopeId","data-v-05a9e9e1"]]);var Yl=Rl,Nl={components:{TruckDriverEditDialog:Ul,TruckDriverAddDialog:Yl},setup(){const e=(0,t.KR)([]),a=(0,t.KR)([]),l=(0,t.KR)(""),o=(0,t.KR)(1),r=(0,t.KR)(!1),i=(0,t.KR)(!1),d=(0,t.KR)(null),u=async()=>{try{const a=localStorage.getItem("authToken"),l=await te.A.post(`${oe}/Truck/TruckDriverList`,{Token:a,Timestamp:Date.now(),Sign:"string",Truck_id:""});1e3===l.data.Code?(e.value=l.data.driver_list.map((e=>({driver_user_id:e.driver_user_id,truck_id:e.truck_id||"N/A",truck_group_id:e.truck_group_id,driver_name:e.driver_name,online_status:e.online_status,reportime:e.reportime||0,trailer_ids:e.trailer_ids||"N/A",driver_license:e.driver_license,license_expiration_date:e.license_expiration_date?C()(e.license_expiration_date).toISOString():""}))),p()):Be.nk.error("Failed to fetch driver data.")}catch(a){console.error("Error fetching truck driver list:",a),Be.nk.error("API Request Failed.")}},n=e=>e?C()(e).format("MM/DD/YYYY"):"N/A",s=e=>{d.value={...e},r.value=!0},c=async()=>{try{const e=localStorage.getItem("authToken"),l=await te.A.post(`${oe}/Truck/GroupList`,{Token:e,Timestamp:Date.now(),Sign:"string",group_id:""});1e3===l.data.Code?(a.value=l.data.group_list.map((e=>({id:e.truck_group_id,name:e.truck_group_name}))),p()):console.error("Failed to fetch truck groups.")}catch(e){console.error("API error:",e)}},p=()=>{e.value.forEach((e=>{const l=a.value.find((a=>a.id===e.truck_group_id));e.truck_group_name=l?l.name:"N/A"}))},m=(0,t.EW)((()=>l.value?e.value.filter((e=>e.driver_user_id.toLowerCase().includes(l.value.toLowerCase())||e.truck_group_name.toLowerCase().includes(l.value.toLowerCase())||e.driver_name.toLowerCase().includes(l.value.toLowerCase()))):e.value)),_=(0,t.EW)((()=>m.value.slice(50*(o.value-1),50*o.value))),b=()=>{u(),r.value=!1},g=()=>{i.value=!0},k=()=>{i.value=!1,u()};return(0,t.sV)((()=>{c(),u()})),{driverList:e,truckGroups:a,searchQuery:l,currentPage:o,filteredDrivers:m,paginatedDrivers:_,handlePageChange:e=>o.value=e,editDialogVisible:r,addDialogVisible:i,selectedDriver:d,openEditDialog:s,formatLicenseDate:n,handleUpdateSuccess:b,addDriver:g,handleAddSuccess:k}}};const xl=(0,i.A)(Nl,[["render",El],["__scopeId","data-v-2a759008"]]);var Ml=xl;const Wl={class:"map-container"},Kl={class:"controls"};function Xl(e,a,l,o,r,i){const d=(0,t.g2)("el-option"),u=(0,t.g2)("el-select"),n=(0,t.g2)("Marker"),s=(0,t.g2)("InfoWindow"),c=(0,t.g2)("GoogleMap");return(0,t.uX)(),(0,t.CE)("div",Wl,[(0,t.Lk)("div",Kl,[(0,t.bF)(u,{modelValue:o.selectedCompany,"onUpdate:modelValue":a[0]||(a[0]=e=>o.selectedCompany=e),placeholder:"Select Trucking Company",onChange:o.filterDrivers},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"All Companies",value:""}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.dropdownMenu,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.text,label:e.text,value:e.text},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,t.bF)(u,{modelValue:o.selectedDriver,"onUpdate:modelValue":a[1]||(a[1]=e=>o.selectedDriver=e),placeholder:"Select Driver",onChange:o.filterDrivers},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"All Drivers",value:""}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.filteredDrivers,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.id,label:e.text,value:e.text},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])]),(0,t.bF)(c,{center:o.center,zoom:o.zoom,style:{width:"100%",height:"80%"},options:{disableDefaultUI:!1,zoomControl:!0}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.filteredLocations,((e,a)=>((0,t.uX)(),(0,t.Wv)(n,{key:a,options:{position:{lat:e.lat,lng:e.lng}},onClick:a=>o.selectLocation(e)},null,8,["options","onClick"])))),128)),o.selectedLocation?((0,t.uX)(),(0,t.Wv)(s,{key:0,options:{position:{lat:o.selectedLocation.lat,lng:o.selectedLocation.lng}},onCloseclick:a[2]||(a[2]=e=>o.selectedLocation=null)},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[a[3]||(a[3]=(0,t.Lk)("strong",null,"Driver:",-1)),(0,t.eW)(" "+(0,t.v_)(o.selectedLocation.text),1)]),(0,t.Lk)("p",null,[a[4]||(a[4]=(0,t.Lk)("strong",null,"Coordinates:",-1)),(0,t.eW)(" "+(0,t.v_)(o.selectedLocation.lat)+", "+(0,t.v_)(o.selectedLocation.lng),1)])])])),_:1},8,["options"])):(0,t.Q3)("",!0)])),_:1},8,["center","zoom"])])}l(3579);var zl=l(8871),Hl={components:{GoogleMap:zl.u6,Marker:zl.pH,InfoWindow:zl.Fu},setup(){const e=(0,t.KR)([]),a=(0,t.KR)([]),l=(0,t.KR)(null),o=(0,t.KR)(10),r=(0,t.KR)(null),i=(0,t.KR)(null),d=(0,t.KR)(null),u=(0,t.EW)((()=>{if(!r.value)return[];const e=a.value.find((e=>e.text===r.value));return e?e.children:[]})),n=(0,t.EW)((()=>e.value.length?i.value?e.value.filter((e=>e.text===i.value)):r.value?e.value.filter((e=>u.value.some((a=>a.text===e.text)))):e.value:[])),s=async()=>{try{const t=localStorage.getItem("authToken"),r=await te.A.post(`${oe}/Map/DriverOnline`,{Token:t,Timestamp:Date.now(),Sign:"string"});if(1e3===r.data.Code){const t=r.data.data;e.value=t.locations,a.value=t.DropdownMenu,l.value=t.center,o.value=t.zoom}else console.error("API response error",r.data)}catch(t){console.error("Failed to fetch map data",t)}},c=e=>{d.value=e},p=()=>{r.value||(i.value=""),d.value=null};return(0,t.sV)(s),{locations:e,dropdownMenu:a,center:l,zoom:o,selectedCompany:r,selectedDriver:i,selectedLocation:d,filteredDrivers:u,filteredLocations:n,selectLocation:c,filterDrivers:p}}};const Gl=(0,i.A)(Hl,[["render",Xl],["__scopeId","data-v-864e3018"]]);var $l=Gl;const Bl={class:"employee-page"},Ql={class:"search-container"},ql={class:"button-container"},jl={key:0},Zl={key:1};function Jl(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-button"),s=(0,t.g2)("el-table-column"),c=(0,t.g2)("el-table"),p=(0,t.g2)("AdminAddDialog"),m=(0,t.g2)("AdminEditDialog"),_=(0,t.g2)("AdminLogDialog"),b=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)("div",Bl,[a[10]||(a[10]=(0,t.Lk)("h1",null,"Employee List",-1)),(0,t.Lk)("div",Ql,[(0,t.bF)(d,{modelValue:r.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>r.searchQuery=e),placeholder:"Search Employee Name or User ID",clearable:"",class:"search-input"},null,8,["modelValue"])]),(0,t.bF)(u,{background:"",layout:"prev, pager, next",total:i.filteredData.length,"page-size":r.pageSize,"current-page":r.currentPage,"onUpdate:currentPage":a[1]||(a[1]=e=>r.currentPage=e),class:"pagination-container top-pagination"},null,8,["total","page-size","current-page"]),(0,t.Lk)("div",ql,[(0,t.bF)(n,{type:"primary",size:"small",onClick:a[2]||(a[2]=e=>r.addDialogVisible=!0)},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("Add")]))),_:1})]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{data:i.paginatedData,border:"",stripe:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"Actions",width:"180"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(n,{type:"primary",size:"small",onClick:a=>i.handleEdit(e)},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("Edit")]))),_:2},1032,["onClick"]),(0,t.bF)(n,{type:"primary",size:"small",onClick:a=>i.handleLog(e)},{default:(0,t.k6)((()=>a[9]||(a[9]=[(0,t.eW)("Log")]))),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(s,{prop:"employee_name",label:"Employee Name",width:"250"}),(0,t.bF)(s,{prop:"employee_user_id",label:"Employee User ID",width:"200"}),(0,t.bF)(s,{label:"User Group",width:"250"},{default:(0,t.k6)((({row:e})=>[e.employee_group&&e.employee_group.length>0?((0,t.uX)(),(0,t.CE)("span",jl,(0,t.v_)(e.employee_group.map((e=>e.group_name)).join(", ")),1)):((0,t.uX)(),(0,t.CE)("span",Zl,"-"))])),_:1})])),_:1},8,["data"])),[[b,r.loading]]),(0,t.bF)(u,{background:"",layout:"prev, pager, next",total:i.filteredData.length,"page-size":r.pageSize,"current-page":r.currentPage,"onUpdate:currentPage":a[3]||(a[3]=e=>r.currentPage=e),class:"pagination-container bottom-pagination"},null,8,["total","page-size","current-page"]),(0,t.bF)(p,{visible:r.addDialogVisible,"onUpdate:visible":a[4]||(a[4]=e=>r.addDialogVisible=e),onUpdateSuccess:i.fetchEmployeeData},null,8,["visible","onUpdateSuccess"]),(0,t.bF)(m,{visible:r.editDialogVisible,"onUpdate:visible":a[5]||(a[5]=e=>r.editDialogVisible=e),employeeData:r.selectedEmployee,onUpdateSuccess:i.fetchEmployeeData},null,8,["visible","employeeData","onUpdateSuccess"]),(0,t.bF)(_,{visible:r.logDialogVisible,"onUpdate:visible":a[6]||(a[6]=e=>r.logDialogVisible=e),userId:r.selectedUserId},null,8,["visible","userId"])])}const et={class:"dialog-footer"};function at(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-form"),p=(0,t.g2)("el-button"),m=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(m,{modelValue:r.dialogVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>r.dialogVisible=e),title:"Add Employee",width:"600px",onClose:i.closeDialog},{footer:(0,t.k6)((()=>[(0,t.Lk)("div",et,[(0,t.bF)(p,{onClick:i.closeDialog},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(p,{type:"primary",onClick:i.addEmployee},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("Save")]))),_:1},8,["onClick"])])])),default:(0,t.k6)((()=>[(0,t.bF)(c,{ref:"addForm",model:r.formData,"label-width":"200px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Employee Name"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.employee_name,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.employee_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Employee User ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.employee_user_id,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.employee_user_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Employee User Password"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.employee_user_pwd,"onUpdate:modelValue":a[2]||(a[2]=e=>r.formData.employee_user_pwd=e),type:"password"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"User Group"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.formData.user_group,"onUpdate:modelValue":a[3]||(a[3]=e=>r.formData.user_group=e),multiple:"",placeholder:"Select User Group"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.userGroups,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var lt={props:{visible:Boolean},data(){return{dialogVisible:!1,formData:{employee_name:"",employee_user_id:"",employee_user_pwd:"",user_group:[]},userGroups:["Administrator","API","EMP","MGMT","MONEY","TCSR","TDRV","TPIC"]}},watch:{visible(e){this.dialogVisible=e,e&&this.resetForm()}},methods:{async addEmployee(){try{let e=localStorage.getItem("authToken");if(!e)return alert("Your session has expired. Please log in again."),void this.$router.push("/login");const a={Token:e,Timestamp:Date.now(),Sign:"string",data:this.formData};console.log("📢 發送 API 請求 /Admin/EmployeeAdd:",a);const l=await te.A.post(`${oe}/Admin/EmployeeAdd`,a);1e3===l.data.Code?(this.$message.success("Employee added successfully!"),this.$emit("update-success"),this.closeDialog()):this.$message.error("Failed to add employee: "+l.data.Code)}catch(e){console.error("❌ API Request Failed:",e),this.$message.error("Failed to add employee. Please try again later.")}},closeDialog(){this.$emit("update:visible",!1)},resetForm(){this.formData={employee_name:"",employee_user_id:"",employee_user_pwd:"",user_group:[]}}}};const tt=(0,i.A)(lt,[["render",at],["__scopeId","data-v-74e9e983"]]);var ot=tt;const rt={class:"dialog-footer"};function it(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),c=(0,t.g2)("el-form"),p=(0,t.g2)("el-button"),m=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(m,{modelValue:r.dialogVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>r.dialogVisible=e),title:"Edit Employee",width:"600px",onClose:i.closeDialog},{footer:(0,t.k6)((()=>[(0,t.Lk)("div",rt,[(0,t.bF)(p,{onClick:i.closeDialog},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Close")]))),_:1},8,["onClick"]),(0,t.bF)(p,{type:"primary",onClick:i.saveEmployee},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("Save")]))),_:1},8,["onClick"])])])),default:(0,t.k6)((()=>[(0,t.bF)(c,{ref:"editForm",model:r.formData,"label-width":"200px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"Employee Name"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.employee_name,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.employee_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Employee User ID"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.employee_user_id,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.employee_user_id=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"Employee User Password"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:r.formData.employee_user_pwd,"onUpdate:modelValue":a[2]||(a[2]=e=>r.formData.employee_user_pwd=e),type:"password"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"User Group"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:r.formData.user_group,"onUpdate:modelValue":a[3]||(a[3]=e=>r.formData.user_group=e),multiple:"",placeholder:"Select User Group"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.userGroups,(e=>((0,t.uX)(),(0,t.Wv)(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var dt={props:{visible:Boolean,employeeData:Object},data(){return{dialogVisible:!1,formData:{employee_id:0,employee_name:"",employee_user_id:"",employee_user_pwd:"",user_group:[]},userGroups:[{label:"Administrator",value:"DEFAULT_ADMIN"},{label:"API",value:"DEFAULT_API"},{label:"EMP",value:"DEFAULT_EMP"},{label:"MGMT",value:"DEFAULT_MGMT"},{label:"MONEY",value:"DEFAULT_MONEY"},{label:"TCSR",value:"DEFAULT_TCSR"},{label:"TDRV",value:"DEFAULT_TDRV"},{label:"TPIC",value:"DEFAULT_TPIC"}]}},watch:{visible(e){this.dialogVisible=e},employeeData:{immediate:!0,handler(e){e&&(this.formData={employee_id:e.employee_id,employee_name:e.employee_name,employee_user_id:e.employee_user_id,employee_user_pwd:"",user_group:e.employee_group?e.employee_group.map((e=>this.userGroups.find((a=>a.label===e.group_name))?.value||e.group_name)):[]})}}},methods:{closeDialog(){this.$emit("update:visible",!1)},async saveEmployee(){try{let e=localStorage.getItem("authToken");if(!e)return alert("Your session has expired. Please log in again."),void this.$router.push("/login");const a={Token:e,Timestamp:Date.now(),Sign:"string",data:{...this.formData,user_group:this.formData.user_group||[]}};console.log("🔹 正在發送的 payload:",JSON.stringify(a,null,2));const l=await te.A.post(`${oe}/Admin/EmployeeEdit`,a);1e3===l.data.Code?(this.$message.success("Employee updated successfully!"),this.$emit("update-success"),this.closeDialog()):this.$message.error("Failed to update employee: "+l.data.Code)}catch(e){console.error("❌ API Request Failed:",e),this.$message.error("Failed to update employee. Please try again later.")}}}};const ut=(0,i.A)(dt,[["render",it],["__scopeId","data-v-16b10a48"]]);var nt=ut;const st={class:"search-container"},ct={class:"dialog-footer"};function pt(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-table-column"),s=(0,t.g2)("el-table"),c=(0,t.g2)("el-button"),p=(0,t.g2)("el-dialog"),m=(0,t.gN)("loading");return(0,t.uX)(),(0,t.Wv)(p,{modelValue:r.dialogVisible,"onUpdate:modelValue":a[1]||(a[1]=e=>r.dialogVisible=e),width:"800px","destroy-on-close":!0,onOpened:i.handleDialogOpened,onClose:i.closeDialog},{footer:(0,t.k6)((()=>[(0,t.Lk)("div",ct,[(0,t.bF)(c,{onClick:i.closeDialog},{default:(0,t.k6)((()=>a[2]||(a[2]=[(0,t.eW)("Close")]))),_:1},8,["onClick"])])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",st,[(0,t.bF)(d,{modelValue:r.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>r.searchQuery=e),placeholder:"Search in Note...",clearable:"",class:"search-input"},null,8,["modelValue"])]),(0,t.bF)(u,{background:"",layout:"prev, pager, next",total:i.filteredData.length,"page-size":r.pageSize,"current-page":r.currentPage,onCurrentChange:i.handlePageChange,class:"pagination-container top-pagination"},null,8,["total","page-size","current-page","onCurrentChange"]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(s,{data:i.paginatedLogs,border:"",stripe:"",key:r.tableKey},{default:(0,t.k6)((()=>[(0,t.bF)(n,{prop:"action",label:"Action",width:"200"}),(0,t.bF)(n,{prop:"user_id",label:"User ID",width:"150"}),(0,t.bF)(n,{prop:"str_logdate",label:"Log Date",width:"200"}),(0,t.bF)(n,{prop:"note",label:"Note"})])),_:1},8,["data"])),[[m,r.loading]]),(0,t.bF)(u,{background:"",layout:"prev, pager, next",total:i.filteredData.length,"page-size":r.pageSize,"current-page":r.currentPage,onCurrentChange:i.handlePageChange,class:"pagination-container bottom-pagination"},null,8,["total","page-size","current-page","onCurrentChange"])])),_:1},8,["modelValue","onOpened","onClose"])}var mt={props:{visible:Boolean,userId:String},data(){return{dialogVisible:!1,logData:[],loading:!1,tableKey:0,currentPage:1,pageSize:100,searchQuery:""}},computed:{filteredData(){if(!this.searchQuery)return this.logData;const e=this.searchQuery.toLowerCase();return this.logData.filter((a=>a.note&&a.note.toLowerCase().includes(e)))},paginatedLogs(){const e=(this.currentPage-1)*this.pageSize,a=e+this.pageSize;return this.filteredData.slice(e,a)}},watch:{visible(e){this.dialogVisible=e,e&&this.userId&&this.fetchLogs()}},methods:{async fetchLogs(){if(this.userId){this.loading=!0;try{let e=localStorage.getItem("authToken");if(!e)return alert("Your session has expired. Please log in again."),void this.$router.push("/login");const a={Token:e,Timestamp:Date.now(),Sign:"string",user_id:this.userId};console.log("📢 發送 API 請求 /Admin/EmployeeLog:",a);const l=await te.A.post(`${oe}/Admin/EmployeeLog`,a);1e3===l.data.Code?(this.logData=l.data.data||[],console.log("✅ API 回應:",this.logData),this.currentPage=1,this.searchQuery="",this.refreshTable()):this.$message.error("Failed to fetch logs: "+l.data.Code)}catch(e){console.error("❌ API Request Failed:",e),this.$message.error("Failed to fetch logs. Please try again later.")}finally{this.loading=!1}}else console.error("❌ 錯誤: userId 為空，無法獲取日誌")},handleDialogOpened(){this.$nextTick((()=>{window.dispatchEvent(new Event("resize"))}))},refreshTable(){this.tableKey+=1},closeDialog(){this.$emit("update:visible",!1)},handlePageChange(e){this.currentPage=e}}};const _t=(0,i.A)(mt,[["render",pt],["__scopeId","data-v-34414093"]]);var bt=_t,gt={components:{AdminAddDialog:ot,AdminEditDialog:nt,AdminLogDialog:bt},data(){return{employeeData:[],searchQuery:"",loading:!1,currentPage:1,pageSize:20,addDialogVisible:!1,editDialogVisible:!1,logDialogVisible:!1,selectedEmployee:null,selectedUserId:null}},computed:{...(0,F.aH)(["authToken"]),filteredData(){if(!this.searchQuery)return this.employeeData;const e=this.searchQuery.toLowerCase();return this.employeeData.filter((a=>a.employee_name&&a.employee_name.toLowerCase().includes(e)||a.employee_user_id&&a.employee_user_id.toLowerCase().includes(e)))},paginatedData(){const e=(this.currentPage-1)*this.pageSize,a=e+this.pageSize;return this.filteredData.slice(e,a)}},methods:{...(0,F.i0)(["checkTokenExpiration"]),async fetchEmployeeData(){this.loading=!0;try{let e=this.authToken||localStorage.getItem("authToken");if(!e)return alert("Your session has expired. Please log in again."),void this.$router.push("/login");const a=await te.A.post(`${oe}/Admin/EmployeeList`,{Token:e,Timestamp:Date.now(),Sign:"string"});console.log("✅ API 回應資料:",a.data),1e3===a.data.Code?(this.employeeData=a.data.data||[],this.currentPage=1):alert("Failed to fetch employee data: "+a.data.Code)}catch(e){console.error("❌ API Request Failed:",e),alert("Failed to fetch employee data. Please try again later.")}finally{this.loading=!1}},handleEdit(e){this.selectedEmployee=JSON.parse(JSON.stringify(e)),this.editDialogVisible=!0},handleLog(e){this.selectedUserId=e.employee_user_id,this.logDialogVisible=!0}},mounted(){this.fetchEmployeeData()}};const kt=(0,i.A)(gt,[["render",Jl],["__scopeId","data-v-5ce0ee18"]]);var ft=kt;const vt={class:"rank-page"},ht={class:"search-container"};function Dt(e,a,l,o,r,i){const d=(0,t.g2)("el-input"),u=(0,t.g2)("el-pagination"),n=(0,t.g2)("el-table-column"),s=(0,t.g2)("el-table"),c=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)("div",vt,[a[3]||(a[3]=(0,t.Lk)("h1",null,"Rank",-1)),(0,t.Lk)("div",ht,[(0,t.bF)(d,{modelValue:r.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>r.searchQuery=e),placeholder:"Search Week or Customer Name",clearable:"",class:"search-input"},null,8,["modelValue"])]),(0,t.bF)(u,{background:"",layout:"prev, pager, next",total:i.filteredData.length,"page-size":r.pageSize,"current-page":r.currentPage,"onUpdate:currentPage":a[1]||(a[1]=e=>r.currentPage=e),class:"pagination-container top-pagination"},null,8,["total","page-size","current-page"]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(s,{data:i.paginatedData,border:"",stripe:"",style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(n,{prop:"year",label:"Year",width:"100"}),(0,t.bF)(n,{prop:"week",label:"Week",width:"100"}),(0,t.bF)(n,{prop:"customer_name",label:"Customer Name",width:"250"},{default:(0,t.k6)((({row:e})=>[(0,t.eW)((0,t.v_)(e.customer_name?e.customer_name:e.user_id),1)])),_:1}),(0,t.bF)(n,{prop:"login_count",label:"Login Count",width:"150",sortable:"","sort-method":i.sortByNumber},null,8,["sort-method"])])),_:1},8,["data"])),[[c,r.loading]]),(0,t.bF)(u,{background:"",layout:"prev, pager, next",total:i.filteredData.length,"page-size":r.pageSize,"current-page":r.currentPage,"onUpdate:currentPage":a[2]||(a[2]=e=>r.currentPage=e),class:"pagination-container bottom-pagination"},null,8,["total","page-size","current-page"])])}var Ft={data(){return{rankData:[],searchQuery:"",loading:!1,currentPage:1,pageSize:20}},computed:{...(0,F.aH)(["authToken"]),filteredData(){if(!this.searchQuery)return this.rankData;const e=this.searchQuery.toLowerCase();return this.rankData.filter((a=>a.week.toString().includes(e)||a.customer_name&&a.customer_name.toLowerCase().includes(e)||a.user_id&&a.user_id.toLowerCase().includes(e)))},paginatedData(){const e=(this.currentPage-1)*this.pageSize,a=e+this.pageSize;return this.filteredData.slice(e,a)}},methods:{...(0,F.i0)(["checkTokenExpiration"]),sortByNumber(e,a){return e.login_count-a.login_count},async fetchRankData(){this.loading=!0;try{let e=this.authToken||localStorage.getItem("authToken");if(!e)return alert("您的登入已過期，請重新登入。"),void this.$router.push("/login");const a=await te.A.post(`${oe}/Admin/LoginRank`,{Token:e,Timestamp:Date.now(),Sign:"string"});1e3===a.data.Code?(this.rankData=a.data.data||[],this.currentPage=1):alert("Failed to fetch rank data: "+a.data.Code)}catch(e){console.error("❌ API 請求失敗:",e),alert("Failed to fetch rank data. 請稍後重試！")}finally{this.loading=!1}}},mounted(){this.fetchRankData()}};const Vt=(0,i.A)(Ft,[["render",Dt],["__scopeId","data-v-45f26d98"]]);var Ct=Vt;const yt={class:"billing-page"},St={class:"amount"},Tt={class:"amount"},At={class:"amount"},Et={class:"pagination-container"},wt={class:"table-container"},Lt={class:"pagination-container"};function It(e,a,l,o,r,i){const d=(0,t.g2)("el-card"),u=(0,t.g2)("el-col"),n=(0,t.g2)("el-row"),s=(0,t.g2)("el-pagination"),c=(0,t.g2)("el-table-column"),p=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.CE)("div",yt,[a[5]||(a[5]=(0,t.Lk)("h1",null,"Billing List",-1)),(0,t.bF)(n,{gutter:20,class:"summary-row"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(d,{class:"summary-card customer-total"},{default:(0,t.k6)((()=>[a[2]||(a[2]=(0,t.Lk)("div",null,"CUSTOMER TOTAL AMOUNT",-1)),(0,t.Lk)("div",St,"$ "+(0,t.v_)(r.totalCustomer),1)])),_:1})])),_:1}),(0,t.bF)(u,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(d,{class:"summary-card driver-total"},{default:(0,t.k6)((()=>[a[3]||(a[3]=(0,t.Lk)("div",null,"DRIVER TOTAL AMOUNT",-1)),(0,t.Lk)("div",Tt,"$ "+(0,t.v_)(r.totalDriver),1)])),_:1})])),_:1}),(0,t.bF)(u,{span:8},{default:(0,t.k6)((()=>[(0,t.bF)(d,{class:"summary-card profit-total"},{default:(0,t.k6)((()=>[a[4]||(a[4]=(0,t.Lk)("div",null,"PROFIT",-1)),(0,t.Lk)("div",At,"$ "+(0,t.v_)(r.totalProfit),1)])),_:1})])),_:1})])),_:1}),(0,t.Lk)("div",Et,[(0,t.bF)(s,{background:"",layout:"prev, pager, next",total:r.billingList.length,"page-size":r.pageSize,"current-page":r.currentPage,"onUpdate:currentPage":a[0]||(a[0]=e=>r.currentPage=e)},null,8,["total","page-size","current-page"])]),(0,t.Lk)("div",wt,[(0,t.bF)(p,{data:r.billingList,stripe:"",border:"",style:{width:"100%","min-width":"8950px"}},{default:(0,t.k6)((()=>[(0,t.bF)(c,{prop:"order_id",label:"Load ID",width:"100"}),(0,t.bF)(c,{prop:"yearweek",label:"Year Week",width:"100"}),(0,t.bF)(c,{prop:"driver_user_id",label:"Driver User ID",width:"120"}),(0,t.bF)(c,{prop:"truck_group_name",label:"Truck Group Name",width:"200"}),(0,t.bF)(c,{prop:"order_type",label:"Load Type",width:"100"}),(0,t.bF)(c,{prop:"customer_name",label:"Customer Name",width:"180"}),(0,t.bF)(c,{prop:"customer_location",label:"CUSTOMER / Location",width:"180"}),(0,t.bF)(c,{prop:"pick_terminal",label:"PICK TERMINAL",width:"120"}),(0,t.bF)(c,{prop:"drop_terminal",label:"DROP TERMINAL",width:"120"}),(0,t.bF)(c,{prop:"booking_id",label:"Booking",width:"120"}),(0,t.bF)(c,{prop:"po_no",label:"Load Number / PO",width:"150"}),(0,t.bF)(c,{prop:"str_arrival_time",label:"Arrival Time",width:"150"}),(0,t.bF)(c,{prop:"str_schedule_date",label:"SCHEDULE DATE",width:"150"}),(0,t.bF)(c,{prop:"container",label:"CONTAINER #",width:"150"}),(0,t.bF)(c,{prop:"str_departure_time",label:"Departure Time",width:"150"}),(0,t.bF)(c,{prop:"str_total_load_time",label:"Total Load Time",width:"150"}),(0,t.bF)(c,{prop:"str_over_time",label:"Overtime",width:"120"}),(0,t.bF)(c,{prop:"customer_rate",label:"Customer Rate",width:"130"}),(0,t.bF)(c,{prop:"driver_rate",label:"Driver Rate",width:"120"}),(0,t.bF)(c,{prop:"customer_overtime",label:"Customer Overtime",width:"150"}),(0,t.bF)(c,{prop:"driver_overtime",label:"Driver Overtime",width:"150"}),(0,t.bF)(c,{prop:"FUEL_SURCHARGE",label:"FUEL SURCHARGE",width:"150"}),(0,t.bF)(c,{prop:"HAZ",label:"HAZ",width:"80"}),(0,t.bF)(c,{prop:"HAZ_BATTERIES",label:"HAZ BATTERIES",width:"150"}),(0,t.bF)(c,{prop:"INSPECTION",label:"INSPECTION",width:"120"}),(0,t.bF)(c,{prop:"DROP_FEE",label:"DROP FEE",width:"100"}),(0,t.bF)(c,{prop:"CHASSIS",label:"CHASSIS",width:"100"}),(0,t.bF)(c,{prop:"str_CHASSIS_FROM",label:"CHASSIS FROM",width:"150"}),(0,t.bF)(c,{prop:"str_CHASSIS_TO",label:"CHASSIS TO",width:"150"}),(0,t.bF)(c,{prop:"STORAGE",label:"STORAGE",width:"100"}),(0,t.bF)(c,{prop:"str_STORAGE_FROM",label:"STORAGE FROM",width:"150"}),(0,t.bF)(c,{prop:"str_STORAGE_TO",label:"STORAGE TO",width:"150"}),(0,t.bF)(c,{prop:"CHASSIS_STORAGE",label:"CHASSIS + STORAGE",width:"180"}),(0,t.bF)(c,{prop:"str_CHASSISSTORAGE_FROM",label:"CHASSISSTORAGE FROM",width:"180"}),(0,t.bF)(c,{prop:"str_CHASSISSTORAGE_TO",label:"CHASSISSTORAGE TO",width:"180"}),(0,t.bF)(c,{prop:"REEFER",label:"REEFER",width:"100"}),(0,t.bF)(c,{prop:"OVERWEIGHT",label:"OVERWEIGHT",width:"120"}),(0,t.bF)(c,{prop:"PREPULL",label:"PREPULL",width:"100"}),(0,t.bF)(c,{prop:"BOLT_SEAL",label:"BOLT SEAL",width:"120"}),(0,t.bF)(c,{prop:"add_extras",label:"Add Extras",width:"120"}),(0,t.bF)(c,{prop:"add_extras_note",label:"Add Extras Reason",width:"180"}),(0,t.bF)(c,{prop:"EXAM_SITE_EXTRA",label:"EXAM SITE EXTR",width:"160"}),(0,t.bF)(c,{prop:"customer_container_pickup_fee",label:"Customer Container Pickup Fee",width:"220"}),(0,t.bF)(c,{prop:"customer_container_dropoff_fee",label:"Customer Container Dropoff Fee",width:"230"}),(0,t.bF)(c,{prop:"driver_container_pickup_fee",label:"Driver Container Pickup Fee",width:"200"}),(0,t.bF)(c,{prop:"driver_container_dropoff_fee",label:"Driver Container Dropoff Fee",width:"210"}),(0,t.bF)(c,{prop:"_Sum_Customer",label:"Sum Customer",width:"150"}),(0,t.bF)(c,{prop:"_Sum_Driver",label:"Sum Driver",width:"150"}),(0,t.bF)(c,{prop:"customer_adj_amount",label:"Customer Adj Amount",width:"180"}),(0,t.bF)(c,{prop:"driver_adj_amount",label:"Driver Adj Amount",width:"170"}),(0,t.bF)(c,{prop:"adj_user_id",label:"Adj User Id",width:"150"}),(0,t.bF)(c,{prop:"str_adj_datetime",label:"Adj DateTime",width:"180"}),(0,t.bF)(c,{prop:"is_void",label:"Is Void",width:"100"}),(0,t.bF)(c,{prop:"Void_Price",label:"Void Price",width:"100"}),(0,t.bF)(c,{prop:"SPLIT",label:"Split",width:"100"}),(0,t.bF)(c,{prop:"TRIAXLE",label:"Triaxle",width:"100"}),(0,t.bF)(c,{prop:"PP_CTF",label:"PP CTF",width:"100"}),(0,t.bF)(c,{prop:"LAYOVER",label:"Layover",width:"100"}),(0,t.bF)(c,{prop:"SCALE_TICKET",label:"Scale Ticket",width:"120"}),(0,t.bF)(c,{prop:"SCALE_TICKET_HAZMAT",label:"Scale Ticket Hazmat",width:"180"}),(0,t.bF)(c,{prop:"bol_path",label:"bol_path",width:"150"}),(0,t.bF)(c,{prop:"tir_pu_empty_path",label:"tir pu empty path",width:"150"}),(0,t.bF)(c,{prop:"tir_drop_path",label:"tir_drop_path",width:"150"})])),_:1},8,["data"])]),(0,t.Lk)("div",Lt,[(0,t.bF)(s,{background:"",layout:"prev, pager, next",total:r.billingList.length,"page-size":r.pageSize,"current-page":r.currentPage,"onUpdate:currentPage":a[1]||(a[1]=e=>r.currentPage=e)},null,8,["total","page-size","current-page"])])])}C().extend(ge());var Ut={data(){return{billingList:[],totalCustomer:0,totalDriver:0,totalProfit:0,currentPage:1,pageSize:50}},computed:{paginatedBillingList(){const e=(this.currentPage-1)*this.pageSize;return this.billingList.slice(e,e+this.pageSize)}},methods:{async fetchBillingData(){const e=localStorage.getItem("authToken"),a=C()().startOf("isoWeek").format("YYYY-MM-DD"),l=C()().endOf("isoWeek").format("YYYY-MM-DD");try{const t=await te.A.post(`${oe}/Billing/List`,{Token:e,Timestamp:Date.now(),Sign:"string",start_date:a,end_date:l});1e3===t.data.Code?(this.billingList=t.data.data,this.totalCustomer=t.data.Customer,this.totalDriver=t.data.Driver,this.totalProfit=t.data.Profit):this.billingList=[]}catch(t){console.error("Error fetching billing data:",t),this.billingList=[]}}},mounted(){this.fetchBillingData()}};const Pt=(0,i.A)(Ut,[["render",It],["__scopeId","data-v-25492906"]]);var Ot=Pt;const Rt={template:"<div><h1>Home Page</h1></div>"},Yt=[{path:"/",component:j,children:[{path:"login",component:de},{path:"",component:Rt},{path:"order",component:Xe},{path:"customer",component:ka},{path:"truck",component:Qa},{path:"chassis",component:Pa},{path:"driver-fleet",component:sl},{path:"port",component:yl},{path:"truck-driver",component:Ml},{path:"map",component:$l},{path:"admin",component:ft},{path:"rank",component:Ct},{path:"billing",component:Ot}]},{path:"/:pathMatch(.*)*",redirect:"/login"}],Nt=(0,n.aE)({history:(0,n.LA)(),routes:Yt});Nt.beforeEach(((e,a,l)=>{const t=localStorage.getItem("authToken");"/login"===e.path||t?l():l("/login")}));var xt=Nt,Mt=(0,F.y$)({state:{authToken:localStorage.getItem("authToken")||"",username:localStorage.getItem("username")||"Guest",groups:JSON.parse(localStorage.getItem("groups"))||[],tokenExpiration:localStorage.getItem("tokenExpiration")||null},mutations:{SET_AUTH_TOKEN(e,a){e.authToken=a,localStorage.setItem("authToken",a)},SET_USERNAME(e,a){e.username=a,localStorage.setItem("username",a)},SET_GROUPS(e,a){e.groups=a,localStorage.setItem("groups",JSON.stringify(a))},SET_TOKEN_EXPIRATION(e,a){e.tokenExpiration=a,localStorage.setItem("tokenExpiration",a)},LOGOUT(e){e.authToken="",e.username="Guest",e.groups=[],e.tokenExpiration=null,localStorage.removeItem("authToken"),localStorage.removeItem("username"),localStorage.removeItem("groups"),localStorage.removeItem("tokenExpiration")}},actions:{login({commit:e},{token:a,username:l,groups:t}){const o=Date.now()+864e5;e("SET_AUTH_TOKEN",a),e("SET_USERNAME",l),e("SET_GROUPS",t||[]),e("SET_TOKEN_EXPIRATION",o)},logout({commit:e}){e("LOGOUT")},checkTokenExpiration({commit:e,state:a}){a.tokenExpiration&&Date.now()>a.tokenExpiration&&(e("LOGOUT"),alert("Session expired. Please log in again."))}},getters:{isAuthenticated:e=>!!e.authToken,username:e=>e.username,userGroups:e=>e.groups}}),Wt=l(5835),Kt=(l(4188),l(2266));if(!window.google||!window.google.maps){const e=new Kt.aH({apiKey:"AIzaSyAivOqdNbvSeRgB-NQpEnl61AhSKAW9_YE",version:"weekly",libraries:["places","marker"],region:"US",language:"en"});e.load().then((()=>{console.log("✅ Google Maps API loaded successfully!")}))}const Xt=(0,t.Ef)(u);Xt.use(xt),Xt.use(Mt),Xt.use(Wt.A),Xt.mount("#app"),xt.beforeEach(((e,a,l)=>{Mt.dispatch("checkTokenExpiration");const t=Mt.getters.isAuthenticated;t||"/login"===e.path?l():l("/login")}))}},a={};function l(t){var o=a[t];if(void 0!==o)return o.exports;var r=a[t]={exports:{}};return e[t].call(r.exports,r,r.exports,l),r.exports}l.m=e,function(){var e=[];l.O=function(a,t,o,r){if(!t){var i=1/0;for(s=0;s<e.length;s++){t=e[s][0],o=e[s][1],r=e[s][2];for(var d=!0,u=0;u<t.length;u++)(!1&r||i>=r)&&Object.keys(l.O).every((function(e){return l.O[e](t[u])}))?t.splice(u--,1):(d=!1,r<i&&(i=r));if(d){e.splice(s--,1);var n=o();void 0!==n&&(a=n)}}return a}r=r||0;for(var s=e.length;s>0&&e[s-1][2]>r;s--)e[s]=e[s-1];e[s]=[t,o,r]}}(),function(){l.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(a,{a:a}),a}}(),function(){l.d=function(e,a){for(var t in a)l.o(a,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){l.p="/vue/"}(),function(){var e={524:0};l.O.j=function(a){return 0===e[a]};var a=function(a,t){var o,r,i=t[0],d=t[1],u=t[2],n=0;if(i.some((function(a){return 0!==e[a]}))){for(o in d)l.o(d,o)&&(l.m[o]=d[o]);if(u)var s=u(l)}for(a&&a(t);n<i.length;n++)r=i[n],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return l.O(s)},t=self["webpackChunkTOPPOINT_Web"]=self["webpackChunkTOPPOINT_Web"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=l.O(void 0,[504],(function(){return l(8368)}));t=l.O(t)})();
//# sourceMappingURL=app.29176d17.js.map